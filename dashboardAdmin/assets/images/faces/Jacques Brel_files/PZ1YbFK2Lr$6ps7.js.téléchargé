!function o(a,s,u){function l(n,t){if(!s[n]){if(!a[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[n]={exports:{}};a[n][0].call(r.exports,function(t){var e=a[n][1][t];return l(e||t)},r,r.exports,o,a,s,u)}return s[n].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=["_wrapper","_before","_after","_sponsored"];function o(t,e,n){var i=t.document.getElementById(e);i&&(i.style.display=n)}function i(t,e){var n=t.id||t.parentElement.id;t.style.display=e;for(var i=0;i<r.length;i++)o(window,n+r[i],e)}n.collapseAd=function(t){i(t,"none")},n.collapseElement=function(t,e){o(t,e,"none")},n.uncollapseAd=function(t){i(t,"block")},n.uncollapseElement=function(t,e){o(t,e,"block")}},{}],2:[function(t,e,n){"use strict";!function(r,o,t,a){var n,i,e="top_ad injected_billboard injected_navstrip top_rhs middle_rhs btf_rhs2 rhs_cornerstone bottom_ad inline20 inline40 inline50 inline60 inline80 inlinebottom".split(" "),s="top_ad top_rhs injected_navstrip injected_billboard navboard".split(" "),u=window.top.ad_utils.slot_events,l=function(t){consoleLog(t,"ads-amazon-csm")},c={},d={},h={},f={},p=window.ue_t0;if("function"==typeof r&&"function"==typeof o){for(i=0;i<e.length;i++)!function(i){u.listen(i,"iframe",function(){(c[i]=(new Date).getTime(),r("bb",i,{wb:1}),a)&&a("Content",{element:{slotId:i,type:"widget"}})("mark","widget-begin",Date.now())}),u.listen(i,"request",function(){d[i]=(new Date).getTime(),r("be",i,{wb:1})}),u.listen(i,"tagdeliver",function(){h[i]=(new Date).getTime(),r("af",i,{wb:1})}),u.listen(i,"reflow",function(t){var e=(new Date).getTime();0===t.data.duration&&p&&(e=p+10),f[i]=e,r("cf",i,{wb:1},e)}),u.listen(i,"load",function(){if(generic.monitoring){var t=generic.monitoring.get_remnant_partner(i),e=i+"."+t;if("none"!==t&&(r("bb",e,{wb:1},c[i]),r("be",e,{wb:1},d[i]),r("af",e,{wb:1},h[i]),r("cf",e,{wb:1},f[i]),o("ld",e,{wb:1})),o("ld",i,{wb:1}),a){var n=a("Content",{element:{slotId:i,type:"widget"}});n("mark","widget-end",Date.now()),n("mark","loaded",Date.now())}}})}(e[i]);window.top.ad_utils.ads_header.on_done(function(){var t=[],e=function(t){var e,n=0;for(e in t)n=Math.max(n,t[e]);return n};for(i=0;i<s.length;i++)(n=s[i])in window.top.ad_utils.slots_on_page&&t.push(n);l("determined core_slots: "+t.join(",")),u.listen_all(t,"iframe",function(){r("bb","core_ads",{wb:1},e(c))}),u.listen_all(t,"request",function(){r("be","core_ads",{wb:1},e(d))}),u.listen_all(t,"tagdeliver",function(){r("af","core_ads",{wb:1},e(h))}),u.listen_all(t,"reflow",function(){r("cf","core_ads",{wb:1},e(f))}),u.listen_all(t,"load",function(){o("ld","core_ads",{wb:1})})})}else l("uet() / uex() not available, will not record CSM metrics")}(window.uet,window.uex,window.ue,window.csa)},{}],3:[function(t,e,n){"use strict";var i;i=function(t){try{t()}catch(t){consoleError(t.message,"imdbads.cmd")}},window.imdbads=window.imdbads||{},imdbads.cmd=imdbads.cmd||[],window.top.ad_utils.ads_header.on_done(function(){var t=0,e=imdbads.cmd||[];for(t=0;t<e.length;t++)i(e[t]);imdbads.cmd={push:function(t){i(t)}}})},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.adsBtrUtils={MRC_BTR_CLASS:"mrc-btr-creative",BTR_CLIENT:"btr_client",COD_CLIENT:"cod_client",completedSlots:[],LOI_IMPRESSION_ID_SEPARATOR:"/e/loi/imp?b=",MSDK_IMPRESSION_ID_SEPARATOR:"/e/msdk/imp?b=",isImageLoaded:function(t){return t&&t.complete&&0<t.naturalHeight&&0<t.naturalWidth},isVideoLoaded:function(t){return t&&0<t.currentTime},isElementLoaded:function(t){var e=void 0;return t&&"IMG"===t.tagName?e=this.isImageLoaded(t):t&&"VIDEO"===t.tagName?e=this.isVideoLoaded(t):!t||"P"!==t.tagName&&"SPAN"!==t.tagName&&"DIV"!==t.tagName||(e=!0),e},evaluateCreativeBtrCriteria:function(t){if(t){var e=t.getElementsByClassName(this.MRC_BTR_CLASS);if(0<e.length)return this.checkTaggedElementsLoaded(e)}return!1},checkTaggedElementsLoaded:function(t){for(var e=[],n=0,i=0,r=0;r<t.length;r++){var o=t[r];e.push(o),this.isElementLoaded(o)?i++:n++}return 0<i&&0===n},modifyPixelUrlToBtrCompliant:function(t){return 0<=t.indexOf(this.LOI_IMPRESSION_ID_SEPARATOR)?this.getNewImpressionPixelFromSeparator(t,this.LOI_IMPRESSION_ID_SEPARATOR):0<=t.indexOf(this.MSDK_IMPRESSION_ID_SEPARATOR)?this.getNewImpressionPixelFromSeparator(t,this.MSDK_IMPRESSION_ID_SEPARATOR):void 0},getNewImpressionPixelFromSeparator:function(t,e){var n=t.split(e);if(2<=n.length)return n[0]+"/x/px/"+n[1]+"/btr/%7B%22measurementMethod%22:%22btr_client%22%7D"},markPixelBtrCompliant:function(t,e,n){if(t&&n){var i=e?this.BTR_CLIENT:this.COD_CLIENT,r=0<=n.indexOf("?")?"&":"?",o=encodeURIComponent('{"measurementMethod":"'+i+'"}');t.src=n+r+"pj="+o}},markElementBtr:function(t){t&&t.classList&&t.classList.add(this.MRC_BTR_CLASS)},markSlotFired:function(t){this.completedSlots.push(t)},hasSlotFired:function(t){return this.completedSlots.includes(t)},createImpressionPixels:function(t,n,i,e){t&&0<t.length&&(t.forEach(function(t){var e=document.createElement("img");e.setAttribute("border","0"),e.setAttribute("height","1"),e.setAttribute("width","1"),e.setAttribute("alt",""),e.setAttribute("class","impression-tracker"),this.isAaxImpression(t)?this.markPixelBtrCompliant(e,i,t):e.setAttribute("src",t),n.appendChild(e)},this),this.markSlotFired(e))},createBtrPixel:function(t,e,n){if(t&&0<t.length){var i=document.createElement("img");i.setAttribute("border","0"),i.setAttribute("height","1"),i.setAttribute("width","1"),i.setAttribute("alt",""),i.setAttribute("class","impression-tracker"),i.setAttribute("src",t),e.appendChild(i),this.markSlotFired(n)}},isAaxImpression:function(t){return/http(s)+:\/\/aax[a-zA-Z\-]*\.amazon[a-zA-Z\-]*\.com/.test(t)}}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"isFirefox",value:function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")}},{key:"frameDoc",value:function(t){var e="string"==typeof t?document.getElementById(t):t;if(!e||"IFRAME"===e.tagName){if(!(0<e.src.length&&-1===e.src.indexOf("www.imdb.com")&&-1===e.src.indexOf("javascript:")))return e.contentWindow?e.contentWindow.document:e.contentDocument;window.generic.monitoring.record_event("iframe_not_sourceless_fdoc",!1)}}},{key:"getSlotWrapper",value:function(t){return document.getElementById(t+"_wrapper")}},{key:"getContextualFragment",value:function(t,e){if(!t||!e)return null;var n=t.createRange();return n?n.createContextualFragment(e):null}},{key:"appendContentToIframeDoc",value:function(t,e){if(null!==t){var n=this.getContextualFragment(t,e);null!==n&&t.body.appendChild(n)}}}]),t}();n.default=new r},{}],6:[function(t,e,n){"use strict";var o;(o=window.generic).install(o,{extended_split:function(t,e,n){for(var i,r=[],o=0;(!n||r.length<n-1)&&-1!==(i=t.indexOf(e,o));)r.push(t.substring(o,i)),o=i+e.length;return r.push(t.substring(o)),r},object_from_querystring:function(t){var e,n,i=t.split("&"),r={};if(""===t)return{};for(e=0;e<i.length;e++)r[(n=o.extended_split(i[e],"=",2))[0]]=1===n.length?null:decodeURIComponent(n[1]);return r},cookie:{set:function(t,e,n){var i,r,o,a;if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),i="; expires="+s.toGMTString()}else i="";o=(r=document.location.host.split(".")).pop(),a=r.pop(),document.cookie=t+"="+escape(e)+i+"; path=/; domain="+a+"."+o},get:function(t){var e,n,i=document.cookie.split(";");for(e=0;e<i.length;e++)if("string"==typeof i[e]&&(n=i[e].split("="))[0]&&n[1]&&n[0].replace(/\s/,"")===t)return unescape(n[1]);return null},erase:function(t){this.set(t,"",-1)}}})},{}],7:[function(t,e,n){"use strict";var i,r,o;window.IMDbTimer&&window.IMDbTimer.events&&(i=csm,r=IMDbTimer.starttime,o=IMDbTimer.events,generic.send_csm_head_metrics=function(){i.record("csm_head_pre_title",o.csm_head_pre_title-r),i.record("csm_head_post_title",o.csm_head_post_title-r),i.record("csm_head_pre_css",o.csm_head_pre_css-r),i.record("csm_head_post_css",o.csm_head_post_css-r),i.record("csm_head_pre_icon",o.csm_head_pre_icon-r),i.record("csm_head_post_icon",o.csm_head_post_icon-r),i.record("csm_head_pre_ads",o.csm_head_pre_ads-r)})},{}],8:[function(t,e,n){"use strict";var i,r=t(41),I=(i=r)&&i.__esModule?i:{default:i},N=t(46);!function(l,n,s){var i,r,o,e,a,u,c,d,h,f,p,t,m,g=l.generic=l.generic||{},v={},_=l.IMDbTimer,y="IMDbTimer"in l?l.IMDbTimer.starttime:NaN,b=n.location.hash.match("debug=1"),w=b||!isNaN(y)&&Math.random()<.2,A=b||Math.random()<.25,E={load:1,trueload:1,reflow:1,request:1,tagdeliver:1,iframe:1},T=(i={},r={},o={top_ad:1,top_rhs:1,injected_navstrip:1,injected_billboard:1,navboard:1,bottom_ad:2,middle_rhs:2,btf_rhs2:2,rhs_cornerstone:2,inline80:2},e={top_ad:1,top_rhs:1,bottom_ad:1},a={reflow:1,"ad-delivery":1,load:1},u={},g.on_document_ready(function(t){t(l).on("beforeunload",function(){var t,e;for(t in i)(e=i[t]).request&&e.load===s&&g.monitoring.record_event("ad_load_failure."+t);g.monitoring.send_metrics()})}),{is_slot_monitored:function(t){return t in o||t in e},is_twilight_slot:function(t){return t in o},is_twilight_core_slot:function(t){return t in o&&1===o[t]},is_forester_slot:function(t){return t in e},is_forester_event:function(t,e){return this.is_forester_slot(t)&&e in a},set_metric_value:function(t,e,n){(i[t]=i[t]||{})[e]=n},get_metric_value:function(t,e){if(t in i)return i[t][e]},core_slots:function(){var t,e={};for(t in o)1===o[t]&&(e[t]=1);return e},record_slot_status:function(t){var e=t.match(/^(.*)\.(got_ad|null|blank|fail)$/);e&&(u[e[1]]=e[2])},core_slots_have_an_ad:function(){var t,e=!1;for(t in T.core_slots()){if(!(t in u))return null;"got_ad"===u[t]&&(e=!0)}return e},set_partner:function(t,e){return r[t]=e,this},get_partner:function(t){return r[t]},set_remnant_partner:function(t,e){return T.set_partner(t,e)},get_remnant_partner:function(t){return T.get_partner(t)}}),S="https://www.imdb.com/twilight/?",C=(d={prepare_and_send_metric:function(t,e,n,i){f({slot:e,ad_network_name:"DART",aid:t.aid,cid:t.cid,slot_event:n,time:i})}},h={prepare_and_send_metric:function(t,e,n){var i,r,o=20;(r=function(){(i=l.top.ad_utils.get_cornerstone_ad_object(t))?f({slot:t,ad_network_name:"PDA",aid:i.adId,cid:i.creativeId,slot_event:e,time:n}):--o&&setTimeout(r,100)})()}},f=function(t){var e,n,i,r,o,a,s;A&&T.is_forester_slot(t.slot)&&("https://fls-na.amazon.com/1/display-ads-cx/1/OP/?","LMET","imdb",e=l.top.ad_utils.get_mapped_amazon_slot_name(t.slot),n=c,i=t.ad_network_name,r=t.aid,o=t.cid,a=t.time,s='{"s":"imdb","l":"'+e+'","p":"'+n+'","n":"'+i+'","a":"'+r+'","c":"'+o+'","m":"'+t.slot_event+'","v":"'+a+'"}',b&&consoleLog(s+" metrics sent","forester"),g.one_way_send("https://fls-na.amazon.com/1/display-ads-cx/1/OP/?LMET"+escape(s)))},{send_forester_metric:function(t,e,n,i){d.prepare_and_send_metric(t,e,n,i),h.prepare_and_send_metric(e,n,i)},set_page_type:function(t){c=t}});l.csm=(p={},{measure:function(t,e){this.record(t,this.duration(),e)},record:function(e,t,n,i){var r,o=p[e];if(w&&!csm.metrics[e]&&g.monitoring.record_metric(e+(i||""),t,n),csm.metrics[e]=t,o){for(r=0;r<o.length;r++)try{o[r](t,e)}catch(t){consoleLog("error invoking callback for "+e,"csm")}delete p[e]}},duration:function(t){return(t||+new Date)-y},listen:function(t,e){t in csm.metrics?setTimeout(e,0):(p[t]=p[t]||[]).push(e)},metrics:{}}),g.monitoring={event_starts:{},event_stops:{},events_to_stop:0,event_duration:{},event_counters:[],all_events_started_flag:!1,twilight_info:"",twilight_client:(m=navigator.userAgent,(t=m.match(/MSIE (\d+)/))&&6<=t[1]?"ie"+t[1]:(t=m.match(/Mac OS.*Firefox\/(\d+)/))?"3"===t[1]?"firefox3-mac":"firefox-mac":(t=m.match(/Firefox\/(\d+)/))?"3"===t[1]?"firefox3":"firefox":-1!==m.indexOf("Chrome")?"chrome":-1!==m.indexOf("Safari")?"safari":-1!==m.indexOf("Opera")?"opera":"Other"),isTwilightActiveSample:w,page_type:"",start_timing:function(t){this.start_timing_at(t,(new Date).getTime())},start_timing_at:function(t,e){this.event_starts[t]=e,this.events_to_stop++},stop_timing:function(t,e,n){var i=(new Date).getTime(),r=t;this.event_starts[t]&&(this.event_stops[t]=i,e&&(r+="."+e),this.record_metric(r,i-this.event_starts[t]),delete this.event_starts[t],this.events_to_stop--,(n||this.all_events_started_flag&&0===this.events_to_stop)&&this.send_metrics())},record_event:function(t,e){var n;if(this.event_counters.push(t),t in v)for(weblab in v[t])n=t+"__weblab_"+weblab,this.event_counters.push(n),consoleLog(n,"twilight");consoleLog(t,"twilight"),e&&this.send_metrics()},record_metric:function(t,e,n){var i,r;if(T.record_slot_status(t),this.event_duration[t]=e,consoleLog(t+","+e,"twilight"),t in v)for(i in v[t])r=t+"__weblab_"+i,this.event_duration[r]=e,consoleLog(r+","+e,"twilight");n&&this.send_metrics()},send_metrics:function(){var t,e,n=S+this.twilight_info,i=[],r=0,o="",a=function(t,e){i.push(function(){return"&Operation."+ ++r+"="+t+"&OperationTiming."+r+"="+e})},s=function(t){i.push(function(){return"&Counter."+ ++r+"="+t})},u=function(){o.length&&(g.one_way_send(n+o+"&ord="+l.top.ad_utils.ord),consoleLog("metrics sent ("+r+")","twilight"),o="",r=0)};for(t in this.event_duration)a(t,this.event_duration[t]);for(this.event_duration={},e=0;e<this.event_counters.length;e++)s(this.event_counters[e]);for(this.event_counters=[],e=0;e<i.length;e++)1700<(o+=i[e]()).length+n.length&&u();u()},set_twilight_info:function(t,e,n,i,r,o){_&&"java"===_.pt&&(t+=".java"),this.twilight_info="PageType="+t+"&Geo="+e+"&tw_ord="+n+"&timestamp="+i+"&Client="+this.twilight_client+"&Site="+o,S=r},set_forester_info:function(t){C.set_page_type(t)},all_events_started:function(){this.all_events_started_flag=!0},set_partner:function(t,e){var n=(0,N.getSlotName)(t);T.set_partner(n,e)},set_partner_by_slot:function(t,e){T.set_partner(t,e)},get_partner:function(t){return T.get_partner(t)||"none"},set_remnant_partner:function(t,e){g.monitoring.set_partner(t,e)},get_remnant_partner:function(t){return g.monitoring.get_partner(t)},set_remnant_partner_fallback:function(t,e){var n=T.get_partner(t);void 0===n?T.set_partner(t,e):T.set_partner(t,n+"_"+e)},update_slot_metrics:function(t,e,n){var i,r=l.top.ad_utils.get_slot_iframe(t),o=null,a="."+g.monitoring.get_partner(t);if(I.default.isSafeframeSlot(t,r)){if(!(e in E))return;o=I.default.getSfAdObject(t)}else o=r&&r.contentWindow&&r.contentWindow.document?r.contentWindow.document.ad:null;t&&T.is_slot_monitored(t)&&T.get_metric_value(t,e)===s&&(T.set_metric_value(t,e,s!==n?n:csm.duration()),i=T.get_metric_value(t,e),o&&T.is_forester_event(t,e)&&(C.send_forester_metric(o,t,e,i),"load"===e&&C.send_forester_metric(o,t,"ad-delivery",T.get_metric_value(t,"load")-T.get_metric_value(t,"request"))),T.is_twilight_slot(t)&&(csm.record("csm_"+t+"_"+e,i,0,a),"load"===e&&".none"!==a&&".1P"!==a&&csm.record("csm_"+t+"_deliver",i-T.get_metric_value(t,"tagdeliver"),0,a),T.is_twilight_core_slot(t)&&x.send(e)))},update_sf_slot_metrics:function(t){var e=JSON.parse(t);if(e&&e.slot&&e.event)if("reflow"===e.event)I.default.fireSfReflowMetric(e.slot);else if("fireload"===e.event){l.top.ad_utils.get_slot_iframe(e.slot).onload=function(){I.default.onSfAdLoad(e.slot)}}else g.monitoring.update_slot_metrics(e.slot,e.event)},get_metric_value:function(t,e){return T.get_metric_value(t,e)},enable_weblab_metrics:function(t,e,n){var i,r;for(i=0;i<n.length;i++)r=n[i],v[r]=v[r]||{},v[r][t+"_"+e]=1}},g.on_document_ready(function(t){var e;t(l).on("beforeunload",function(t){var e=(n.location+"").split("#",2)[0];l.name="clicktoresponse:"+(new Date).getTime()+":"+e}),g.monitoring.isTwilightActiveSample&&(csm.measure("csm_ready"),t(l).on("load",function(){csm.measure("csm_load",!0)}),t("div.dfp_slot").each(function(){g.monitoring.record_event("dfp_slot")}),e=parseInt(t("#servertime").attr("time"),10),isNaN(e)||g.monitoring.record_metric("csm_server",e))}),function(){if("http:"===n.location.protocol){var t,e=l.name.match(/^clicktoresponse:(\d+):(.*)$/);e&&(n.referrer===e[2]&&_&&(t=_.starttime-e[1],_.clicktoresponse=t,g.monitoring.record_metric("click_to_response",t)),l.name="")}}();var x=function(){var t,r=[],e=T.core_slots(),o={},a=!1,n=function(){var t;if(!a)for(t in a=!0,consoleLog("Finalized core ads on current page: "+r.join(",")),o)x.send(t)};for(t in e)l.top.ad_utils.slot_events.listen(t,"iframe",function(t){r.push(t.slot),r.length===e.length&&n()});return g.on_document_ready(n),{send:function(t){var e,n,i=0;if(a){for(n=0;n<r.length;n++){if(e=T.get_metric_value(r[n],t),s===e)return;i=Math.max(i,e)}csm.record("csm_core_ads_"+t,i)}else o[t]=1}}}()}(window,document)},{41:41,46:46}],9:[function(t,e,n){"use strict";var i,r,s,o,u,l,c,d,a,h=t(28),f=(i=h)&&i.__esModule?i:{default:i};r=window.top.ad_utils,s=["mediaviewer_banner"],o=["inline20","inline40","inline50","inline60","inline80","inlinebottom"],u={},l={},c=function(t,e,n,i){var r=new a(e,n,i||{});try{t(r)}catch(t){consoleError(t)}},d=function(t,e){return t+":"+e},a=function(t,e,n){this.slot=t,this.event=e,this.data=n},r.slot_events={listen:function(t,e,n){if(!(-1<s.indexOf(t))){var i,r,o,a=e.replace(/(^\s+|\s+$)/g,"").split(/\s+/);for(o=0;o<a.length;o++)r=a[o],(i=d(t,r))in l?c(n,t,r,l[i]):(u[i]=u[i]||[]).push(n);return this}},listen_all:function(t,e,n){var i,r,o,a=(r=n,o=t.length,function(){0==--o&&r.apply(this,arguments)});for(i=0;i<t.length;i++)this.listen(t[i],e,a)},trigger:function(t,e,n){if(!(-1<s.indexOf(t))){var i,r=d(t,e),o=u[r]||[],a=r.split(":")[0];if(r in l&&(!a||!this.slot_can_refire(a)))return generic.monitoring.record_event(r+"_already_fired",!1),void consoleError("attempted to fire "+r+", but it has already fired!");for(l[r]=n,i=0;i<o.length;i++)c(o[i],t,e,n);return this}},has_fired:function(t,e){return d(t,e)in l},slot_can_refire:function(t){return o.includes(t)||(0,f.default)(t)}}},{28:28}],10:[function(t,e,n){"use strict";var F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U=i(t(5)),V=i(t(41)),H=i(t(29)),W=i(t(27)),z=i(t(32)),G=i(t(20)),q=t(43),Y=t(46),X=t(1),K=t(42),Q=t(11),J=t(55),Z=t(37),tt=t(35),et=t(24),nt=t(25),it=t(4),rt=t(47);function i(t){return t&&t.__esModule?t:{default:t}}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.slice(e||0,t.length)===t}),function(N,O,D){var n,i,r,o,a,s,t=N.ads_js_start?(new Date).getTime()-N.ads_js_start:null,e=navigator.userAgent,c=/MSIE|Trident\/\d+/.test(e),d=/Firefox/.test(e),w=N.generic,u={top_ad:"t",top_rhs:"tr"},l={injected_billboard:"top_ad",injected_navstrip:"top_ad",navboard:"top_ad"},h={top_ad:{width:"728px",height:"300px"},injected_billboard:{width:"970px",height:"500px"},top_rhs:{width:"988px",height:"320px"}},f={b:1,l:1,bl:1},A=function(t){var e=O.getElementById(t),n=V.default.getSafeframeDiv(t);return n&&"IFRAME"!==n.tagName?n.getElementsByTagName("iframe")[0]:e},p=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,function(){n.apply(t,arguments)}):t.addEventListener(e,n,!1)},m=1e16*Math.random(),g={},E=(r=function(t){var n="";return jQuery.each(i[t],function(t,e){n+='"'+t+'":['+o(e[0])+","+o(e[1])+"],"}),'"'+t+'":{'+n.substr(0,n.length-1)+"}"},o=function(t){var e=parseInt(t,10);return isFinite(e)?e:0},a=function(){return"/"===O.location.pathname?"h":"n"},s={top_ad:"t",top_rhs:"tr",injected_navstrip:"in",injected_billboard:"ib",bottom_ad:"b",btf_rhs2:"br"},{store:function(){w.on_document_ready(function(t){var d,e;try{!function(){var t=w.cookie.get("as");if(t)try{i=JSON.parse(t),n=n||i||{}}catch(t){n=n||(i={})}}(),d=(i=i||{})[a()]||{},t.each(s,function(t,e){var n,i,r,o,a,s,u,l,c=(0!==(n=$("#"+t)).length&&"IFRAME"!==n[0].tagName&&(n=n.find("iframe")),n);0!==c.length&&(d[e]=[(u=c,l=N.top.ad_utils.get_ad_object(u[0]),"none"===u.css("display")?0:parseInt(l.w,10)),(i=c,r=t,o=0,a=N.top.ad_utils.get_ad_object(i[0]),s=parseInt(a.h,10),"top_ad"===r?jQuery("#nb20").hasClass("banner")?o=-5:jQuery("#nb20").hasClass("supertab")&&(o=-15):"injected_billboard"===r&&(o=20),i.id&&"swfAutoMaxHeight"in i[0].contentWindow&&(s=i[0].contentWindow.swfMinHeight),"none"===i.css("display")||0===s?0:s+o)])}),i[a()]=d,e="{",i&&("h"in i&&(e+=r("h")),"h"in i&&"n"in i&&(e+=","),"n"in i&&(e+=r("n"))),e+="}",w.cookie.set("as",e,w.days_to_midnight||1)}catch(t){consoleLog("Failed to store ad size cookie "+t.toString(),"ads")}})}});N.ad_size_cookie=E,(0,Z.initializeResponsiveAdApi)();var v,_,y,b,T,S,C,x,I,R,L,k,M,P={inject_slot:function(t,e){var n,i,r,o,a,s=t.id,u='<style>body{background:transparent;}</style><script type="data-doubleclick" src="https://ia.media-imdb.com/images/G/01/mobile/blank_pixel._V137875076_.gif'+(t.getAttribute("data-dart-params")||"")+'"><\/script>'+e,l=u+"<script defer>parent.window.top.ad_utils.ad_table."+s+".fired=true;<\/script>";!V.default.isSafeframeSlot(s,t)||(n=e)&&0===n.indexOf("\x3c!-- blank --\x3e")||!N.DAsf&&!N.MAsf?c?(i=t,r=l,o="__srcless_"+Math.floor(68719476735*Math.random()).toString(36),a="<body><script>document.write(parent.window.top.ad_utils."+o+");delete parent.window.top.ad_utils."+o+";<\/script></body>",N.top.ad_utils[o]=r,i.src="javascript:unescape('"+escape(a)+"')"):function(e,t){var n=U.default.frameDoc(e);d||n.open("text/html","replace");var i="";i="https:"===location.protocol?'<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/></head><body>'+t+"<script>document.close()<\/script></body>":"<body>"+t+"<script>document.close()<\/script></body>",(0,H.default)()?setTimeout(function(){var t=O.getElementById(e.id);null!==t&&t.contentWindow.document.write(i)},0):n.write(i)}(t,l):V.default.injectCode(s,u)}};N.ad_utils=N.top.ad_utils={responsiveAdAPI:Z.responsiveAdAPI,adsBtrUtils:it.adsBtrUtils,tarnhelmAdUtils:rt.tarnhelmAdUtils,mediaOrchestratorBridge:tt.mediaOrchestratorBridge,ord:m,regenerateOrd:function(){N.consoleLog("Regenerating Client Side Ord","ads"),m=1e16*Math.random(),N.top.ad_utils.ord=m},ad_table:{},ad_navbar:{},ad_queue:[],low_latency_punt_ads:{},blank_ad_code:"<script>document.ad={h:0,w:0,scope:'blank'}<\/script>",slots_on_page:null,dateCheck:G.default,isInViewport:W.default,registerClickTrackers:z.default,get_slot_iframe:A,scaleTarnhelm:K.scaleTarnhelm,initAndBindResponsiveBackupLogic:Q.initAndBindResponsiveBackupLogic,aax_instr_pixel_url:{},aax_imp_pixel_url:{},invalid_impression_experiment_requestId:{},update_ad_details:V.default.updateAdDetails,set_partner:V.default.setPartner,get_safeframe_ad_objs:V.default.getSafeframeAdObjs,sf_ad_details:{},removeOpacityAnimation:function(t,e){if(t&&e){var n=U.default.getSlotWrapper(e);n&&(n.classList.remove("iframe_tweening"),t.classList.remove("ad_fadein"))}},setup_slot_metrics:function(n){N.top.ad_utils.slot_events.listen(n,"iframe request reflow tagdeliver load",function(t){var e=t.data.duration,n=t.data.timestamp;e===D&&n&&(e=csm.duration(n)),w.monitoring.update_slot_metrics(t.slot,t.event,e)}),N.top.ad_utils.slot_events.listen(n,"request",function(t){var e=t.slot;w.monitoring.start_timing(e)}),N.top.ad_utils.slot_events.listen(n,"request tagdeliver",function(t){var e,n=t.slot,i=N.top.ad_utils.inject_ad.get_injectable_slots(n);for(e=0;e<i.length;e++)N.top.ad_utils.slot_events.trigger(i[e],t.event,t.data)}),N.top.ad_utils.slot_events.listen(n,"load",function(t){var e=t.data.type;e?w.monitoring.stop_timing(n,e,!0):consoleError(t.slot+" loaded, but type was not reported"),w.monitoring.update_slot_metrics(t.slot,"trueload")}),N.top.ad_utils.slot_events.listen(n,"punt",function(t){var e=t.event+"_"+t.data.type;w.monitoring.update_slot_metrics(t.slot,e)})},constructClientSideUrl:J.constructClientSideUrl,mobileWebCreativeResizing:K.mobileWebCreativeResizing,isInternetExplorer:q.isInternetExplorer,isIpad:q.isIpad,isResponsive:H.default,makeAtfSlotsCall:nt.makeAtfSlotsCall,register_ad:function(t){N.top.ad_utils.setup_slot_metrics(t),N.top.ad_utils.slot_events.trigger(t,"iframe"),this.ad_table[t]={slot:t}},gpt:(L=null,k=[],{handle_response:function(t){var e;for(L=t,e=0;e<k.length;e++)this.render_ad(k[e])},render_ad:function(t){var e,n,i;L?(e=L[t]||{},n=A(t),i=e._html_||"",null!==n.getAttribute("data-roadblocked")&&(i="\x3c!-- roadblocked --\x3e"+N.top.ad_utils.blank_ad_code,N.top.ad_utils.slot_events.trigger(t,"request",{duration:0})),P.inject_slot(n,i)):k.push(t)}}),expand_ad:function(e){var t=this,n=e.id,i=e.height,r=e.width;if(n=V.default.getRawSlotName(n),!("expand_called"in this.ad_table[n])){var o,a=U.default.getSlotWrapper(n).id,s=this.get_ad_object(e),u=csm.duration(),l=O.getElementById(n+"_reflow_helper");l&&l.offsetTop;if(n+"_wrapper"===a||w.has_document_readied()){if(this.ad_table&&this.ad_table[n]){this.ad_table[n].expanded=1;var c=(0,Q.initAndBindResponsiveBackupLogic)(e.contentWindow);if(s&&!c&&(O.ads||(O.ads={}),O.ads[s.cid]=s,N.top.ad_utils.resize_iframe(e,s),s.st?this.expand_supertab(s):s.bb?this.expand_billboard(s):"top_ad"!==n||!this.is_open(n,s)||s.clickroll||s.overlay||this.expand_top_banner(),s.wrap&&this.expand_wrap(s),s.bamf&&this.expand_bamf(s,e),s.inner_bamf&&this.expand_inner_bamf(s),s.relative_bamf&&this.expand_relative_bamf(s),this.is_open(n,s)?N.top.ad_utils.show_hidden_labels(n):this.collapse_ad(e),s.styles))for(o in s.styles)w.override_style(o,s.styles[o].style);this.ad_table[n].expand_called=1,w.on_document_ready(function(t){t(e).trigger("expand_ad")}),N.top.ad_utils.fire_reflow_metric(n,s,r,i,e.width,e.height),N.top.ad_utils.fire_tagdeliver_metric(n,u),E.store(),O.body.className=O.body.className}}else w.on_document_ready(function(){t.expand_ad(e)})}},resize_iframe:function(t,e){"w"in e&&(t.width=parseInt(e.w,10)),"h"in e&&(t.height=e.expandHeight?parseInt(e.expandHeight,10):parseInt(e.h,10)),"z"in e&&e.z&&(slot_wrapper.style.zIndex=e.z,slot_wrapper.style.position="relative")},show_hidden_labels:function(t){var e=O.getElementById(t+"_before"),n=O.getElementById(t+"_after");e&&this.display_label(e),n&&this.display_label(n)},fire_reflow_metric:function(n,i,t,e,r,o){var a=csm.duration(),s=O.getElementById(n+"_reflow_helper"),u=s?s.offsetTop:null;e===o&&t===r?N.top.ad_utils.slot_events.trigger(n,"reflow",{duration:0}):setTimeout(function(){var t="top_ad"===n&&N.top.ad_utils.is_open(n,i)&&!i.st?10:0,e=s&&s.offsetTop===u+t;N.top.ad_utils.slot_events.trigger(n,"reflow",{duration:e?0:a})},10)},fire_tagdeliver_metric:function(t,e){t in l||N.top.ad_utils.slot_events.has_fired(t,"tagdeliver")||N.top.ad_utils.slot_events.trigger(t,"tagdeliver",{duration:e})},get_ad_object:function(t){var e=t.id;if(V.default.isSafeframeSlot(e,t))return V.default.getSfAdObject(e);var n=U.default.frameDoc(t),i=null;if(null!=n){if(i=n.ad)"pid"in i||(i.pid="DFP"),"instrPixel"in i||(i.instrPixel=N.top.ad_utils.aax_instr_pixel_url[e.toUpperCase()]);else{var r,o,a,s=0,u=0,l=["img","object","embed","iframe"];for(o in l)for(a=n.getElementsByTagName(l[o]),r=0;r<a.length;r++){var c,d,h=a[r];c=h.scrollWidth||h.width,d=h.scrollHeight||h.height,c&&1<c&&(s=Math.max(s,parseInt(c,10))),d&&1<d&&(u=Math.max(u,parseInt(d,10))),consoleLog(e+" : estimated size : "+c+","+d,"ads")}i={w:s.toString(),h:u.toString(),pid:"",url:"",aid:"0",cid:"0",instrPixel:N.top.ad_utils.aax_instr_pixel_url[e.toUpperCase()]},0!==s&&0!==u||(i.scope="null")}return n.ad=i}consoleLog("Cannot get document back from iframe")},get_cornerstone_ad_object:function(t){var e=u[t]+"adData";return"aanResponse"in top.document&&e in top.document.aanResponse?top.document.aanResponse[e]:null},get_mapped_amazon_slot_name:function(t){return u[t]?u[t]:t},on_ad_load:function(t){if(t&&0<t.src.length&&-1===t.src.indexOf("www.imdb.com")&&-1===t.src.indexOf("javascript:"))w.monitoring.record_event("iframe_not_sourceless",!1);else{var e,n,i,r=t.id,o=this.ad_table[r];if(o&&o.fired){this.responsiveAdAPI&&(this.responsiveAdAPI.events.adIframeLoad(r),this.responsiveAdAPI.checkShouldMakeAdSticky(t)),e=this.get_ad_object(t),n=this.get_type_of_ad(e),o.loaded=!0,!e||"blank"!==e.scope&&"null"!==e.scope||(i="0"===t.getAttribute("data-original-width")&&"0"===t.getAttribute("data-original-height")?0:w.monitoring.get_metric_value(r,"reflow"));try{o.expanded||(this.expand_ad(t),(0,et.globalizeCss)(t.contentWindow))}catch(t){consoleLog("Exception during expand_ad:"+t.message)}N.top.ad_utils.slot_events.trigger(r,"load",{duration:i,type:n})}else consoleLog("deflected spurious onload event for "+r,"on_ad_load")}},is_open:function(t,e){var n=A(t),i=n&&n.getAttribute("data-first-party-creative-template");return"top_ad"===t&&i?e&&"w"in e&&"h"in e&&0<e.w&&0<e.h&&"blank"!==e.scope:e&&"blank"!==e.scope},expand_supertab:function(t){var e=O.getElementById("nb15"),n=O.getElementById("nb20");e?e.className="supertab":n&&(n.className="supertab")},expand_billboard:function(t){var o,e,n=O,i=parent,r="injected_billboard",a=A(r),s=U.default.getSlotWrapper(r),u=O.getElementById("top_rhs_wrapper"),l=u?u.parentElement||u.parentNode:null,c=t.bb_close_tracker,d=t.bb_show,h=t.bb_show_tracker,f="ax",p=!1;if(!s)return!1;function m(){var t,e=w.cookie.get(f),n=e&&e.split(/o|c/),i=e&&e.split(/\d*/),r={};if(n&&i)for(""===i[0]&&i.shift(),t=0;t<i.length;++t)r[n[t]]=i[t];o=r}function g(){var t,e="";new Date;for(t in o)o.hasOwnProperty(t)&&(e+=t+o[t]);w.cookie.set(f,e,w.days_to_midnight||1)}function v(){a.style.display="none",u||p?b():w.on_document_ready(_)}function _(){y(),b()}function y(){if(!p&&(u=O.getElementById("top_rhs_wrapper"),l=u?u.parentElement||u.parentNode:null,u))try{s.parentNode.removeChild(e),l.insertBefore(e,u),e.style.marginRight="",e.style.marginTop=""}catch(t){consoleLog("caught a duplicate call to attempt_reattach_show_ad_button","ads")}}function b(){d!==D&&""!==d&&(e.style.display="block"),m(),o[t.aid]="c",g(),E.store(),s.style.margin="0px",p=!0}return s.className=(s.className?s.className+" ":"")+"billboard",(e=n.createElement("div")).id="billboard_show_button",e.style.display="none",l?l.insertBefore(e,u):(N.top.ad_utils.slot_events.listen("top_rhs","iframe",function(){y()}),e.style.marginRight="19px",e.style.marginTop="7px",s.parentNode.insertBefore(e,s)),1===t.bb&&(i.window.top.ad_utils.ns.register("billboard","close",function(){v(),void 0!==c&&c()}),e.innerHTML=d,e.onclick=function(){e.style.display="none",a.style.display="block",m(),o[t.aid]="o",g(),E.store(),s.style.margin="20px 19px",void 0!==h&&h()},m(),t.aid in o&&"c"===o[t.aid]&&v()),!0},expand_top_banner:function(){var t=O.getElementById("nb15");if(t)t.className="banner";else{var e=O.getElementById("top_ad");e&&(e.style.margin="auto")}},expand_bamf:function(t,e){var n=t.bamf;w.extend(e.style,n.style)},expand_inner_bamf:function(t){var e=t.inner_bamf,n=O.getElementById(e.targetId);n&&e.node&&w.insert_after(e.node,n)},expand_relative_bamf:function(t){var e,n=t.relative_bamf,i=O.getElementById(n.targetId);"insert_after"===n.relation?e=w.insert_after:"insert_before"===n.relation?e=w.insert_before:"insert_inside"===n.relation&&(e=w.insert_inside),i&&n.node&&e(n.node,i)},expand_wrap:function(t){var e;if(t.styles||(t.styles={}),t.sleeves)e={wrapper:{style:{background:t.wrap}},root:{style:{background:"none","box-shadow":"none"}},pagecontent:{style:{height:"100%"}}};else{var n,i="styleguide-v2";if(!(!O.getElementById("imdbHeader")||O.getElementById("imdbHeader").parentNode===O.getElementById("nb20"))){i="wrapper";var r=-1<t.wrap.indexOf("fixed"),o=O.getElementById("wrapper");r&&null!==o&&o.style.setProperty("background-attachment","scroll","important")}ot(n={},i,{style:{background:t.wrap}}),ot(n,"root",{style:{"background-color":"transparent","box-shadow":"none"}}),ot(n,"pagecontent",{style:{height:"100%"}}),ot(n,"nb20",{style:{background:"none"}}),e=n}w.extend(t.styles,e)},expand_label:function(t){t.className=t.className.replace(/hidden/,"")},display_label:function(t){t.style.display="block",t.style.visibility="visible"},collapse_ad:X.collapseAd,uncollapse_ad:X.uncollapseAd,get_type_of_ad:function(t){return t?t.scope?t.scope:"got_ad":"null"},report_ad_data:function(t,n){var e=t,i={};if(e!==top){try{for(;e.parent!==top;)e=e.parent;(0,Y.getSlotName)(e)}catch(t){return void consoleLog("could not determine ad slot: "+t)}$.each("aid cid pid url dom dim".split(" "),function(t,e){e in n&&(i[e]=n[e])})}},ns:(I={},R=function(t){return I[t]=I[t]||{}},{register:function(t,e,n){var i;i="string"==typeof t?t:t.frameElement.id,R(i)[e]=n},get:R}),inject_ad:(T={},S={},C={},x=function(t){consoleLog(t,"inject_ad")},{render:function(t){var e=A(t),n=T[t];C[t]||(x(t+" rendered"),C[t]=1,N.top.ad_utils.ad_table[t]={slot:t,injected:!0},n?P.inject_slot(e,n):P.inject_slot(e,'<script>document.ad = {h:"0",w:"0",scope:"blank"}<\/script>'))},register:function(t){var e=l[t],n=this;x(t+" registered"),S[t]=1,T[t]?n.render(t):N.top.ad_utils.slot_events.listen(e,"load",function(){n.render(t)}),N.top.ad_utils.setup_slot_metrics(t),N.top.ad_utils.slot_events.trigger(t,"iframe")},inject:function(t,e){x(t+" injected"),T[t]=e,S[t]&&this.render(t)},get_injectable_slots:function(t){var e,n=[];for(e in l)l[e]===t&&n.push(e);return n}}),weblab:(b={},{set_treatment:function(t,e){b[t]=e},get_treatment:function(t){return b[t]}}),attach_aax_callback:function(e,n){n.aax_render_ad=function(t){t&&t.html?(n.document.write(t.html),n.document.got_aax_ad="got_ad"):n.document.got_aax_ad="blank",n.top.ad_utils.slot_events.trigger(e,"tagdeliver")}},set_invalid_impression_experiment_request_id:function(t,e){N.top.ad_utils.invalid_impression_experiment_requestId[t.toUpperCase()]=e},set_aax_instrumentation_pixel_url:function(t,e){N.top.ad_utils.aax_instr_pixel_url[t.toUpperCase()]=e},set_aax_impression_pixel_url:function(t,e){N.top.ad_utils.aax_imp_pixel_url[t.toUpperCase()]=e},inject_serverside_ad:function(t,e){var n=A(t),i=null!==n.getAttribute("data-roadblocked"),r=null!==n.getAttribute("data-blank-serverside");N.top.ad_utils.slot_events.trigger(t,"request",{duration:0}),i?e="\x3c!-- roadblocked --\x3e"+N.top.ad_utils.blank_ad_code:r&&(e="\x3c!-- blank --\x3e"+N.top.ad_utils.blank_ad_code),P.inject_slot(n,e)},aax_render_ad:function(n){var i=A(n),t=i.getAttribute("data-aax-url"),e="<script>parent.window.top.ad_utils.attach_aax_callback('"+n+"', window);<\/script><script src=\""+t+'"><\/script>';i.onload=function(){var t,e=N.top.ad_utils.ad_table[n];e&&e.fired?("got_ad"!==U.default.frameDoc(i).got_aax_ad?(i.style.display="none",t="blank"):t=U.default.frameDoc(i).got_aax_ad,N.top.ad_utils.slot_events.trigger(n,"load",{type:t})):consoleLog("deflected spurious cornerstone onload event for "+n,"aax_render_ad")},N.top.ad_utils.slot_events.trigger(n,"request"),P.inject_slot(i,e)},register_punt_ad:function(t,e,n,i){this.low_latency_punt_ads[t]={w:e,h:n,markup:i}},inject_punt_ad:function(t,e){var n=t.frameElement,i=n.id,r=U.default.frameDoc(n),o=null,a=null,s=r&&r.ad&&r.ad.aid?r.ad.aid:"0",u=r&&r.ad&&r.ad.cid?r.ad.cid:"0";i in this.low_latency_punt_ads?(o=this.low_latency_punt_ads[i],r.ad={w:o.w,h:o.h,pid:"",url:"",aid:s,cid:u},this.expand_ad(n),a=o.markup.replace(/\[PUNT_ORIGIN\]/,encodeURIComponent('{"punt_origin":"'+e+'"}')),r.write(a),N.top.ad_utils.slot_events.trigger(i,"punt",{type:"got_ad"})):N.top.ad_utils.slot_events.trigger(i,"punt",{type:"blank"})},fp:N.imdbads.frequencyCapping,tandem:(y={},{register_swf:function(t,e){if(consoleLog("Register swf: "+t+" "+e,"Tandem"),y[e])return consoleError("swf already registered: "+t+" "+e,"Tandem"),!1;y[e]={id:t}},send_message:function(e,t,n){var i,r,o=y[e];if(consoleLog("Sending message: "+e+" "+t+" "+n,"Tandem"),!o)return consoleError("Attempted message to : "+e+" before registered.","Tandem"),!1;for(r in N.top.ad_utils.ad_table)U.default.frameDoc(r)&&U.default.frameDoc(r).getElementById(o.id)&&(i=U.default.frameDoc(r).getElementById(o.id));var a=O.getElementById(o.id);a&&(i=a);try{return c?i.receiveTimelineMessage(n,t):i.getElementsByTagName("embed")[0].receiveTimelineMessage(n,t),!0}catch(t){return consoleError("Unable to call receiveTimelineMessage on: "+e,"Tandem"),consoleError(t),!1}}}),set_slots_on_page:function(t){N.top.ad_utils.slots_on_page=t},ads_header:(v=!1,_=[],{on_done:function(t){if(v)try{t()}catch(t){consoleWarn(t)}else _.push(t)},done:function(){var t;for(v=!0,t=0;t<_.length;t++)try{_[t]()}catch(t){consoleWarn(t)}_=null}}),is_qualified_expanding:function(t){var e=h[t.slot];return!!(e&&t.width.replace(/px/g,"")<=e.width.replace(/px/g,"")&&t.height.replace(/px/g,"")<=e.height.replace(/px/g,"")&&f[t.direction])},expand_overlay:function(t){var e=JSON.parse(t);if(e&&e.slot&&e.width&&e.height&&e.direction&&N.top.ad_utils.is_qualified_expanding(e)){var n=N.top.ad_utils.get_slot_iframe(e.slot);if(void 0!==n){n.style.position="absolute",n.style.width=e.width,n.style.height=e.height;var i=O.getElementById(e.slot);switch(e.direction){case"l":N.top.ad_utils.expand_left(n,e,i);break;case"b":N.top.ad_utils.expand_bottom(n,e,i);break;case"bl":N.top.ad_utils.expand_left(n,e,i),N.top.ad_utils.expand_bottom(n,e,i)}}}},expand_general:function(t,e,n){var i="top_ad"==n.slot?300:100;t.style.zIndex=i,e.style.width=t.width,e.style.height=t.height},expand_left:function(t,e,n){t.style.marginLeft="-"+(e.width.replace(/px/g,"")-t.width.replace(/px/g,""))+"px",N.top.ad_utils.expand_general(t,n,e)},expand_bottom:function(t,e,n){N.top.ad_utils.expand_general(t,n,e)},collapse_overlay:function(t){var e=JSON.parse(t);if(e&&e.slot&&V.default.getSfAdObject(e.slot)){var n=N.top.ad_utils.get_slot_iframe(e.slot);n&&(n.style.position="",n.style.width="",n.style.height="",n.style.zIndex="",n.style.marginLeft="",n.style.marginTop="",O.getElementById(e.slot).style.marginTop="")}}},w.install(w,{should_jQuery_noConflict:N.$&&!N.jQuery,one_way_send_record:[],insert_after:function(e,n){try{n.parentNode.insertBefore(e,n.nextSibling)}catch(t){n.parentNode.appendChild(e)}},insert_before:function(t,e){e.parentNode.insertBefore(t,e)},insert_inside:function(t,e){e.appendChild(t)},extend:function(t,e){var n;for(n in e)"object"===F(e[n])?t[n]!==e[n]&&(void 0===t[n]&&(t[n]={}),this.extend(t[n],e[n])):t[n]=e[n]},override_style:function(t,e,n){var i,r="#"+t;for(i in e)e[i]+=" !important";w.add_json_style(r,e,n)},add_json_style:function(t,e,n,i){var r,o=t+"{";for(r in e)o+=r+":"+e[r]+";";o+="}",w.add_css_style(o,n,i)},add_css_style:function(t,e,n){var i,r,o,a="css-style-generic",s=[a];for(o in e&&e.length?s.push(e):e=a,n||(n="a"),s)O.getElementById(s[o])||((i=O.createElement("style")).setAttribute("type","text/css"),i.id=s[o],O.getElementsByTagName("head")[0].appendChild(i));if((i=O.getElementById(e)).styleSheet&&"cssText"in i.styleSheet)r=("a"===n?i.styleSheet.cssText:"")+t,i.styleSheet.cssText=r;else{r=("a"===n?i.innerHTML:"")+t;try{i.innerHTML=r}catch(t){i.innerText=r}}},add_css_file:function(t,e){e||(e="css-file-generic");var n=O.getElementById(e);n||((n=O.createElement("link")).setAttribute("type","text/css"),n.rel="stylesheet",n.id=e,O.getElementsByTagName("head")[0].appendChild(n)),n.href=t},set:function(t,e){var n=t.split(":");"cookie"===n[0]?w.cookie.set(n[1],e):w.cache.set(n[1],e)},get:function(t){var e=t.split(":");return"cookie"===e[0]?w.cookie.get(e[1]):w.cache.get(e[1])},erase:function(t){var e=t.split(":");return"cookie"===e[0]?w.cookie.erase(e[1]):w.cache.erase(e[1])},cache:{set:function(t,e){g[t]=e},get:function(t){return g[t]},erase:function(t){delete g[t]}},load_script:function(t){var e=O.createElement("script");e.type="text/javascript",e.src=t,O.getElementsByTagName("head")[0].appendChild(e)},load_script_notify:function(e,n){var i=O.createElement("script"),r=!1;i.type="text/javascript",i.src=e,i.onload=i.onreadystatechange=function(){var t=this.readyState;r||t&&"complete"!==t&&"loaded"!==t||(r=!0,O.body.removeChild(i),"function"==typeof n&&n(e))},O.body.appendChild(i)},one_way_send:function(t){var e=new Image(0,0);e.src=t,this.one_way_send_record.push(e)},load_when_visible:function(t,e){var n=0,i=jQuery(N),r=i.height()+i.scrollTop();if(jQuery("#"+t).length){var o=jQuery(jQuery("#"+t).get(0)),a=o.offset().top;a<r?e(t):i.scroll(function(){r=i.height()+i.scrollTop(),(a=o.offset().top)<r&&!n&&(n=1,e(t))})}else e(t)},unload_plugins:function(){for(var t,e,n,i,r,o=[O],a=new RegExp("^("+location.protocol+"//"+location.hostname+")?(/.*)?$"),s=function(t){var e,n;for(e=t.length-1;0<=e;e--)(n=t[e]).parentNode.removeChild(n)};o.length;)for(s((t=o.pop()).getElementsByTagName("object")),s(t.getElementsByTagName("embed")),r=(e=t.getElementsByTagName("iframe")).length-1;0<=r;r--)n=e[r],a.test(n.src)?(i=U.default.frameDoc(n))&&o.push(i):s([n])},addEventListener:function(t,e,n){p(t,e,n)}}),N.custom={amazon:{load_callback:function(t){}},indirect:{close:function(t){t.location.href.match("floater")&&custom.floater.close((0,Y.getSlotName)(t))}},full_page:{style_id:"custom__full_page__generated_styles",PLAID_CSS_MAP:{base:"--ipt-base-rgb",baseShade1:"--ipt-base-shade1-rgb",baseShade2:"--ipt-base-shade2-rgb",baseShade3:"--ipt-base-shade3-rgb",onBase:"--ipt-on-base-rgb",onBaseAccent1:"--ipt-on-base-accent1-rgb",onBaseAccent2:"--ipt-on-base-accent2-rgb",onBaseAccent3:"--ipt-on-base-accent3-rgb",onBaseError:"--ipt-on-base-error-rgb",baseAlt:"--ipt-baseAlt-rgb",baseAltShade1:"--ipt-baseAlt-shade1-rgb",baseAltShade2:"--ipt-baseAlt-shade2-rgb",baseAltShade3:"--ipt-baseAlt-shade3-rgb",onBaseAlt:"--ipt-on-baseAlt-rgb",onBaseAltAccent1:"--ipt-on-baseAlt-accent1-rgb",onBaseAltAccent2:"--ipt-on-baseAlt-accent2-rgb",onBaseAltAccent3:"--ipt-on-baseAlt-accent3-rgb",onBaseAltError:"--ipt-on-baseAlt-error-rgb",accent1:"--ipt-accent1-rgb",onAccent1:"--ipt-on-accent1-rgb",accent2:"--ipt-accent2-rgb",onAccent2:"--ipt-on-accent2-rgb"},apply_PLAID_styles:function(t){var e=this._transform_PLAID_style_input(t),n=this._construct_PLAID_CSS_string(e);n&&n.length&&w.add_css_style(n,this.style_id,"a")},_transform_PLAID_style_input:function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&"undefined"!==t[n]&&"null"!==t[n]){var i=this.PLAID_CSS_MAP[n];if(i){var r=t[n];e[i]=r.startsWith("#")&&this.hex_to_RGB(r)||r}}return e},_construct_PLAID_CSS_string:function(t){if(Object.keys(t).length<1)return null;var e=["\n",":root {"];for(var n in t){var i="   "+n+": "+t[n]+";";e.push(i)}return e.push("}"),3<e.length?e.join("\n"):null},apply_PLAID_theme:(M=!1,function(){if(!M)switch(this.theme){case"dark":M=!0;var t={base:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAlt),baseShade1:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAltShade1),baseShade2:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAltShade2),onBase:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAlt),onBaseAccent2:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAltAccent2)};this.apply_PLAID_styles(t);break;case"light":M=!0;var e={baseAltShade2:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseShade2),onBaseAltAccent2:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAccent2)};this.apply_PLAID_styles(e);break;default:return}}),apply_fast:function(t,e){var n,i,r,o,a,s=this.styles[t.treatment],u=[];for(n in s)if(s.hasOwnProperty(n)){i=s[n];for(var l=0;l<i.length;l++)r=i[l],(a=this.get_values_for_setting(r,t,e))&&(o=this.build_rule(r.selector,n,a,r.important),u.push(o))}w.add_css_style(u.join("\n"),this.style_id,"o"),this.apply_PLAID_theme()},get_values_for_setting:function(t,e,n){var i=n?null:t.default;return t.fixed?i=t.fixed:t.name in e&&(i=e[t.name]),"string"==typeof i&&(i=[i]),i},build_rule:function(t,e,n,i){for(var r="",o=0;o<n.length;o++)r+="  "+e+" : "+n[o]+(i?" !important":"")+";\n";return t+"{\n"+r+"}\n"},apply:function(t){var e=this;O.getElementById("root").style.boxShadow="none",N.generic.on_document_ready(function(){e.settings=t,"styles"in e?e._apply():N.generic.load_script_notify(e.data_url,function(){e._apply()})})},_apply:function(){var t,e=this.settings.ARGS.split(/&/),i={},n=this,r="/* ARGS:"+this.settings.ARGS+" */\n";jQuery.each(e,function(t,e){var n=/^(.*)=(.*)$/.exec(e);3===n.length&&(i[n[1]]=unescape(n[2].replace(/\+/g," ")))}),t=this.invert_styles(i.treatment),jQuery.each(t,function(t,e){e.fixed?r+=n.format_css(e,e.fixed):(i[t]||e.default)&&(r+=n.format_css(e,i[t]))});try{jQuery("style#"+this.style_id).remove(),jQuery("head").append(jQuery('<style type="text/css">').attr("id",this.style_id).html(r))}catch(t){w.add_css_style(r,this.style_id,"o")}},invert_styles:function(t){var r=["default","important","fixed"],o={};return jQuery.each(this.styles[t],function(e,t){jQuery.each(t,function(t,n){var i=o[n.name]={style:e,selector:n.selector};jQuery.each(r,function(t,e){n[e]&&(i[e]=n[e])})})}),o},format_css:function(t,e){return t.selector+" { "+t.style+" : "+(e||t.default)+(t.important?" !important;":";")+"}\n"},hex_to_RGB:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,i){return e+e+n+n+i+i});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?this.to_hex(e[1])+","+this.to_hex(e[2])+","+this.to_hex(e[3]):null},to_hex:function(t){return parseInt(t,16)},to_CSS_var_string:function(t){return"var("+t+")"}},css:{inject_css:function(n,i){N.generic.on_document_ready(function(){var t=n.getElementById(i),e=O.head;w.insert_inside(t,e)})}}};var B=function(t,e){return e?'<param name="'+t+'" value="'+e+'">':""},j=function(t,e){return e?" "+t+'="'+e+'" ':""};N.flashAdUtils={makeFlashAd:function(t){var e,n,i,r=t.id,o=t.src,a=t.width,s=t.height,u=t.bgcolor,l=t.wmode||"opaque",c=t.salign,d=t.scale,h=t.extraParams,f=t.extraTAGs,p=t.minVersion,m=escape(t.clickThru),g=t.clickTAGs,v=function(t){return null!==t&&t!==D&&(t+"").length},_=function(t){return isFinite(parseInt(t,10))},y="";if(v(r)&&v(o)&&_(a)&&_(s)){if(flashAdUtils.canPlayFlash(p)||consoleLog("makeFlashAd: Current flash version too low","flashAdUtils"),g)for(e=0;e<g.length;e++)g[e]&&(y=y+"&clickTAG"+(e+1)+"="+escape(g[e]));if(f)for(n in f)y=y+"&"+escape(n)+"="+escape(f[n]);y+="&ord="+N.top.ad_utils.ord,O.getElementById("navbar")?O.getElementById("megaMenu")?y+="&navbar=mega":y+="&navbar=legacy":y+="&navbar=null";var b="",w="";try{var A={width:1,height:1,src:1,bgcolor:1,wmode:1,salign:1,scale:1,flashvars:1};for(i in h)A[i]||(b+=B(i,h[i]),w+=j(i,h[i]))}catch(t){}var E=B("bgcolor",u),T=j("bgcolor",u),S=B("wmode",l),C=j("wmode",l),x=B("scale",d),I=j("scale",d);return'<object  classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  width="'+a+'"  height="'+s+'"  id="swf_'+r+'"><param name="movie" value="'+o+'"><param name="flashvars" value="env=WEB&clickTAG='+m+"&"+y+'"><param name="play" value="true"><param name="quality" value="high"><param name="allowScriptAccess" value="always">'+x+B("salign",c)+E+S+b+'<div style="margin-left:0.1px"><embed src="'+o+'"  flashvars="env=WEB&clickTAG='+m+"&"+y+'"  quality="high"  play="true"  width="'+a+'"  height="'+s+'"  name="swf_'+r+'"  allowScriptAccess="always"  type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" '+I+j("salign",c)+T+C+w+"></embed></div></object>"}consoleLog("makeFlashAd: Missing required params","flashAdUtils")},canPlayFlash:function(t){var e=!1,n=parseInt(t,10);if(t=!t||n<9?9:n,(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0)&&navigator.plugins["Shockwave Flash"]){var i,r,o=navigator.plugins["Shockwave Flash"].description.split(" ");for(r=0;r<o.length;++r)isNaN(parseInt(o[r],10))||(i=parseInt(o[r],10));e=t<=i}else if(navigator.userAgent&&0<=navigator.userAgent.indexOf("MSIE")&&-1!==navigator.appVersion.indexOf("Win"))try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t);a.AllowScriptAccess="always",e=a.GetVariable("$version").match(/([0-9]+)/)[1]>=t}catch(t){}return e}},E.store(),w.on_document_ready(function(t){t(N).on("load",function(){E.store()})}),w.on_document_ready(function(){p(N,"unload",function(){w.unload_plugins()})}),t&&w.on_document_ready(function(){w.monitoring.record_metric("ads_js_response",t)})}(window,document)},{1:1,11:11,20:20,24:24,25:25,27:27,29:29,32:32,35:35,37:37,4:4,41:41,42:42,43:43,46:46,47:47,5:5,55:55}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initAndBindResponsiveBackupLogic=void 0;var i=t(48),r=t(30);n.initAndBindResponsiveBackupLogic=function(t){return void 0!==t.tarnhelm_backup?((0,i.handleTarnhelmBackupImg)(t),!0):void 0!==t.backup_static&&((0,r.handlePremiumStaticResponsiveBackup)(t),!0)}},{30:30,48:48}],12:[function(t,e,n){"use strict";function a(t,e,n,i,r){if(t&&t()){var o=n();o?r(o):i()}else e()}Object.defineProperty(n,"__esModule",{value:!0}),n.bindBackupImage=function(t,e,n,i,r,o){a(e,n,i,r,o),t.parent.onresize=function(){a(e,n,i,r,o)}}},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shouldShowBackupSupplierResponsive=n.shouldShowBackupMobileWeb=n.shouldShowBackupDesktop=n.isResponsiveBackupSlot=void 0;var i,r=t(29),o=(i=r)&&i.__esModule?i:{default:i},a=t(43),s=t(46);var u=1024,l=767;function c(t){return(0,a.isDesktop)()&&(0,o.default)()&&(0,s.isInline40)(t)}function d(t){return(0,a.isMobile)()&&(0,o.default)()&&(0,s.isInline40)(t)}function h(t){return c(t)&&(0,a.getBrowserWidth)(t)<u}function f(t){return d(t)&&(0,a.getBrowserWidth)(t)>l}n.isResponsiveBackupSlot=function(t){return c(t)||d(t)},n.shouldShowBackupDesktop=h,n.shouldShowBackupMobileWeb=f,n.shouldShowBackupSupplierResponsive=function(t){return function(){return(0,a.isInternetExplorer)()||(0,a.isIpad)()||h(t)||f(t)}}},{29:29,43:43,46:46}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))}},{}],15:[function(t,e,n){"use strict";var i,r,o,a,s,u,l,c,d,h,f,p;i=window,r=document,i.imdbads=i.imdbads||{},i.imdbads.frequencyCapping=(o=function(){try{return a&&!s?"undefined"!=typeof mraidbridge&&void 0!==mraidbridge.localstorage?mraidbridge.localstorage:void 0:(a&&s&&null!==i.localStorage&&(i.localStorage.setItem("foo","foo"),i.localStorage.removeItem("foo")),i.localStorage)}catch(t){return}},a=/iphone|ipad|ipod/i.test(i.navigator.userAgent.toLowerCase()),s=null!==r.domain.match(/imdb/g),u="IMDbAdvertisingFrequencyCapping",l=function(){var t;if(o()&&i.JSON){if(t=o().getItem(u))try{return JSON.parse(t)}catch(t){o().removeItem(u),console.log("Could not deserialize persistence variable")}return{}}return null},c=function(t){o()&&i.JSON&&o().setItem(u,JSON.stringify(t))},d=function(){var t,e=l();if(e){for(t in e)h(e[t])&&delete e[t];c(e)}},h=function(t){return!(t&&t.l&&t.l>p)},f=(new Date).getTime(),p=f-864e5,i.generic&&i.generic.on_document_ready?i.generic.on_document_ready(d):"complete"==r.readyState?d():i.addEventListener("load",d,!1),{should_autoplay:function(t){var e=l();return!!e&&h(e[t])},log_autoplay:function(t){var e=l();e?(e[t]={l:f},c(e)):(console.log("Autoplay logged, but localStorage is not available!"),i.generic&&i.generic.monitoring&&i.generic.monitoring.record_event&&i.generic.monitoring.record_event("flash_persistence_failure",!0))},clear_autoplay:function(){c({})}})},{}],16:[function(t,e,n){"use strict";t(23),t(21),t(18),t(50),t(15),t(10),t(22),t(19),t(9),t(6),t(8),t(7),t(2),t(3),t(31),t(44),t(57)},{10:10,15:15,18:18,19:19,2:2,21:21,22:22,23:23,3:3,31:31,44:44,50:50,57:57,6:6,7:7,8:8,9:9}],17:[function(t,e,n){"use strict";t(16),t(51)},{16:16,51:51}],18:[function(t,e,n){"use strict";window.consoleLog=function(t,e,n){var i,r=window.consoleLog,o=document.location.hash.match("debug=1"),a="error"===n||o;e?(r[e]=r[e]||[]).push(t):e="global",i=e+" : "+t,(r.global=r.global||[]).push(i);try{if(!a)return;window.console&&(window.console[n]?window.console[n](i):window.console.log&&window.console.log(i))}catch(t){}},window.consoleWarn=function(t,e){consoleLog(t,e,"warn")},window.consoleError=function(t,e){consoleLog(t,e,"error")}},{}],19:[function(t,e,n){"use strict";var i;i=window,document,(i.custom=i.custom||{}).strings={chained_replace:function(t){var e,n=this;for(e=0;e<t.length;e++){var i=t[e];n=n.replace(i[0],i[1])}return n}}},{}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n=new Date((new Date).toDateString()).valueOf(),i=[],r=0,o=0,a=0,s=void 0,u=0;u<e.length;u++)try{var l=e[u].startDate,c=e[u].endDate,d=null==l||""===l,h=null==c||""===c;if(d&&h){t?s=u:i.push(u);continue}r=d?0:new Date(l.replace(/-/g,"/")).valueOf(),o=h?n+1:new Date(c.replace(/-/g,"/")).valueOf(),t&&(0===r||r<=n&&a<r)&&(a=r,s=u),!t&&r<=n&&n<o&&i.push(u)}catch(t){"consoleLog"in window&&window.consoleLog("Date checking failed for "+e[u].toString()+" with error: "+t.toString(),"ppb","error"),window.ueLogError&&window.ueLogError(t)}return t?s:i}},{}],21:[function(t,e,n){"use strict";var i;(i=window.generic).install(i,{document_readys:[],document_is_ready:function(){var t,e=i.document_readys;if((i.document_readys=null)!==e)for(t=0;t<e.length;t++)try{e[t](jQuery)}catch(t){}i.should_jQuery_noConflict&&jQuery.noConflict(!1)},on_document_ready:function(t){i.has_document_readied()?t(jQuery):i.document_readys.push(t)},has_document_readied:function(){return null===i.document_readys},vanilla_on_document_ready:function(e){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e():window.addEventListener("DOMContentLoaded",function(t){e()})}})},{}],22:[function(t,e,n){"use strict";var i,r,c,d,o=t(5),h=(i=o)&&i.__esModule?i:{default:i};r=window,c=document,(d=r.custom=r.custom||{}).floater={close:function(t){var e=c.getElementById(t);e.style.width="0px",e.style.height="0px"},launch:function(t,e,n,i,r,o,a,s){var u=c.createElement("iframe"),l="string"==typeof n?c.getElementById(n):n;"none"!==e&&setTimeout(function(){d.floater.close(o)},1e3*e),generic.extend(u,{id:o,name:o,className:s,width:t[0]+"px",height:t[1]+"px",frameBorder:"0",scrolling:"no",allowTransparency:"true",style:{marginLeft:r[0]+"px",marginTop:r[1]+"px",zIndex:r[2],position:"absolute"}}),i(u,l),h.default.isFirefox()?u.onload=function(){var t=h.default.frameDoc(u);h.default.appendContentToIframeDoc(t,a)}:setTimeout(function(){var t=h.default.frameDoc(u);h.default.appendContentToIframeDoc(t,a)},0)},set:function(t,e,n,i,r,o,a){var s="floater_"+Math.ceil(9999999*Math.random()),u="floater_"+a;return d.floater.launch(e,n,i,r,o,s,t,u),s}}},{5:5}],23:[function(t,e,n){"use strict";window.generic=window.generic||{},window.generic.install=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}},{}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.globalizeCss=void 0;var l=t(46);n.globalizeCss=function(t){if(t){var e=t.top.document.body,n=t.document.getElementsByClassName("imdb-adtech-global-css"),i=(0,l.getSlotName)(t),r=i+"-imdb-adtech-global-css",o=e.getElementsByClassName(r);if(e){for(var a=0;a<o.length;a++)e.removeChild(o[a]);for(var s=0;s<n.length;s++){var u=n[s];u.classList.add(r),e.prepend(u)}}}}},{46:46}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeAtfSlotsCall=function(t,e,n,i){if("undefined"!=typeof window&&(window.AdSlots={},window.AdSlotsLoading=!0,t&&!window.hasAdAJAXCallFired)){var r=window.top.ad_utils.constructClientSideUrl(e,n,i);if(!window.top.ad_utils.getAdsForSlotsUrl||window.top.ad_utils.getAdsForSlotsUrl!==r){window.hasAdAJAXCallFired=!0,"function"==typeof window.uet&&window.uet("bb","AdAJAXRequest",{wb:1});try{var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===this.readyState&&200===this.status){window.ue&&"function"==typeof window.ue.count&&window.ue.count("AdAJAXRequest",0);var t=JSON.parse(o.responseText);window.top.ad_utils&&window.top.ad_utils.responsiveAdAPI&&window.top.ad_utils.responsiveAdAPI.handleAdServiceResponse(t),window.AdSlots=t?t.slotsMap:{},window.AdSlotsLoading=!1,window.top.ad_utils.getAdsForSlotsUrl=r}"function"==typeof window.uex&&window.uex("ld","AdAJAXRequest",{wb:1})},o.onerror=function(t){l(t),window.mediaOrchestrator&&Object.keys(i).forEach(function(t){window.mediaOrchestrator.publish(u.NO_AD_TO_LOAD_EVENT_NAME,{slotName:t,timestamp:Date.now(),type:"",dispatcher:"ajax-request"})})},o.open("GET",r,!0);var a=new RegExp("^https?://next.[^.]+.desktop.imdb.com"),s=new RegExp("^https://www.dev.imdb.com");(a.test(r)||s.test(r))&&(o.withCredentials=!0),o.send()}catch(t){l(t)}}window.hasAdAJAXCallFired=!1}};var u=t(33);function l(t){window.ue&&"function"==typeof window.ue.count&&window.ue.count("AdAJAXRequest",1),window.ueLogError&&window.ueLogError(t)}},{33:33}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.responsiveImageGenerator=n.getSize=n.getImage=void 0;var o=t(43);function p(t,e){return!(0,o.isIpad)()&&!(0,o.isInternetExplorer)()||t?t:e}function m(t,e,n,i){if(((0,o.isIpad)()||(0,o.isInternetExplorer)())&&!t)return{width:e,height:n};var r=i.split("x");return r.length<2?{width:0,height:0}:{width:r[0],height:r[1]}}n.getImage=p,n.getSize=m,n.responsiveImageGenerator=function(s,u,l,c,d,h,f){return function(){var t=p(s,u);if(void 0===t||!t)return t;var e,n,i,r,o,a=m(s,d,h,f);return e=l,n=c,i=t,r=a.width,o=a.height,'<a href="'+e+'" target="'+n+'"><img src="'+i+'" width="'+r+'" height="'+o+'" border=0 /></a>'}}},{43:43}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=t.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}},{}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return!!t&&-1<t.toLowerCase().indexOf("_refresh")}},{}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return null!==window.top.document.getElementById("IMDbHomepageSiteReactViews")||null!==window.top.document.getElementById("__next")}},{}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.handlePremiumStaticResponsiveBackup=void 0;var d=t(13),h=t(1),f=t(12),p=t(42),m=t(26),g=t(43);n.handlePremiumStaticResponsiveBackup=function(e){var t=e.backup_static||{},n=t.adLinkId||"static-ad-link",i=t.backupLinkId||"static-backup-link",r=t.additionalHtml||"static-extra-html",o=t.responsiveImage||"",a=t.size||"0x0",s=t.renderWidth||0,u=t.renderHeight||0,l=t.adState="",c=(0,d.shouldShowBackupSupplierResponsive)(e);(0,f.bindBackupImage)(e,c,function(){(0,d.isResponsiveBackupSlot)(e)&&"ad"!==l&&((0,h.uncollapseAd)(e.frameElement),(0,h.collapseElement)(e,i),(0,h.uncollapseElement)(e,n),(0,h.uncollapseElement)(e,r),(0,g.isMobile)()?((0,p.removeWrapperSize)(e),(0,p.mobileWebCreativeResizing)(e,s,u)):(0,p.scaleWrapperToWidth)(e,s,s,u),l="ad")},function(){return o},function(){"collapsed"!==l&&((0,h.collapseAd)(e.frameElement),l="collapsed")},function(){if("backup"!==l){(0,h.uncollapseAd)(e.frameElement);var t=(0,m.getSize)(o,0,0,a);(0,p.scaleWrapperToWidth)(e,t.width,t.width,t.height),(0,h.uncollapseElement)(e,i),(0,h.collapseElement)(e,n),(0,h.collapseElement)(e,r),l="backup"}})}},{1:1,12:12,13:13,26:26,42:42,43:43}],31:[function(t,e,n){"use strict";var a,s;a=window,s=document,a.custom.parallax={init:function(o){a.generic.on_document_ready(function(){var t=o.getElementById("parallax"),e=s.getElementById("root");generic.insert_before(t,e);var n=o.getElementById("skrollr_core_src").innerHTML;s.getElementById("skrollr_core_dest").innerHTML=n,a.skrollr&&a.skrollr.init({mobileCheck:function(){return!1},smoothScrolling:!0});for(var i=1;i<=10;i++){var r=s.getElementById("parallax_layer"+i);r&&(custom.parallax.seen["parallax_layer"+i]={obj:r,seen:!1})}s.addEventListener("scroll",custom.parallax.scrollListener)})},seen:{},interactionTrackers:{},scrollListener:function(){for(var t,e=1;e<=10;e++)(t=custom.parallax.seen["parallax_layer"+e])&&!t.seen&&t.obj.getBoundingClientRect().top-s.documentElement.clientHeight<-100&&((new Image).src=custom.parallax.interactionTrackers["parallax_layer"+e],t.seen=!0)}}},{}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){i.addEventListener("click",function(){var t=i.getAttribute("data-ct-count");if(t&&0<t)for(var e=0;e<t;e++){var n=i.getAttribute("data-ct-"+e);if(n)(new Image).src=n}})}},{}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.AD_LOADED_EVENT_NAME="adLoaded",n.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE="1P-ad-autoplay-video-maybe-present",n.BLANK="blank",n.HOME_PAGE_TYPE="home",n.INLINE20_PAGE_BACKGROUND_CLASS="inline20-page-background",n.LARGE_BREAKPOINT=1024,n.LOADSTART="loadstart",n.MEDIA_PLAYBACK_EVENT_NAME="mediaPlaybackEvent",n.PAGE_WRAPPER_CLASSNAME="ipc-page-wrapper",n.PRIMARY_ADS_LOADED_EVENT_NAME="primaryAdsLoaded",n.NO_AD_TO_LOAD_EVENT_NAME="noAdToLoad",n.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE="no-autoplay-video-ad-detected",n.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME="noPrimaryAdsToLoad",n.PLAY="play",n.PLAID_STYLE_OVERRIDES_ID="plaid-style-overrides-id",n.THIRD_PARTY_AD_DETECTED_EVENT_TYPE="3P-ad-no-autoplay-video-detected",n.TITLE_PAGE_TYPE="title",n.NAME_PAGE_TYPE="name",n.WRAP_BACKGROUND_DIV_TAG_ID="ipc-wrap-background-id",n.WRAP_BACKGROUND_STYLE_TAG_ID="wrap-background-styles"},{}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getAdVideoAutoplayBufferInterval=function(){return this.adVideoAutoplayBufferInterval},n.getHasPremiumAd=function(){return this.hasPremiumAd},n.getLastAAXResponse=function(){return this.lastAAXResponse},n.getLastAdResponse=function(){return this.lastAdResponse},n.getPlaidOverrides=function(){return this.plaidOverrides},n.getPreviousWindowWidth=function(){return this.previousWindowWidth},n.getResponsiveResizingDisabledSlotsMap=function(){return this.responsiveResizingDisabledSlotsMap},n.getSlotResponsiveWrapperId=function(t){return t+"_responsive_wrapper"}},{}],35:[function(t,e,n){"use strict";function i(t){return Promise.resolve(t)}function r(t){return Promise.reject(t)}Object.defineProperty(n,"__esModule",{value:!0});var o=n.INTRA_AD_VIDEO_PLAYER_BUFFER=300,a="setMinimalVideoEnded";n.mediaOrchestratorBridge={isMediaOrchestratorBridge:!0,timers:{},getCurrentlyPlayingAsset:function(){return window.MediaOrchestrator_V1?i(window.MediaOrchestrator_V1.getCurrentlyPlayingAsset()):r(null)},requestPlayback:function(t){return window.MediaOrchestrator_V1?i(window.MediaOrchestrator_V1.requestPlayback(t)):r(!1)},setMediaPlay:function(t,e){return e&&e.isReely&&window.ad_utils.mediaOrchestratorBridge.timers[a]&&clearTimeout(window.ad_utils.mediaOrchestratorBridge.timers[a]),window.MediaOrchestrator_V1?i(window.MediaOrchestrator_V1.setMediaPlay(t)):r(!1)},setMediaPaused:function(t){return window.MediaOrchestrator_V1?i(window.MediaOrchestrator_V1.setMediaPaused(t)):r(!1)},setMediaEnded:function(t,e){function n(){return window.MediaOrchestrator_V1?i(window.MediaOrchestrator_V1.setMediaEnded(t)):r(!1)}return e&&e.isMinimalVideo?(window.ad_utils.mediaOrchestratorBridge.timers[a]=setTimeout(n,o),Promise.resolve(!0)):n()},subscribe:function(t){if(t.onMediaPermissionsChanged){var e=t.name,n=t.onMediaPermissionsChanged;return window.MediaOrchestrator_V1&&window.MediaOrchestrator_V1.subscribeToNotifications(e,n)}return!1},updateAssetFrameLocation:function(t,e){return window.MediaOrchestrator_V1?i(window.MediaOrchestrator_V1.updateAssetFrameLocation(t,e)):r(!1)}}},{}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mediaOrchestrator=void 0,n.initializeMediaOrchestrator=function(){"undefined"!=typeof window&&(window.mediaOrchestrator=a);e=[],n=!1,i=!1,window.mediaOrchestrator.subscribe(c.AD_LOADED_EVENT_NAME,function(t){e.push(t.slotName),o.every(function(t){return e.includes(t)})&&!n&&(n=!0,window.mediaOrchestrator.publish(c.PRIMARY_ADS_LOADED_EVENT_NAME,{type:"",dispatcher:"media-orchestrator",slotName:"",timestamp:Date.now()}))}),window.mediaOrchestrator.subscribe(c.NO_AD_TO_LOAD_EVENT_NAME,function(t){o.includes(t.slotName)&&!i&&(i=!0,window.mediaOrchestrator.publish(c.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,{type:"",dispatcher:"media-orchestrator",slotName:"",timestamp:Date.now()}))});var e,n,i};var i,c=t(33),r=t(45),d=(i=r)&&i.__esModule?i:{default:i};var o=[d.default.INLINE20,d.default.INLINE40],a=n.mediaOrchestrator=function(){var r={},o={},s={},a=r.hasOwnProperty,u=o.hasOwnProperty;function l(t,e){if(t!==c.MEDIA_PLAYBACK_EVENT_NAME||e.slotName!==d.default.INLINE20&&e.slotName!==d.default.TOP_AD||e.type!==c.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE)t!==c.MEDIA_PLAYBACK_EVENT_NAME||e.slotName!==d.default.INLINE20&&e.slotName!==d.default.TOP_AD||e.type!==c.LOADSTART&&e.type!==c.PLAY||(i=e.slotName,s[i]&&clearTimeout(s[i]));else{var n=function(t){window.mediaOrchestrator.publish(c.MEDIA_PLAYBACK_EVENT_NAME,{type:c.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,dispatcher:"media-orchestrator",slotName:t,timestamp:Date.now()})}.bind(null,e.slotName);r=e.slotName,o=n,a=2e3,s[r]=setTimeout(o,a)}var i,r,o,a}return{getEventsLogForEvent:function(t){return void 0!==o[t]?o[t].slice():[]},subscribe:function(t,e){a.call(r,t)||(r[t]=[]);var n=r[t].push(e)-1;return{remove:function(){delete r[t][n]}}},publish:function(t,e){var n,i;a.call(r,t)||(r[t]=[]),n=t,i=e,u.call(o,n)||(o[n]=[]),o[n].push(i),l(t,e),r[t].forEach(function(t){t(void 0!==e?e:{})})}}}()},{33:33,45:45}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.responsiveAdAPI=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};n.initializeResponsiveAdApi=function(){(0,s.initializeVideoEventsMessageListeners)(),(0,u.initializeMediaOrchestrator)()};var r,o=t(45),a=(r=o)&&r.__esModule?r:{default:r},s=t(40),u=t(36),l=f(t(34)),c=f(t(38)),d=t(33),h=t(39);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}n.responsiveAdAPI=i({adVideoAutoplayBufferInterval:1e3,hasPremiumAd:null,lastAAXResponse:null,lastAdResponse:null,plaidOverrides:null,previousWindowWidth:0,responsiveResizingDisabledSlotsMap:{}},l,c,{checkShouldMakeAdSticky:h.checkShouldMakeAdSticky,clearData:function(){this.hasPremiumAd=null,this.lastAdResponse=null,this.plaidOverrides=null,this.previousWindowWidth=0,this.responsiveResizingDisabledSlotsMap={}},clearPageStyles:function(){p(d.PLAID_STYLE_OVERRIDES_ID)},clearWrapBackgroundStyles:function(){p(d.WRAP_BACKGROUND_STYLE_TAG_ID)},collapseAd:function(t){if("undefined"!=typeof document){var e=document.getElementById(this.getSlotResponsiveWrapperId(t));e&&(e.style.display="none")}},dangerouslySetHTML:function(t,e,n){if("undefined"!=typeof document){var i=e||document.getElementById(n);if(null!==(i=function(t,e){var n=t;if(e===a.default.INLINE40+"_responsive_wrapper"){var i=document.getElementsByClassName(a.default.INLINE40_SIDEBAR)[0],r=document.getElementsByClassName(a.default.INLINE40_MAIN)[0],o=window.innerWidth;o<d.LARGE_BREAKPOINT&&r?n=r:i&&(n=i)}return n}(i,n))){var r=document.createRange();r.selectNodeContents(i),r.deleteContents(),i.appendChild(r.createContextualFragment(t))}}},events:{queues:{adIframeLoad:{},adSlotMount:{},adSlotUnmount:{}},adIframeLoad:function(t){var e;this.queues.adIframeLoad[t]=!0,e=t,window.mediaOrchestrator&&window.mediaOrchestrator.publish(d.AD_LOADED_EVENT_NAME,{type:"",dispatcher:"responsive-ad-api",slotName:e,timestamp:Date.now()})},adSlotMount:function(t){"function"==typeof window.uet&&window.uet("bb","adSlotMount",{wb:1}),"function"==typeof this.queues.adSlotMount[t]?this.queues.adSlotMount[t]():this.queues.adSlotMount[t]=!0,"function"==typeof window.uex&&window.uex("ld","adSlotMount",{wb:1})},adSlotUnmount:function(t){this.queues.adSlotMount[t]=!1},video:{}},getPageType:function(){var t=document.head?document.head.querySelector("meta[property$='pageType']"):null;return t?t.content:""},getSubPageType:function(){var t=document.head?document.head.querySelector("meta[property$='subpageType'], meta[property$='subPageType']"):null;return t?t.content:""},handleAAXResponse:function(t){this.setLastAAXResponse(t)},handleAdServiceResponse:function(t,e){var n=t&&t.slotsMap?t.slotsMap:t;if(this.setLastAdResponse(t),n)for(var i in n[a.default.INLINE20]&&this.clearWrapBackgroundStyles(),e&&e.shouldClearPageStyles&&this.clearPageStyles(),n)n.hasOwnProperty(i)&&this.renderAd(i,n[i])},isBlankAd:function(t){var e=t?t.creativeMetadata:null;return!!e&&(e&&e.adProductType&&e.adProductType.name===d.BLANK||0===e.creativeHeight||-1===e.creativeHeight)},queueFunc:function(t,e,n){this.events.queues[t][e]?n():this.events.queues[t][e]=n},renderAd:function(t,e){if("undefined"!=typeof document){var n=e.slotMarkup,i=this.getSlotResponsiveWrapperId(t),r=document.getElementById(i),o=function(){};r?this.setVisibility(t,e):o=this.setVisibility.bind(this,t,e);var a=n?this.dangerouslySetHTML.bind(null,n,r,i):function(){};this.queueFunc("adSlotMount",t,function(){a(),o()})}},setVisibility:function(t,e){this.isBlankAd(e)?this.collapseAd(t):this.unCollapseAd(t)},triggerCustomEvent:function(t,e){if("undefined"!=typeof window){var n=void 0;"function"==typeof CustomEvent?n=new CustomEvent(t,{detail:e}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,e),window.dispatchEvent(n)}},unCollapseAd:function(t){if("undefined"!=typeof document){var e=document.getElementById(this.getSlotResponsiveWrapperId(t));e&&"none"===e.style.display&&(e.style.display="flex")}}});function p(t){if("undefined"!=typeof document){var e=document.getElementById(t);e&&e.remove()}}},{33:33,34:34,36:36,38:38,39:39,40:40,45:45}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setAdVideoAutoplayBufferInterval=function(t){this.adVideoAutoplayBufferInterval=t},n.setHasPremiumAd=function(t){"boolean"==typeof t&&(this.hasPremiumAd=t)},n.setLastAAXResponse=function(t){this.lastAAXResponse=t},n.setLastAdResponse=function(t){t.slotsMap&&(this.lastAdResponse={slots:t.slotsMap});this.setHasPremiumAd(t.hasPremium),this.setPlaidOverrides(t.plaidOverrides),this.setResponsiveResizingDisabledSlotsMap(t)},n.setPlaidOverrides=function(t){(0,i.isEmpty)(t)||(this.plaidOverrides=t,this.triggerCustomEvent("clientSidePlaidOverride",t))},n.setPreviousWindowWidth=function(){this.previousWindowWidth=window.innerWidth},n.setResponsiveResizingDisabledSlotsMap=function(t){var e=this;t.slotsMap&&Object.keys(t.slotsMap).forEach(function(t){delete e.responsiveResizingDisabledSlotsMap[t]});var n=t.responsiveResizingDisabledSlotsMap;n&&Object.keys(n).forEach(function(t){e.responsiveResizingDisabledSlotsMap[t]=n[t]})};var i=t(52)},{52:52}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkShouldMakeAdSticky=function(t){f()&&window.ad_utils.isResponsive()&&!window.ad_utils.responsiveAdAPI.getHasPremiumAd()&&p(t.id)&&t.width.includes(u)&&t.height.includes(l)&&!h(i.default.INLINE20)&&m(i.default.INLINE20,c)},n.didAdSetRodeoWrap=x,n.didAdSetTarnhelmWrap=h,n.getRodeoWrapStyles=I,n.isStickyEnabledPageType=f,n.isStickyEnabledSlotName=p,n.makeAdSticky=m,n.parseElementDimension=g;var A=t(33),i=o(t(45)),r=o(t(28));function o(t){return t&&t.__esModule?t:{default:t}}var E="fixed-wrap",a=970,s=250,u=""+a,l=""+s,T=.3,S=1e3*T,c=3e3,d=[A.HOME_PAGE_TYPE,A.TITLE_PAGE_TYPE,A.NAME_PAGE_TYPE],C="sticky-wrap-styles";function x(){var t=I();return t&&(t.backgroundImage&&"none"!==t.backgroundImage||"#000"!==t.backgroundColor&&"#000000"!==t.backgroundColor&&"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(0, 0, 0, 0)"!==t.backgroundColor)}function h(t){var e=document.getElementById(t);if(!e)return!1;var n=g(e.style.width),i=g(e.style.height);return e.width===u&&e.height===l&&a<n&&s<i}function I(){var t=document.getElementById(A.WRAP_BACKGROUND_DIV_TAG_ID);try{return window.getComputedStyle(t)}catch(t){return{}}}function f(){var t=window.ad_utils.responsiveAdAPI.getPageType();return d.includes(t)}function p(t){return t.includes(i.default.INLINE20)&&!(0,r.default)(t)}function m(t,e){var n=document.querySelector("."+A.PAGE_WRAPPER_CLASSNAME),i=document.getElementById(t+"_responsive_wrapper"),r=i.getBoundingClientRect().top+window.scrollY,o=t+"-"+C,a=x(),s="#"+t+"_responsive_wrapper",u=window.scrollY,l=!1,c=!1,d=a?s:"."+A.INLINE20_PAGE_BACKGROUND_CLASS,h="";function f(t){return"\n            @media screen and (min-width: "+A.LARGE_BREAKPOINT+"px) {\n                ."+E+" "+d+" {\n                    position: fixed !important;\n                    height: "+i.clientHeight+"px;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    z-index: 50;\n                    transition: opacity "+T+"s ease-in;\n                    "+(t?"opacity: 1 !important;":"")+"\n                    "+h+"\n                }\n                ."+E+"."+A.PAGE_WRAPPER_CLASSNAME+" {\n                    top: "+i.clientHeight+"px;\n                }\n                /* P70615346 - Apply page wrapper styles to RVI widget (below page wrapper) */\n                ."+E+"."+A.PAGE_WRAPPER_CLASSNAME+" + section {\n                    margin-top: "+i.clientHeight+"px;\n                }\n            }\n        "}if(a||(h="background-color: rgba(0,0,0,0.5);"),window.generic.add_css_style(f(!0),o,"a"),a){var p=I(),m=p.backgroundImage,g=m&&"none"!==m?m:"",v=p.backgroundColor?p.backgroundColor:"";window.generic.add_css_style("\n            @media screen and (min-width: "+A.LARGE_BREAKPOINT+"px) {\n                ."+E+" #"+A.WRAP_BACKGROUND_DIV_TAG_ID+", ."+E+" "+s+" {\n                    background: "+g+" fixed top no-repeat "+v+" !important;\n                    background-position-y: -56px !important;\n                }\n            }\n        ",o)}function _(){u=window.scrollY,l||(window.requestAnimationFrame(function(){w(u),l=!1}),l=!0)}document.addEventListener("scroll",_);var y=document.querySelector(d);function b(){y.style.opacity=0,setTimeout(function(){y.style.opacity=1,n.classList.remove(E),c=!1},S)}function w(t){!c&&r<t?(y.style.opacity=0,setTimeout(function(){n.classList.add(E),c=!0},0)):c&&t<=r&&b()}w(u),e&&setTimeout(function(){window.generic.add_css_style(f(!1),o,"o"),b(),document.removeEventListener("scroll",_)},e)}function g(t){function e(t){var e=parseInt(t);return isNaN(e)?0:e}return"string"==typeof t?"px"===t.substr(t.length-2)?e(t.substr(0,t.length-2)):e(t):"number"==typeof t?t:e(t)}},{28:28,33:33,45:45}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initializeVideoEventsMessageListeners=function(){"undefined"!=typeof window&&window.addEventListener("message",s,!1)};var i,r=t(45),o=(i=r)&&i.__esModule?i:{default:i},a=t(33);function s(t){var e;t&&t.origin!==window.origin||(t.data&&"video-handler"===t.data.dispatcher?function(t){var e=t.slotName,n=t.type;window.top.ad_utils.responsiveAdAPI.events.video[n]||(window.top.ad_utils.responsiveAdAPI.events.video[n]={});window.top.ad_utils.responsiveAdAPI.events.video[n][e]={timestamp:t.timestamp},i=t,r=i.slotName,r!==o.default.INLINE20&&r!==o.default.TOP_AD||(window.top.ad_utils.responsiveAdAPI&&window.top.ad_utils.responsiveAdAPI.triggerCustomEvent(a.MEDIA_PLAYBACK_EVENT_NAME,i),window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish(a.MEDIA_PLAYBACK_EVENT_NAME,i));var i,r}(t.data):t.data&&"generic"===t.data.dispatcher&&(e=t.data).type===a.NO_AD_TO_LOAD_EVENT_NAME&&window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish(a.NO_AD_TO_LOAD_EVENT_NAME,e))}},{33:33,45:45}],41:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),s=t(39),u=o(t(14)),r=o(t(28));function o(t){return t&&t.__esModule?t:{default:t}}var l={TOP_AD:[{width:"728px",height:"90px"}],INJECTED_BILLBOARD:[{width:"970px",height:"250px"}],TOP_RHS:[{width:"300px",height:"250px"}]},c=["ia.media-imdb.com"],a=["BTF_RHS2","BOTTOM_AD","MEDIAVIEWER_BANNER","INLINE80"],d=["MEDIAVIEWER_BANNER"],h=["INLINE20","INLINE40","INLINE50","INLINE60","INLINE80","INLINEBOTTOM","TOP_RHS","TOP_AD"],_="ape_",y="_placement",f="data-first-party-creative-template",p=[{p:0,t:0,def:"amzn"},{p:50,t:1,def:"iab"},{p:100,t:0,def:"groupm"}],m=["openPsAdPopover","openATCModal","setPartner","sendMetrics","wrap"],g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sfSrclessIframeSizes={},this.sfAdObjs={}}return i(t,[{key:"isIMDbMobileDomain",value:function(){return!!window.MAsf}},{key:"getSafeframeIdPrefix",value:function(){return _}},{key:"getSafeframeAdObjs",value:function(){return this.sfAdObjs}},{key:"injectCode",value:function(t,e){var n=this.isIMDbMobileDomain(),i=n?"MSFClient":"SFClient",r=e+(n?"":"<script defer>setTimeout( function(){"+i+'.getDebugInfo({key: "updateAdDetails"}); },0);<\/script>')+("<script defer>setTimeout(function(){"+i+'.customMessage("sendMetrics",JSON.stringify({"slot": "'+t+'", "event": "fireload"}));},0);<\/script>');this.renderAdInSF(t,r)}},{key:"getSafeframeDiv",value:function(t){return document.getElementById(_+t+y)}},{key:"fireSfReflowMetric",value:function(t){var e=this.sfSrclessIframeSizes[t],n=e.w,i=e.h,r=window.top.ad_utils.get_slot_iframe(t),o=window.top.ad_utils.get_ad_object(r);window.top.ad_utils.fire_reflow_metric(t,o,n,i,r.width.replace(/px/g,""),r.height.replace(/px/g,""))}},{key:"getSfAdObject",value:function(t){if(this.sfAdObjs[t])return this.sfAdObjs[t];var e=null,n=window.top.ad_utils.sf_ad_details[t];if(n){var i=n.width,r=n.height;i&&(i=i.replace(/px/g,"")),r&&(r=r.replace(/px/g,"")),e={aid:n.adId,cid:n.creativeId,w:i,h:r},this.sfAdObjs[t]=e}return e}},{key:"onSfAdLoad",value:function(t){var e=""+_+t+"_iframe";window.top.ad_utils.responsiveAdAPI.events.adIframeLoad(t),(0,s.checkShouldMakeAdSticky)(document.getElementById(e));var n=this.getSfAdObject(t),i=window.top.ad_utils.get_type_of_ad(n),r=void 0;if(window.top.ad_utils&&window.top.ad_utils.ad_table){var o=window.top.ad_utils.ad_table[t];o&&(o.fired=!0,o.loaded=!0)}if(null!==n&&("blank"===n.scope||"null"===n.scope)){var a=this.sfSrclessIframeSizes[t];r="0"===a.w&&"0"===a.h?0:window.generic.monitoring.get_metric_value(t,"reflow")}window.top.ad_utils.slot_events.trigger(t,"load",{duration:r,type:i})}},{key:"updateAdDetails",value:function(t){t&&t.creativeId&&(window.top.ad_utils.sf_ad_details[t.slot]={},window.top.ad_utils.sf_ad_details[t.slot].creativeId=t.creativeId,window.top.ad_utils.sf_ad_details[t.slot].adId=t.adId,window.top.ad_utils.sf_ad_details[t.slot].width=t.width,window.top.ad_utils.sf_ad_details[t.slot].height=t.height)}},{key:"setPartner",value:function(t){var e=JSON.parse(t);e&&e.slot&&e.partner&&top&&top.generic&&top.generic.monitoring&&top.generic.monitoring.set_partner&&top.generic.monitoring.set_partner_by_slot(e.slot,e.partner)}},{key:"isThirdPartyAd",value:function(t){return t&&!t.hasAttribute(f)}},{key:"isSafeframeSlot",value:function(t,e){var n=this.isIMDbMobileDomain();return t&&-1<(n?d:a).indexOf(t.toUpperCase())||this.isConditionalSafeframeSlot(t,e)}},{key:"isConditionalSafeframeSlot",value:function(t,e){return t&&(-1<h.indexOf(t.toUpperCase())||(0,r.default)(t.toLowerCase()))&&this.isThirdPartyAd(e)}},{key:"getRawSlotName",value:function(t){var e=t;return t&&0===t.indexOf(this.getSafeframeIdPrefix())&&(e=t.slice(4,t.length-7)),e}},{key:"renderAdInSF",value:function(t,e){var n=document.getElementById(t);if(null!==n){var i=n.parentElement,r=n.getAttribute("data-original-width"),o=n.getAttribute("data-original-height");this.sfSrclessIframeSizes[t]={w:r,h:o};var a=this.createAdDetailsObject(t,n,e),s=i.getElementsByClassName("sponsored_label");0===s.length&&(s=i.getElementsByClassName("standard_sponsored_label"));var u=null;0<s.length&&(u=s[0],i.removeChild(u)),i.removeChild(n);var l=document.createElement("div"),c=_+t+y;l.setAttribute("name",c),l.setAttribute("id",c);var d=this.isIMDbMobileDomain();if(d){var h=document.createElement("div");i.parentElement.replaceChild(h,i),h.appendChild(i);var f=i.id;h.id=f,i.id="ape_"+f}var p=d?i:l;p.setAttribute("data-ad-details",JSON.stringify(a)),p.setAttribute("class","text/x-dacx-safeframe"),p.style.width=r+"px",p.style.height=o+"px",p.style.margin="0 auto",p.style.display="block";var m=document.getElementById(t.toLowerCase()+"placeholderPattern");if(m&&(l.style.position="relative",l.classList.add("rendered_ad_tweening")),i.appendChild(l),u&&(i.appendChild(u),i.style.width=r+"px",i.style.height=o+"px"),window.generic&&window.generic.monitoring){var g=window.generic.monitoring.get_partner(t);g&&"none"!==g||window.generic.monitoring.set_partner_by_slot(t,"3P")}switch(t){case"injected_billboard":i.className=(i.className?i.className+" ":"")+"billboard";break;case"top_ad":window.top.ad_utils.expand_top_banner()}if(d?window.MAsf.loadAds():window.DAsf.loadAds(),m&&(l.classList.add("ad_fadein"),l.childNodes&&0<l.childNodes.length&&l.childNodes[0].classList.add("ad_fadein")),window.csm&&window.top.ad_utils.fire_tagdeliver_metric){var v=window.csm.duration();window.top.ad_utils.fire_tagdeliver_metric(t,v)}window.ad_size_cookie&&window.ad_size_cookie.store()}}},{key:"createAdDetailsObject",value:function(t,e,n){var i={};i.slot=e.id,i.slotName=e.id,i.arid=e.id,i.htmlContentEncoded=(0,u.default)(n),i.serverSideFetchAd="true",i.loadAfter="",i.slot.toUpperCase()in l?i.allowedSizes=l[i.slot.toUpperCase()]:i.allowedSizes=[],i.allowedDomains=c,i.iframeClass=e.getAttribute("class"),i.iframeExtraStyle=e.getAttribute("style")||"";var r,o={};o.width=e.getAttribute("width")+"px",o.height=e.getAttribute("height")+"px",i.size=o,(r=e)&&(r.hasAttribute(f)||r.parentElement.hasAttribute(f))?i.viewabilityStandards=p:i.viewabilityStandards=[],i.aaxInstrPixelUrl=window.top.ad_utils.aax_instr_pixel_url[i.slot.toUpperCase()];var a=window.top.ad_utils.aax_imp_pixel_url[i.slot.toUpperCase()];return a&&(i.aaxImpPixelUrl=a),i.allowlistedCustomMessageEvents=m,i.allowlistedQueryParamKeys=[],i.adCreativeMetaData={adCreativeTemplateName:"IMDb"},i}}]),t}();n.default=new g},{14:14,28:28,39:39}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setupContainer=n.scaleWrapperToWidth=n.scaleTarnhelm=n.scaleTarnhelmAd=n.scaleIframeToWidth=n.removeWrapperSize=n.mobileWebCreativeResizing=n.resizeWrapperWithOverflowHidden=n.centerAd=void 0;var l=t(46);function i(){return"portrait"==(90===window.orientation||-90===window.orientation?"landscape":"portrait")?Math.min(window.screen.width,window.screen.height):Math.max(window.screen.width,window.screen.height)}function o(){return window.screen&&window.screen.width&&window.screen.height&&void 0!==window.orientation?i():window.innerWidth}function a(t,e,n,i){t&&(t.style.height=""+n+i,t.style.width=""+e+i,t.setAttribute("data-resizeElement",""+e+i+"|"+n+i))}function s(t,e,n,i){var r=e/n,o=Math.floor(r*i);t&&t.frameElement&&(t.frameElement.height=o,t.frameElement.width=e),t&&t.document&&t.document.ad&&(t.document.ad.h=o,t.document.ad.w=e),a(t.frameElement,e,o,"px")}function u(t,e,n,i){var r=e/n,o=Math.floor(r*i);a((0,l.getSlotWrapper)(t),e,o,"px")}function c(t,e,n){var i={actionName:"scale-ad-to-width",adName:e,data:{width:n}};setTimeout(function(){t.top.Tarnhelm&&window.top.Tarnhelm.triggerGlobalAction&&t.top.Tarnhelm.triggerGlobalAction(i)},0)}function d(t,e,n){t&&(t.style.position="relative",t.style.overflow="visible",a(t,e,n,"px"))}n.centerAd=function(t){var e=(0,l.getSlotWrapper)(t);e&&e.style&&(e.style.marginLeft="auto",e.style.marginRight="auto")},n.resizeWrapperWithOverflowHidden=function(t,e,n){var i=top.document.getElementById("wrapper");i&&(i.style.overflowX="hidden");var r=(0,l.getSlotWrapper)(t);r&&(r.style.margin="auto"),d(r,e,n)},n.mobileWebCreativeResizing=function(t,e,n){var i=(0,l.getSlotName)(t);if("top_ad"!==i.toLowerCase()&&0<=n&&0<=e){var r=n/e,o=640*r,a=100*r;if(i){var s=(0,l.getSlotWrapper)(t);s.className+=" standard_expand_ad_slot_wrapper orientation_"+s.id+"}",(0,l.getSlot)(t).className+=" standard_expand_ad_slot_iframe";var u="\n                @media only screen and (min-width : 641px) {\n                    .orientation_"+s.id+" {\n                        width: 640px;\n                        height: "+o+"px;\n                    }\n                }\n\n                @media only screen and (min-width : 640px) {\n                    .orientation_"+s.id+" {\n                        width: 100vw;\n                        height: "+a+"vw;\n                    }\n                }\n\n                .sponsored_label {\n                    padding-right: 5%;\n                }\n            ";t.top.generic.add_css_style(u,"expand-1p-ads")}}else(0,l.getSlotWrapper)(t).setAttribute("style","height: "+n+"px; display: block;"),(0,l.getSlot)(t).setAttribute("style","height: "+n+"px;")},n.removeWrapperSize=function(t){var e;(e=(0,l.getSlotWrapper)(t))&&(e.style.removeProperty("width"),e.style.removeProperty("height"))},n.scaleIframeToWidth=s,n.scaleTarnhelmAd=c,n.scaleTarnhelm=function(t,e,n,i){var r=o();s(t,r,n,i),u(t,r,n,i),c(t,e,r)},n.scaleWrapperToWidth=u,n.setupContainer=d},{46:46}],43:[function(t,e,n){"use strict";function i(t){return t&&document.location.href.startsWith("https://"+t)}Object.defineProperty(n,"__esModule",{value:!0}),n.getBrowserWidth=function(t){return t.top.document.body.clientWidth},n.isDesktop=function(){return i("www.")},n.isInternetExplorer=function(){var t,e,n=(t=window.navigator.userAgent,0<(e=t.indexOf("MSIE"))?parseInt(t.substring(e+5,t.indexOf(".",e))):t.match(/Trident\/7\./)?11:0);return 0<n&&n<=11},n.isIpad=function(){var t=navigator.userAgent.toLowerCase();return-1<t.indexOf("ipad")||-1<t.indexOf("macintosh")&&"ontouchend"in document},n.isMobile=function(){return i("m.")},n.isSubdomain=i},{}],44:[function(t,e,n){"use strict";var i,r,o;(i=window).imdbads=i.imdbads||{},i.imdbads.SlotManager=(r={},o=void 0,{registerSlot:function(t,e){r[t]=e,"rhs"===t&&(e.getClickTracker&&(i.top.getClickTracker=e.getClickTracker),e.uatu&&(o=e.uatu))},getDefaultUatu:function(){return o},getSlotData:function(t){return r[t]},getSlotClickTracker:function(t,e){return r[t]&&"function"==typeof r[t].getClickTracker?r[t].getClickTracker(e):""},getAllSlotData:function(){return r}})},{}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={INLINE20:n.INLINE20_SLOT_NAME="inline20",INLINE40:n.INLINE40_SLOT_NAME="inline40",INLINE40_MAIN:n.INLINE40_MAIN="inline40-responsive-main",INLINE40_SIDEBAR:n.INLINE40_SIDEBAR="inline40-responsive-sidebar",INLINE50:n.INLINE50_SLOT_NAME="inline50",INLINE60:n.INLINE60_SLOT_NAME="inline60",INLINE80:n.INLINE80_SLOT_NAME="inline80",INLINEBOTTOM:n.INLINEBOTTOM_SLOT_NAME="inlinebottom",INTERSTITIAL:n.INTERSTITIAL_SLOT_NAME="interstitial",MEDIAVIEWER_BANNER:n.MEDIAVIEWER_BANNER_SLOT_NAME="mediaviewer_banner",PROVIDER_PROMOTION:n.PROVIDER_PROMOTION_NAME="provider_promotion",PROMOTED_WATCH_BAR:n.PROMOTED_WATCH_BAR_NAME="promoted_watch_bar",SIS_PIXEL:n.SIS_PIXEL_SLOT_NAME="sis_pixel",TOP_AD:n.TOP_AD_SLOT_NAME="top_ad"};n.default=i},{}],46:[function(t,e,n){"use strict";function i(t){return t.frameElement&&t.frameElement.id?t.frameElement.id:"unknown"}function r(t){return i(t)+"_wrapper"}function o(t,e){return t.top.document.getElementById(e)}function a(t,e){return i(t)===e}Object.defineProperty(n,"__esModule",{value:!0}),n.getSlot=function(t){return o(t,i(t))},n.getSlotName=i,n.getSlotWrapper=function(t){return o(t,r(t))},n.getSlotWrapperName=r,n.isSlot=a,n.isInline40=function(t){return a(t,"inline40")}},{}],47:[function(t,e,n){"use strict";function p(t){if(t)if("IMG"===t.tagName||"SPAN"===t.tagName||"P"===t.tagName||"VIDEO"===t.tagName||"DIV"===t.tagName&&0===t.childElementCount)t.classList.add("mrc-btr-creative");else{var e=!0,n=!1,i=void 0;try{for(var r,o=t.children[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){p(r.value)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}Object.defineProperty(n,"__esModule",{value:!0});n.tarnhelmAdUtils={markTarnhelmAdForMRC:function(t,e){!function t(e,n){if(e){var i=e.actions;if(i&&i.click&&0<i.click.length){var r=!0,o=!1,a=void 0;try{for(var s,u=i.click[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)if("open-default-link"===s.value.actionName)return void p(n.querySelector("[name="+e.name+"]"))}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}if(e.children){var l=!0,c=!1,d=void 0;try{for(var h,f=e.children[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)t(h.value,n)}catch(t){c=!0,d=t}finally{try{!l&&f.return&&f.return()}finally{if(c)throw d}}}}}(t,e)}}},{}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.handleTarnhelmBackupImg=void 0;var y=t(13),b=t(49),w=t(26),A=t(1),E=t(12);n.handleTarnhelmBackupImg=function(t){var e=t.tarnhelm_backup||{},n=e.appData||{},i=e.adName||void 0,r=e.trackingConsumer||void 0,o=e.pageBind||!1,a=e.scaleToFull||!1,s=e.clickThrough||"",u=e.target||"_blank",l=e.responsiveImage||"",c=e.legacyImage||"",d=e.renderWidth||0,h=e.renderHeight||0,f=e.size||"0x0",p=e.resizeWrapperWithOverflowHidden||!1,m=(0,y.shouldShowBackupSupplierResponsive)(t),g=(0,b.showTarnhelmAdCallback)(t,i,n,r,o,a,d,h,l,f,p),v=(0,w.responsiveImageGenerator)(l,c,s,u,d,h,f),_=(0,b.showBackupImageTarnhelmResponsiveCallback)(t,l,c,d,h,f);(0,E.bindBackupImage)(t,m,g,v,function(){"collapsed"!==t.tarnhelm_backup.adState&&((0,A.collapseAd)(t.frameElement),t.tarnhelm_backup.adState="collapsed")},_)}},{1:1,12:12,13:13,26:26,49:49}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.showBackupImageTarnhelmResponsiveCallback=n.showTarnhelmAdCallback=n.showBackupImageTarnhelmCallback=n.getAppNode=void 0;var i,d=t(42),h=t(1),s=t(26),r=t(29),f=(i=r)&&i.__esModule?i:{default:i};function p(t){return t.document.querySelector(".app")}function u(t,e){p(t).innerHTML=e}n.getAppNode=p,n.showBackupImageTarnhelmCallback=u,n.showTarnhelmAdCallback=function(t,e,n,i,r,o,a,s,u,l,c){return function(){t&&t.tarnhelm_backup&&"ad"!==t.tarnhelm_backup.adState&&((0,h.uncollapseAd)(t.frameElement),o?((0,d.scaleTarnhelm)(t,e,a,s),(0,f.default)()&&setTimeout(function(){(0,d.scaleTarnhelm)(t,e,a,s)},1)):c?(0,d.resizeWrapperWithOverflowHidden)(t,a,s):(0,d.scaleWrapperToWidth)(t,a,a,s),t.top&&t.top.Tarnhelm&&(t.top.Tarnhelm.initAdInstance(p(t),t.frameElement,n,i),r&&!t.top.Tarnhelm.pageLoadBound&&(t.top.addEventListener("load",function(){parent.Tarnhelm.triggerGlobalAction({actionName:"trigger-action-collection",collectionName:"pageLoad"})}),t.top.Tarnhelm.pageLoadBound=!0)),t.tarnhelm_backup.adState="ad")}},n.showBackupImageTarnhelmResponsiveCallback=function(n,i,t,r,o,a){return function(t){if(n&&n.tarnhelm_backup&&"backup"!==n.tarnhelm_backup.adState){u(n,t);var e=(0,s.getSize)(i,r,o,a);(0,d.scaleIframeToWidth)(n,e.width,e.width,e.height),(0,d.scaleWrapperToWidth)(n,e.width,e.width,e.height),(0,d.centerAd)(n),n.tarnhelm_backup.adState="backup"}}}},{1:1,26:26,29:29,42:42}],50:[function(t,e,n){"use strict";document.getElementsByTagName("html")[0].className+=" scriptsOn"},{}],51:[function(d,t,e){!function o(a,s,u){function l(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof d&&d;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};a[e][0].call(r.exports,function(t){return l(a[e][1][t]||t)},r,r.exports,o,a,s,u)}return s[e].exports}for(var c="function"==typeof d&&d,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,n){e.exports="html{box-sizing:border-box}:after,:before,html *{box-sizing:inherit}body{margin:0}.ad,.app{position:relative;display:block;width:100%;height:100%}.ad{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ad *,.ad :after,.ad :before{-webkit-user-select:inherit;-moz-user-select:inherit;-ms-user-select:inherit;user-select:inherit}.ad,.ad *{z-index:1}.ad>div{position:absolute;width:100%;height:100%;overflow:hidden}graphic>.graphic{opacity:inherit}.graphic>img{position:absolute;top:0;left:0}.graphic>.ad-hover,.graphic>.hover{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.app:hover .graphic>.ad-hover,.graphic:hover>.hover{opacity:1}.countdown-number-text{text-align:center}.slider-rotator>.slide-offset{position:relative}.slider-rotator>.slide-offset>.slide{position:relative;display:inline-block;width:100%;height:100%;overflow:hidden}.th-gallery-parent .th-gallery-arrow{cursor:pointer}.th-gallery-parent>.th-gallery-image{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.th-gallery-parent>.active{opacity:1}.minimal-video>video{width:100%;height:auto}"},{}],2:[function(t,e,n){e.exports=function(t){var e,n;return parent.ad_design&&parent.ad_design.Uatu&&parent.getClickTracker?(e=parent.ad_design.Uatu,window.Tarnhelm.log("Tarnhelm is using its legacyTrackingConsumer. This behavior is deprecated, and should only happen if your creative template is out of date."),(n=e()).addConsumerCallback(function(t,e,n){t&&((new Image).src=parent.getClickTracker(t))}),n.addToTrackingMap(t),n.trackingConsumer):(window.Tarnhelm.log("couldn't find Uatu or getClickTracker. This means NOTHING IS BEING TRACKED."),function(){})}},{}],3:[function(t,e,n){function i(t,e){this.eventEmitter=t,this.actionRequirements=e}t("riot"),i.prototype={off:function(t){this.eventEmitter.off(t)},on:function(t,e){this.eventEmitter.on(t,e)},one:function(t,e){this.eventEmitter.one(t,e)},trigger:function(t){if(t.requirements&&!this.canFire(t))return!1;if(t.isGlobal)window.Tarnhelm.triggerGlobalAction(t);else if(null==t.adName){var e=Math.abs(window.parseInt(t.delay,10)||0);if(e){var n=this;window.setTimeout(function(){n.eventEmitter.trigger(t.actionName,t)},e)}else this.eventEmitter.trigger(t.actionName,t)}else window.Tarnhelm.triggerTandemAction(t)},triggerMany:function(t){for(var e=0;e<t.length;e++){var n=t[e];this.trigger(n)}},canFire:function(t){return!!this.actionRequirements.areMet(t)||(window.Tarnhelm.log("An action's requirements were not met ::",t.requirements,t),!1)}},e.exports=i},{riot:114}],4:[function(t,e,n){var o=t("../renderer/stores/ad.js"),a=t("./actionHandler.js"),s=t("./eventEmitter.js"),u=t("./externalTriggerHandler.js"),l=t("./linkHandler.js"),c=t("./scrollActionHandler"),d=t("./externalFunctionHandler.js"),h=t("./logHandler.js"),f=t("./videoActionHandler.js"),p=t("./backwardsCompatibilityProcessor.js"),m=t("./checkAdParentCompliance.js"),g=t("./rectProcessor.js"),v=(t("../renderer/stores/retrievers/scale.js"),t("./events/adEvent.js"));e.exports=function(t){var n={};if(t.adData=p.process(t.adData),t.adData.rect&&delete t.adData.rect,n.id=t.adData.id,n.name=t.adData.name,n.domNode=t.domNode,n.containerFrame=t.containerFrame,n.initTime=(new Date).getTime(),n.trackingConsumer="function"==typeof t.trackingConsumer?t.trackingConsumer:null,n.requirementsTester=window.Tarnhelm.getRequirementsTester(),n.actionHandler=new a(new s,n.requirementsTester),t.eventSinks)for(var e=0;e<t.eventSinks.length;e++)t.eventSinks[e].registerAdActionHandler(n.name,n.actionHandler);n.actionHandler.on("resize-ad-container",function(t){t&&t.data&&t.data.rect&&r(t.data.rect)});var i={adHeight:n.domNode.offsetHeight,adWidth:n.domNode.offsetWidth};function r(t){if(n.containerFrame){var e=g.process(t);g.setElRectStyle(n.containerFrame,e)}}return t.adData.isScalable&&150===i.adHeight&&300===i.adWidth&&window.Tarnhelm.log("Warning: Ad is set to `isScalable`, but its iframe does not have a width dimension set. Ad will be 300px wide on init."),n.adStore=new o(t.adData,n.actionHandler,i),n.linkHandler=new l(t.adData.defaultLink,n.actionHandler),t.adData.externalTriggerActions&&(n.externalTriggerHandler=new u(t.adData.externalTriggerActions,n.actionHandler)),h.listen(n.actionHandler),d.listen(n.actionHandler,n.containerFrame),f.listen(n.actionHandler,n.adStore),n.scrollActionHandler=new c(n.actionHandler),{getId:function(){return n.id},getName:function(){return n.name},getDomNode:function(){return n.domNode},getContainerFrame:function(){return n.containerFrame},getActionHandler:function(){return n.actionHandler},getAdStore:function(){return n.adStore},getInitTime:function(){return n.initTime},getTrackingConsumer:function(){return n.trackingConsumer},timeSinceInit:function(t){return(t=t||(new Date).getTime())-n.initTime},resizeAdContainer:r,minimize:function(){n.actionHandler.trigger({actionName:"minimize-ad"})},maximize:function(){n.actionHandler.trigger({actionName:"maximize-ad"})},initAfterMount:function(){var t=n.adStore.getState();this.initted||(this.initted=!0,r(n.adStore.getState().frameProperties),m.check(this),t.actions&&t.actions.init&&t.actions.init.length&&n.actionHandler.triggerMany(t.actions.init),function(){if(n.adStore.requiresAutoplay()){var t=window.ad_utils&&window.ad_utils.fp?window.ad_utils.fp:void 0;if(t&&t.should_autoplay(n.id)){var e=n.adStore.getFrequencyCappedInitActions();n.actionHandler.triggerMany(e),t.log_autoplay(n.id)}}}(),n.actionHandler.trigger({actionName:v.DISPLAYED}))}}}},{"../renderer/stores/ad.js":68,"../renderer/stores/retrievers/scale.js":78,"./actionHandler.js":3,"./backwardsCompatibilityProcessor.js":5,"./checkAdParentCompliance.js":6,"./eventEmitter.js":9,"./events/adEvent.js":10,"./externalFunctionHandler.js":13,"./externalTriggerHandler.js":14,"./linkHandler.js":17,"./logHandler.js":18,"./rectProcessor.js":22,"./scrollActionHandler":24,"./videoActionHandler.js":28}],5:[function(t,e,n){e.exports={process:function(t){var e="Ad schema not up to date! ["+t.name+"] :: ",n=!!t.rect,i=!!t.frameProperties,r=i&&!!t.frameProperties.rect,o=!1;if(n&&!i){o=!0;var a={width:t.rect.width,height:t.rect.height};t.frameProperties=a}else n||(i&&r?(o=!0,a={width:t.frameProperties.rect.width,height:t.frameProperties.rect.height},t.frameProperties=a):i||r||(window.Tarnhelm.log(e+"Bad dimensions config, please update immediately."),t.frameProperties={width:0,height:0}));return o&&window.Tarnhelm.log(e+"Please update ad's frameProperties and ad.rect schema."),t}}},{}],6:[function(t,e,n){e.exports={check:function(t){var e="Ad ["+t.getAdStore().getState().name+"] may not render properly! ";if(this.hasAdContainerParent(t)){var n=this.getAdContainerParent(t),i=window.getComputedStyle(n),r=new RegExp(/relative|absolute/),o=new RegExp(/(inline\-|)block/);r.test(i.position)||window.Tarnhelm.log(e+' iframe.parentNode must be set to  position "relative" or "absolute".'),"visible"!==i.overflow&&window.Tarnhelm.log(e+"iframe.parentNode is not set to overflow: visible;"),"relative"!==i.position||o.test(i.display)||window.Tarnhelm.log(e+'iframe.parentNode is set to position "relative", so it must also be set to display "block" or "inline-block".'),""===i.width&&window.Tarnhelm.log(e+"iframe.parentNode requires an explicit width."),""===i.height&&window.Tarnhelm.log(e+"iframe.parentNode requires an explicit height.")}else window.Tarnhelm.log(e+"Incorrect context for Tarnhelm iframe: Ad iframe does not have an iframeNode.parentNode");var a=t.getContainerFrame(),s=window.getComputedStyle(a);""===s.top&&""===s.bottom&&""===s.left&&""===s.right&&window.Tarnhelm.log(e+"iframe has no positioning values.")},hasAdContainerParent:function(t){return t.getContainerFrame()&&t.getContainerFrame().parentNode},getAdContainerParent:function(t){return t.getContainerFrame().parentNode}}},{}],7:[function(t,e,n){var i=t("riot");t("../tarnhelm.js");var r=function(t){var e;e="number"==typeof t?new Date(t):Date.parse(t),isNaN(e)?(window.Tarnhelm.log('Bad date string "'+t+'", setting CountdownTimer to NOW to avoid errors'),this.targetDate=new Date):this.targetDate=new Date(t),i.observable(this),this.tick(),this.start()};r.prototype={getMillisecondsRemaining:function(){var t=this.targetDate.valueOf()-window.Tarnhelm.getNowTime();return 0<t?t:0},start:function(){window.clearInterval(this.interval),this.boundTick=this.tick.bind(this),this.interval=window.setInterval(this.boundTick,1e3)},stop:function(){window.clearInterval(this.interval),delete this.boundTick},tick:function(){var t=this.getRemainingValues(this.getMillisecondsRemaining());this.trigger("tick",t),t.totalMs||(this.stop(),this.trigger("end"))},getRemainingValues:function(t){var e={days:0,hours:0,minutes:0,seconds:0,totalMs:0},n=t;return 0===n||(e.totalMs=n,e.days=Math.floor(n/864e5),n-=864e5*e.days,e.hours=Math.floor(n/36e5),n-=36e5*e.hours,e.minutes=Math.floor(n/6e4),n-=6e4*e.minutes,e.seconds=Math.floor(n/1e3)),e}},e.exports=r},{"../tarnhelm.js":81,riot:114}],8:[function(t,e,n){var i=/^http(s)?\:\/\/m\.(.*\.)?imdb\.com/,o=/(Android|OS|Windows Phone) (\d+)[\._](\d+)[\._]?(\d+)?/,a=/Android (\d{2,})/,r=/iP(hone|ad|od)/,s=/Version\/[\d\.]+.*Safari/,u="Chrome/",l=/(Chrome|Safari|MSIE|Firefox)/,c=/(SamsungBrowser|Galaxy Nexus Build|iPhone OS 8|iPhone OS 7)/;function d(t,e){this.userAgentString=e,this.url=t,this._calculate()}d.prototype={getInfo:function(){return this.deviceInfo},_calculate:function(){var t=this._isWindowsDevice(this.userAgentString),e=this._isIOSDevice(this.userAgentString),n=this._isAndroidDevice(this.userAgentString),i=t||e||n,r=this._isIMDbApp(this.userAgentString),o=this._isSafari(this.userAgentString),a=this._getMobilePlatformVersion(this.userAgentString,r,n),s=!i||this._hasMobileTransitionTransformSupport(this.userAgentString,r,n,a);this.deviceInfo={isWindowsDevice:t,isSafari:o,isIOSDevice:!t&&e,isAndroidDevice:!t&&n,isMobileDevice:i,isMobileSite:this._isMobileSite(this.url),isIMDbApp:r,hasTouch:this._hasTouch(document),canAutoplay:this._canAutoplay(a,r,n,e,i),canFullscreen:this._canFullscreen(document),mobilePlatformVersion:a,canTransitionTransforms:s}},_isWindowsDevice:function(t){return-1<t.indexOf("Windows Phone")},_isIOSDevice:function(t){return-1<t.search(r)},_isSafari:function(t){return-1<t.search(s)},_isAndroidDevice:function(t){return-1<t.indexOf("Android")},_isMobileSite:function(t){return-1<t.search(i)},_isIMDbApp:function(t){return-1<t.indexOf("IMDb-flg")},_hasTouch:function(t){return"ontouchstart"in t},_getChromeVersion:function(t){if(-1!==t.indexOf(u))return parseInt(t.substr(t.indexOf(u)+u.length,2),10);window.Tarnhelm.log("Attempted to get chrome version string of non chrome userAgentString")},_getMobilePlatformVersion:function(t,e,n){var i,r={};return(i=t.match(o))&&0<i.length&&(r.major=parseInt(i[2],10)||0,r.minor=parseInt(i[3],10)||0,r.patch=parseInt(i[4],10)||0),e&&n&&((i=t.match(a))&&0<i.length?r.androidAPI=parseInt(i[1],10)||0:r.androidAPI=0),r},_canAutoplay:function(t,e,n,i,r){return e?n?17<=t.androidAPI||4<=t.major&&!(4===t.major&&t.minor<2):!!(i&&4<=t.major):!r},_canFullscreen:function(t){return t.fullscreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled||t.mozFullscreenEnabled},_hasMobileTransitionTransformSupport:function(t,e,n,i){var r=!n&&i.major<9;if(e)return!r;if(c.test(t))return!1;if(l.test(t)){if(-1!==t.indexOf(u)){var o=this._getChromeVersion(t);if(!Number.isNaN(o)&&o<46)return!1}return!0}return!1}},e.exports=d},{}],9:[function(t,e,n){var i=t("riot");e.exports=function(){i.observable(this)}},{riot:114}],10:[function(t,e,n){e.exports={DISPLAYED:"ad:displayed",ASSET_PRELOAD_START:"ad:asset-preload-start",ASSET_PRELOAD_FINISH:"ad:asset-preload-finish",ASSET_PRELOAD_TIMEOUT:"ad:asset-preload-timeout",VIDEO_FAILURE:"ad:video-failure",VIDEO_LOADED:"ad:video-loaded"}},{}],11:[function(t,e,n){var i=t("./tarnhelmEvent.js"),r=t("./adEvent.js"),o=function(t){this.topActionHandler=t,this.registerTopActionHandler();var e=this;this.topActionHandler.on("fireDeferredMetrics",function(){e.fireDeferredMetrics()})},a=[];function s(t){a.push({fired:!1,fn:t})}function u(t,e){window.premiumAdMetrics&&window.premiumAdMetrics.initCounter?(window.Tarnhelm.log("initializing counter for "+t+"_"+e,Date.now()),window.premiumAdMetrics.initCounter(t,e)):(window.Tarnhelm.log("deferring counter initialization for "+t+"_"+e,Date.now()),s(function(){window.premiumAdMetrics.initCounter(t,e)}))}function l(t,e){window.premiumAdMetrics&&window.premiumAdMetrics.recordCounter?(window.Tarnhelm.log("logging counter for "+t+"_"+e,Date.now()),window.premiumAdMetrics.recordCounter(t,e)):(window.Tarnhelm.log("deferring counter for "+t+"_"+e,Date.now()),s(function(){window.premiumAdMetrics.recordCounter(t,e)}))}function c(t,e){var n=window.IMDbTimer?Date.now()-window.IMDbTimer.starttime:-1;-1!==n?window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging timed event for "+t+"_"+e,Date.now()),window.premiumAdMetrics.recordLatency(t,e,n)):(window.Tarnhelm.log("deferring timed event for "+t+"_"+e,Date.now()),s(function(){window.premiumAdMetrics.recordLatency(t,e,n)})):window.Tarnhelm.log("no timer baseline present to log timed event for "+t+"_"+e,Date.now())}o.prototype={registerTopActionHandler:function(){this.topActionHandler.on(i.READY,function(){c("tarnhelm","start")}),this.topActionHandler.on(i.INIT_FAILURE,function(){c("tarnhelm","initFailure")}),u("creative","abort"),this.topActionHandler.on(i.MPTP_ABORT,function(){l("creative","abort")}),u("tarnhelm","error"),this.topActionHandler.on(i.ERROR,function(){l("tarnhelm","error")}),u("creative","transitionSuccess"),this.topActionHandler.on(i.MPTP_TRANSITION,function(){l("creative","transitionSuccess")}),u("creative","transitionFailure"),this.topActionHandler.on(i.MPTP_TRANSITION_FAILURE,function(){l("creative","transitionFailure")})},registerAdActionHandler:function(t,e){e.on(r.ASSET_PRELOAD_START,function(){c("tarnhelm","preloadStart")}),e.on(r.ASSET_PRELOAD_FINISH,function(){c("tarnhelm","preloadFinish")}),e.on(r.ASSET_PRELOAD_TIMEOUT,function(){c("tarnhelm","preloadTimeout")}),e.on(r.DISPLAYED,function(){c("tarnhelm","creativeDisplayed")}),u("tarnhelm","videoFailure"),e.on(r.VIDEO_FAILURE,function(){l("tarnhelm","videoFailure")}),e.on(i.RECORD_LATENCY,function(t){var e,n,i;e="tarnhelm",n=t.metricName,i=t.milliseconds,window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging pre-calculated latency for "+e+"_"+n,Date.now()),window.premiumAdMetrics.recordLatency(e,n,i)):(window.Tarnhelm.log("deferring pre-calculated latency for "+e+"_"+n,Date.now()),s(function(){window.premiumAdMetrics.recordLatency(e,n,i)}))})},fireDeferredMetrics:function(){a.forEach(function(t){t.fired||(t.fn(),t.fired=!0)})}},e.exports=o},{"./adEvent.js":10,"./tarnhelmEvent.js":12}],12:[function(t,e,n){e.exports={READY:"tarnhelm:system-init",ERROR:"tarnhelm:error",INIT_FAILURE:"tarnhelm:init-failure",MPTP_ABORT:"tarnhelm:mptp-abort",MPTP_TRANSITION:"tarnhelm:mptp-transition",MPTP_TRANSITION_FAILURE:"tarnhelm:mptp-transition-failure",RECORD_LATENCY:"tarnhelm:record-latency"}},{}],13:[function(t,e,n){var i={listen:function(t,e){var n=this,i=e.contentWindow;t.on("call-external-function",function(t){n.callExternalFunction(i,t)})},callExternalFunction:function(t,e){var n,i,r=e.data.functionName,o=e.data.arguments||[],a=this.getFunctionContext(t,e);this.isNested(r)?(n=this.getFunctionThisArg(e,a),i=this.getNestedFunction(r,a)):i=(n=a)[r],"function"==typeof i?"object"==typeof n?i.apply(n,o):this.logThisArgErrorMessage(n,e):this.logErrorMessage(i,e)},getFunctionThisArg:function(t,e){var n=t.data.functionName,i=t.data.thisArgName;return i||(i=n.substr(0,n.lastIndexOf("."))),this.nestReduce(i.split("."),e)},getFunctionContext:function(t,e){return"top"===e.data.context?window.top:t},isNested:function(t){return-1!==t.indexOf(".")},getNestedFunction:function(t,e){return this.nestReduce(t.split("."),e)},nestReduce:function(t,e){return t.reduce(function(t,e,n,i){if(t)return t[e]},e)},logErrorMessage:function(t,e){var n="";n+=null==t?"Function does not exist":e.data.functionName+" is not a function",this.logError(n,e)},logThisArgErrorMessage:function(t,e){var n="";n+=null==t?"Provided thisArg does not exist":e.data.thisArgName+" is not an object",this.logError(n,e)},logError:function(t,e){t+=' in "'+e.data.context+'" context. ',window.Tarnhelm.log('Failed to call external function "'+e.data.functionName+'".',t)}};e.exports=i},{}],14:[function(t,e,n){e.exports=function(t,e){var n=this;n.actionMap=t,e.on("handle-external-trigger",function(t){t.data.triggerName&&n.actionMap[t.data.triggerName]&&e.triggerMany(n.actionMap[t.data.triggerName])})}},{}],15:[function(t,e,n){var i={throttle:function(n,i){var r,o,a=0,s=null,u=function(){a=Date.now(),s=null,n.apply(r,o)};return function(){var t=Date.now(),e=i-(t-a);r=this,o=arguments,e<=0||i<e?(s&&(clearTimeout(s),s=null),a=t,n.apply(r,o)):s||(s=setTimeout(u,e))}},debounce:function(e,n){var i,r,o,a=0,s=null;function u(){var t=Date.now()-a;t<n?s=setTimeout(u,n-t):(s=null,o=e.apply(i,r))}return function(){return i=this,r=arguments,a=Date.now(),s||(s=setTimeout(u,n)),o}}};e.exports=i},{}],16:[function(t,e,n){e.exports={beforeNode:function(t,e){var n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.parentNode.insertBefore(n,e)}}},{}],17:[function(t,e,n){function i(t,e){var n=this;this.defaultLink=t,(this.actionHandler=e).on("open-link",function(t){n.handleLinkAction(t)}),e.on("open-default-link",function(t){n.defaultLink?n.handleLinkAction(t):window.Tarnhelm.log('No defaultLink for the "open-default-link" action.')})}i.prototype={pauseVideos:function(){this.actionHandler.trigger({actionName:"video:pause-all"})},handleLinkAction:function(t){var e=this.defaultLink,n=!1;t.data&&(e=t.data.url||e,n=!!t.data.sameWindow),n?window.top.location.href=e:window.open(e)}},e.exports=i},{}],18:[function(t,e,n){e.exports={listen:function(t){t.on("log",function(t){window.Tarnhelm.log(t.message)})}}},{}],19:[function(t,e,n){var i=function(t){this.injectEl=t,this.init(),this.minimize()};i.prototype={dimensions:{minimize:40,logHeight:150},init:function(){this.containerEl=this.getContainerEl(),this.logEl=this.getLogEl(),this.containerEl.appendChild(this.logEl),this.minimizeButton=this.getMinimizeButton(),this.containerEl.appendChild(this.minimizeButton),this.injectEl.appendChild(this.containerEl),this.log(" = Tarnhelm - Mobile Debug Mode = ")},log:function(t){Array.isArray(t)||(t=[t]);var e=this.makeLine(t);this.logEl.appendChild(e),this.logEl.scrollTop=this.logEl.scrollHeight},makeLine:function(t){var e=document.createElement("p");e.style.cssText="margin:0 0 0.25em 0; border-bottom: thin solid rgba(255,255,255,0.25);",e.textContent="";for(var n=0;n<t.length;n++){var i=t[n],r="";i?"string"==typeof i?r=i:"function"==typeof i.toString&&(r=i.toString()):r="undefined",n<t.length-1&&(r+=", "),e.textContent+=r}return e},getContainerEl:function(){return this._makeEl("mobile-log-container",["position: fixed","bottom:0","left:0","display: block","width: 100%","overflow: visible","height: "+this.dimensions.logHeight+"px","z-index: 1986",""].join(";"))},getLogEl:function(){return this._makeEl("mobile-log",["position: absolute","top:0","display: block","width: 100%","height: 150px","z-index: 1986","color: rgb(0, 255, 0)","font-family: courier","background-color: rgba(0,0,0,0.8)","overflow: scroll",""].join(";"))},getMinimizeButton:function(){var t=this.dimensions.minimize+"px",e=this._makeEl("mobile-log-minimize-button",["position:absolute","right: 0","top: -"+t,"display: block","background: rgba(0,0,0,0.8)","color: rgb(0, 255, 0)","width:"+t,"height:"+t,"font-size: 24px","line-height: 20px","cursor:pointer","text-align:center"].join(";"));return e.textContent="_",e.onclick=this.minimizeButtonClick.bind(this),e},_makeEl:function(t,e){var n=document.createElement("div");return n.id=t,n.style.cssText=e,n},minimizeButtonClick:function(){this.isMinimized?this.unminimize():this.minimize()},minimize:function(){this.isMinimized=!0,this.containerEl.style.height=0,this.minimizeButton.textContent="^"},unminimize:function(){this.isMinimized=!1,this.containerEl.style.height=this.dimensions.logHeight+"px",this.minimizeButton.textContent="_"}},e.exports=i},{}],20:[function(t,e,n){var i={sameSign:function(t,e){return 0<=t&&0<=e||t<=0&&e<=0},avg:function(t){return 0===t.length?0:t.reduce(function(t,e){return t+e})/t.length},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},getEllipseFalloff:function(t,e){var n=this.clamp(t,0,e),i=Math.sqrt(1-Math.pow(n,2)/Math.pow(e,2));return this.clamp(i,0,1)}};e.exports=i},{}],21:[function(t,e,n){e.exports={clone:function(t){return JSON.parse(JSON.stringify(t))},shallowMerge:function(t,e){this._doMerge(t,e,!0)},shallowMergeMany:function(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];t[r]||(t[r]={}),this.shallowMerge(t[r],e[r])}},_doMerge:function(t,e,n){if(!this.isObject(t)||!this.isObject(e))return window.Tarnhelm.log("Object merge operation failed, both params must be objects:"),window.Tarnhelm.log(t),void window.Tarnhelm.log(e);for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r];if(n||null==t[o]){var a="object"===e[o]?this.clone(e[o]):e[o];t[o]=a}}},mergeDefaults:function(t,e){var n=this.clone(e);this._doMerge(t,n,!1)},isObject:function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t},getProperty:function(t,e){if(t&&e){for(var n=e.split("."),i=t,r=0;r<n.length;r++){if(void 0===i[n[r]])return;i=i[n[r]]}return i}}}},{}],22:[function(t,e,n){var i=t("../renderer/stores/retrievers/scale.js"),r={defaults:{position:"absolute",anchorX:"left",offsetX:0,anchorY:"top",offsetY:0,width:"auto",height:"auto"},setElRectStyle:function(t,e){var n=t.style;["top","right","bottom","left"].forEach(function(t){n.removeProperty(t)}),n.position=e.position,n[e.anchorX]=e.offsetX,n[e.anchorY]=e.offsetY,n.height=e.height,n.width=e.width},process:function(t){var e=t||{};return{position:this.determinePositioning(e.position),anchorX:this.determineAnchorX(e.anchorX),offsetX:this.getDimensionWithUnit(e.offsetX,this.defaults.offsetX),anchorY:this.determineAnchorY(e.anchorY),offsetY:this.getDimensionWithUnit(e.offsetY,this.defaults.offsetY),width:this.getDimensionWithUnit(e.width,this.defaults.width),height:this.getDimensionWithUnit(e.height,this.defaults.height)}},determinePositioning:function(t){return null!=t&&t.match(/absolute|relative|fixed|static|inherit/)?t:this.defaults.position},determineAnchorX:function(t){switch(t){case"right":return"right";case"left":return"left";default:return null!=t&&window.Tarnhelm.log("Bad anchorX position configured."),this.defaults.anchorX}},determineAnchorY:function(t){switch(t){case"bottom":return"bottom";case"top":return"top";default:return null!=t&&window.Tarnhelm.log("Bad anchorY position configured."),this.defaults.anchorY}},getDimensionWithUnit:function(t,e){return null==t?e:i.getDimensionWithUnit(t)}};e.exports=r},{"../renderer/stores/retrievers/scale.js":78}],23:[function(t,e,n){var i={canAutoplay:1,hasTouch:1,canFullscreen:1},r=function(t){this.requirementFlags=this.buildFlags(t)};r.prototype={areMet:function(t){var e=t.requirements||{},n=Object.keys(e);return 0===n.length||(this.areValidRequirements(n)?this.testRequirements(e):(window.Tarnhelm.log("Invalid requirement(s) found on an item ::",t.requirements," :: Full item :: ",t),!1))},testRequirements:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],r=t[i];if(this.requirementFlags[i]!==r)return!1}return!0},buildFlags:function(t){return{canAutoplay:t.canAutoplay,hasTouch:t.hasTouch,canFullscreen:t.canFullscreen}},areValidRequirements:function(t){for(var e=0;e<t.length;e++)if(!this.isValidRequirement(t[e]))return!1;return!0},isValidRequirement:function(t){return!!i[t]}},e.exports=r},{}],24:[function(t,e,n){e.exports=function(t){var n,i;function r(){0===window.scrollY?(window.cancelAnimationFrame(n),n=null):(window.scrollBy(0,i),n=window.requestAnimationFrame(r))}t.on("jump-to-top",function(t){0<window.scrollY&&(window.scroll(0,0),window.Tarnhelm.log("window jump-to-top requested."))}),t.on("scroll-to-top",function(t){if(0<window.scrollY){window.Tarnhelm.log("window scroll-to-top requested.");var e=t.duration||100;i=-window.scrollY/(e/17),n=window.requestAnimationFrame(r)}})}},{}],25:[function(t,e,n){var i=t("./numberUtils.js"),r=(t("./objectUtils.js"),t("./functionUtils.js")),o=function(t){this.firstPos=this.getPosFromEvent(t),this.handledFirstMove=!1,this.currPos=this.getPosFromEvent(t),this.prevPos=this.getPosFromEvent(t),this.velocity={x:0,y:0},this.totalDistance={x:0,y:0},this.currMoveDistance={x:0,y:0},this.debouncedVelocityDecay=r.debounce(this.velocityDecay.bind(this),50),this.transitionLengthFactor=1,this.touchEnded=!1,this.isTouchTypeDetermined=!1,this.isHorizontalMove=!1,this.isVerticalMove=!1,this.isSwipe=!1};o.prototype={addTouchMoveData:function(t){this.prevPos=this.currPos,this.currPos=this.getPosFromEvent(t),this.currMoveDistance=this.getTouchMoveDifference(this.prevPos,this.currPos),this.totalDistance=this.getNewTotalDistance(this.totalDistance,this.currMoveDistance),this.velocity=this.getNewVelocity(this.velocity,this.currMoveDistance),this.debouncedVelocityDecay(),this.determineTouchType(this.totalDistance,this.velocity)},finalizeTouchDataOnEnd:function(t){this.touchEnded=!0,this.isSwipe=this.touchTestSwipe(this.velocity),this.transitionLengthFactor=this.getTransitionLengthFactor(this.velocity.x)},getPosFromEvent:function(t){return{x:t.touches[0].clientX,y:t.touches[0].clientY}},getTouchMoveDifference:function(t,e){return{x:e.x-t.x,y:e.y-t.y}},getNewTotalDistance:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},getNewVelocity:function(t,e){return{x:this._adjustVelocity(t.x,e.x),y:this._adjustVelocity(t.y,e.y)}},getTransitionLengthFactor:function(t){var e=i.getEllipseFalloff(Math.abs(t),100);return i.clamp(e,.2,1)},velocityDecay:function(){this.touchEnded||(this.velocity.x=0,this.velocity.y=0,this.currMoveDistance.x=0,this.currMoveDistance.y=0,this.isSwipe=!1)},_adjustVelocity:function(t,e){var n;return n=i.sameSign(t,e)?t:0,i.avg([n,e])},determineTouchType:function(t,e){this.isSwipe||(this.isSwipe=this.touchTestSwipe(e)),this.isVerticalMove||this.isHorizontalMove||(this.isVerticalMove=this.touchTestVertical(t),this.isVerticalMove?this.isTouchTypeDetermined=!0:(this.isHorizontalMove=this.touchTestHorizontal(t),this.isHorizontalMove&&(this.isTouchTypeDetermined=!0)))},touchTestHorizontal:function(t){return 10<=Math.abs(t.x)},touchTestVertical:function(t){return 7.5<=Math.abs(t.y)},touchTestSwipe:function(t){return 5<Math.abs(t.x)}},e.exports=o},{"./functionUtils.js":15,"./numberUtils.js":20,"./objectUtils.js":21}],26:[function(t,e,n){var c={opacity:"opacity",translate:"transform",translateX:"transform",translateY:"transform",rotate:"transform",scale:"transform",scaleX:"transform",scaleY:"transform",blur:"filter",brightness:"filter",contrast:"filter",grayscale:"filter",saturate:"filter"},r={filter:["-webkit-filter","-moz-filter","-o-filter"]};e.exports={isValidTransitionType:function(t){return"string"==typeof t&&!!c[t]},getTransitionSegment:function(t){return this.getTransitionSegmentForProperty(t,c[t.type])},getPrefixedTransitionSegments:function(t){var e=[];e.push(this.getTransitionSegment(t));for(var n=r[c[t.type]],i=0;i<n.length;i++)e.push(this.getTransitionSegmentForProperty(t,n[i]));return e},getTransitionSegmentForProperty:function(t,e){var n=[];return e&&n.push(e),t.duration&&n.push(t.duration),t.easing&&n.push(t.easing),t.delay&&n.push(t.delay),n.join(" ")},getCSSFunctionSegment:function(t,e){return t+"("+e+")"},calculateTransitionStyles:function(t){for(var e={start:{},end:{}},n=[],i=[],r=[],o=[],a=[],s=0;s<t.length;s++){var u=t[s];if(this.isValidTransitionType(u.type))switch(c[u.type]){case"transform":i.length||n.push(this.getTransitionSegment(u)),i.push(this.getCSSFunctionSegment(u.type,u.startValue)),r.push(this.getCSSFunctionSegment(u.type,u.endValue));break;case"opacity":e.start[u.type]=u.startValue,e.end[u.type]=u.endValue,n.push(this.getTransitionSegment(u));break;case"filter":if(!o.length){var l=this.getPrefixedTransitionSegments(u);n=n.concat(l)}o.push(this.getCSSFunctionSegment(u.type,u.startValue)),a.push(this.getCSSFunctionSegment(u.type,u.endValue))}}return n.length&&(e.start.transition=n.join(",")),i.length&&(e.start.transform=i.join(" ")),r.length&&(e.end.transform=r.join(" ")),o.length&&(e.start.filter=o.join(" ")),a.length&&(e.end.filter=a.join(" ")),e},getTransitionTime:function(t){var e=parseFloat(t.duration)||0,n=parseFloat(t.delay)||0;return Math.floor(1e3*(e+n))},getMaxTransitionTime:function(t){for(var e=0,n=0;n<t.length;n++){var i=this.getTransitionTime(t[n]);e<i&&(e=i)}return e}}},{}],27:[function(t,e,n){e.exports={getQueryParam:function(t,e){var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return n?n[1]:""},preloadUrl:function(t,e){var n=new Image;"function"==typeof e&&(n.onload=e),n.src=t},preloadUrls:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)this.preloadUrl(t[e])},preloadUrlsWithCallback:function(t,e){var n,i=0,r=!1;if(t&&t.length){n=window.setTimeout(function(){window.Tarnhelm.log("Only "+i+" of "+t.length+" preloaded before timeout. Preload assets failed to load before the timeout, triggering callback."),a(!0)},3e3);for(var o=0;o<t.length;o++)this.preloadUrl(t[o],s)}else e(!1);function a(t){r||(r=!0,e(t))}function s(){++i===t.length&&(window.Tarnhelm.log(i+" of "+t.length+" images have preloaded"),window.clearTimeout(n),a(!1))}}}},{}],28:[function(t,e,n){var s=t("../renderer/stores/retrievers/component.js");e.exports={videoActions:["video:play","video:pause","video:reset","video:mute","video:unmute","video:fullscreen","video:normalscreen"],listen:function(i,t){var r=this;i.on(this.videoActions.join(" "),function(t,e){r.triggerVideoAction(i,e.actionName,e.componentName)});var o=t.getComponentLibrary(),a=t.getComponentNamesByCategory("video"),e=this.videoActions.map(function(t){return t+"-all:under-ancestor"});i.on(e.join(" "),function(t,e){var n="video:"+t.split(":")[1].split("-")[0];r.triggerVideoActionUnderAncestor(i,n,e.ancestorName,o,a)})},triggerVideoAction:function(t,e,n){var i=e+":"+n;t.trigger({actionName:i})},triggerVideoActionUnderAncestor:function(t,e,n,i,r){if(n)for(var o=0;o<r.length;o++){var a=r[o];s.hasAncestorOfName(a,n,i)&&this.triggerVideoAction(t,e,a)}else window.Tarnhelm.log(e+"-all:under-ancestor actions require ancestorName property.")}}},{"../renderer/stores/retrievers/component.js":74}],29:[function(t,e,n){e.exports=function(o,t){o=o;var a,e=this;this.setWrap=function(t){var e;a||((e=document.getElementById(o))||window.Tarnhelm.log("Invalid element id set on wrapSwapper."),a=e);var n,i,r=(i="",(n=t).source&&(i+="url("+n.source+") ",i+=n.position?n.position+" ":"center top ",i+=n.repeat?n.repeat+" ":"no-repeat ",i+=n.attachment?n.attachment+" ":"scroll "),i+=n.color);a.style.background=r},t.on("set-wrap-background",function(t){e.setWrap(t.data)})}},{}],30:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){i("./mixins/action.js"),i("./mixins/action-user.js"),i("./mixins/action-touch.js"),i("./mixins/action-swipe.js"),i("./mixins/action-transitions.js"),i("./mixins/action-cuepoint.js"),i("./mixins/background.js"),i("./mixins/base.js"),i("./mixins/media-interop.js"),i("./mixins/rect.js"),i("./mixins/resize.js"),i("./mixins/rotator.js"),i("./mixins/styles.js"),i("./mixins/teardown.js"),i("./mixins/transitions.js"),i("./mixins/video.js"),i("./mixins/weblab.js"),i("./mixins/zoolander.js"),i("./components/ad.tag"),t.tag("app",'<ad data="{adData}"></ad>','class="app"',function(t){this._adInstance=this.opts.adInstance,this.adData=this._adInstance.getAdStore().getState();var e=this;this._adInstance.getActionHandler().on("ad-state-updated",function(){e.adData=e._adInstance.getAdStore().getState(),e.update()})})})},{"./components/ad.tag":31,"./mixins/action-cuepoint.js":49,"./mixins/action-swipe.js":50,"./mixins/action-touch.js":51,"./mixins/action-transitions.js":52,"./mixins/action-user.js":53,"./mixins/action.js":54,"./mixins/background.js":55,"./mixins/base.js":56,"./mixins/media-interop.js":57,"./mixins/rect.js":58,"./mixins/resize.js":59,"./mixins/rotator.js":60,"./mixins/styles.js":61,"./mixins/teardown.js":62,"./mixins/transitions.js":63,"./mixins/video.js":64,"./mixins/weblab.js":65,"./mixins/zoolander.js":66,riot:114}],31:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){i("./child.tag"),t.tag("ad",'<div riot-style="{getTagStyleString()}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>','class="ad"',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("background")})})},{"./child.tag":34,riot:114}],32:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("alphalfa",'<div class="alphalfa" riot-style="{getTagStyleString()}"><video __autoplay="{this.shouldItAutoplay()}" webkit-playsinline playsinline style="display:none;" muted="true"><source riot-src="{this.opts.data.video.url}"></video><canvas class="alphalfa-buffer" style="display:none;" height="{this.opts.data.rect.height * 2}px" width="{this.opts.data.rect.width}px"></canvas><canvas class="alphalfa-output" height="{this.opts.data.rect.height}px" width="{this.opts.data.rect.width}px"></canvas></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var e=this;this.addLoopConfig=function(t){var e=this.opts.data.video,n=e.loop;return!0===n&&(t.loop=n,null!=e.maxLoops&&(t.maxLoops=e.maxLoops)),t},this.addStillFrame=function(t){var e=this.opts.data.video;return null!=e.stillFrameMS?t.stillFrameMS=e.stillFrameMS:!0===e.loop&&0!==e.maxLoops&&window.Tarnhelm.log("Warning: No stillFrameMS set on a non-infinitely looping Alphalfa. It will disappear after its last loop."),t},this.addMaskUrl=function(t){var e=this.opts.data.video;return null!=e.maskUrl&&(t.maskUrl=e.maskUrl),t},this.initAlphalfa=function(){var t=this.getVideoEl();if(t&&"function"==typeof t.play){this.opts.data.isInvisible&&(t.autoplay=""),this.bufferEl=this.root.getElementsByTagName("canvas")[0],this.outputEl=this.root.getElementsByTagName("canvas")[1];var e={video:t,buffer:this.bufferEl,output:this.outputEl,colorCorrect:!!this.opts.data.video.colorCorrect,forceCanvas:!!this.opts.data.video.forceCanvas,horizontalStack:!!this.opts.data.video.horizontalStack};e=this.addLoopConfig(e),e=this.addStillFrame(e),e=this.addMaskUrl(e),this.alphalfaPlayer=new ad_design.AlphalfaPlayer(e),this.alphalfaPlayer.listen(),this.shouldItAutoplay()&&this.doAutoplay(t)}},this.initCuepointEngine=function(){var t=this.getVideoEl();t&&(this.cuepointEngine=new ad_design.CuepointEngine({media:t,cuepoints:this.getCuePoints(),observer:this}))},this.play=function(){var t=e.getVideoEl();t&&"function"==typeof t.play&&t.play()},this.pause=function(){var t=e.getVideoEl();t&&"function"==typeof t.pause&&t.pause()},this.mute=function(){window.Tarnhelm.log("Alphalfa does not support mute and unmute actions.")},this.unmute=this.mute,this.reset=function(){var t=e.getVideoEl();t&&"number"==typeof t.currentTime&&(t.currentTime=0)},this.fullscreen=function(){window.Tarnhelm.log("Alphalfa does not support fullscreen and normalscreen actions.")},this.normalscreen=this.fullscreen,this.on("mount",function(){this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.initAlphalfa(),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","alphalfa"),this.alphalfaPlayer.teardown(),this.cuepointEngine.destroy()})})})},{riot:114}],33:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("animaniac",'<div class="animaniac" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"></div>',function(t){var e=i("../../modules/objectUtils.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.initted=!1,this.createAnimation=function(){var t=e.clone(this.opts.data.animaniacOptions);t.injectEl=this.root.getElementsByClassName("animaniac")[0],t.url=this.opts.data.source,t.spriteHeight=this.opts.data.rect.height,t.spriteWidth=this.opts.data.rect.width,t.sheetHeight=this.opts.data.spriteSheetDimensions.height,t.sheetWidth=this.opts.data.spriteSheetDimensions.width,this.animaniac=new ad_design.Animaniac(t),this.initted=!0},this.addActionListeners=function(){var e=this,t=this.getAdInstance().getActionHandler();t.on("animaniac:play",function(t){e.canTriggerAction(t.componentName)&&e.animaniac.play()}),t.on("animaniac:pause",function(t){e.canTriggerAction(t.componentName)&&e.animaniac.pause()}),t.on("animaniac:play-animation",function(t){e.canTriggerAction(t.componentName)&&e.animaniac.playAnimation(t.data.animationName)})},this.destroyAnimation=function(){this.animaniac.pause(),this.initted=!1,this.animaniac=null},this.canTriggerAction=function(t){return this.initted&&t===this.opts.data.name},this.on("mount",function(){this.createAnimation(),this.addActionListeners()}),this.on("unmount",function(){this.destroyAnimation()})})})},{"../../modules/objectUtils.js":21,riot:114}],34:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){i("./alphalfa.tag"),i("./animaniac.tag"),i("./countdown.tag"),i("./countdown-number-text.tag"),i("./countdown-number-custom.tag"),i("./countdowner.tag"),i("./gallery.tag"),i("./graphic.tag"),i("./panel.tag"),i("./minimal-video.tag"),i("./reely.tag"),i("./rotator.tag"),i("./rotatorbutton.tag"),i("./slider-rotator.tag"),i("./youtube.tag"),t.tag("child",'<alphalfa each="{this.getType(\'alphalfa\')}" data="{data}"></alphalfa><animaniac each="{this.getType(\'animaniac\')}" data="{data}"></animaniac><countdown each="{this.getType(\'countdown\')}" data="{data}"></countdown><countdown-number-text each="{this.getType(\'countdown-number-text\')}" data="{data}"></countdown-number-text><countdown-number-custom each="{this.getType(\'countdown-number-custom\')}" data="{data}"></countdown-number-custom><countdowner each="{this.getType(\'countdowner\')}" data="{data}"></countdowner><gallery each="{this.getType(\'gallery\')}" data="{data}"></gallery><graphic each="{this.getType(\'graphic\')}" data="{data}"></graphic><panel each="{this.getType(\'panel\')}" data="{data}"></panel><reely each="{this.getType(\'reely\')}" data="{data}"></reely><minimal-video each="{this.getType(\'minimal-video\')}" data="{data}"></minimal-video><rotator each="{this.getType(\'rotator\')}" data="{data}"></rotator><rotatorbutton each="{this.getType(\'rotatorbutton\')}" data="{data}"></rotatorbutton><slider-rotator each="{this.getType(\'slider-rotator\')}" data="{data}"></slider-rotator><youtube each="{this.getType(\'youtube\')}" data="{data}"></youtube>','data-comp-name="{ this.opts.name }"',function(t){this.mixin("base");var e=this;if(this.opts.name){var n=this.getAdInstance().getAdStore();this.componentData=n.getComponentState(this.opts.name),this.on("update",function(){this.componentData=n.getComponentState(e.opts.name)})}this.getType=function(t){var e=[];return this.componentData&&this.componentData.type===t&&!this.componentData.isHidden&&e.push({data:this.componentData}),e};var r=["mount","unmount","premount","update","updated","init"];this.on("all",function(t){if(t&&-1===r.indexOf(t))for(var e in this.tags)for(var n=0,i=this.tags[e].length;n<i;n++)this.tags[e][n].trigger.apply(this.tags[e][n],arguments)})})})},{"./alphalfa.tag":32,"./animaniac.tag":33,"./countdown-number-custom.tag":35,"./countdown-number-text.tag":36,"./countdown.tag":37,"./countdowner.tag":38,"./gallery.tag":39,"./graphic.tag":40,"./minimal-video.tag":41,"./panel.tag":42,"./reely.tag":43,"./rotator.tag":44,"./rotatorbutton.tag":45,"./slider-rotator.tag":46,"./youtube.tag":47,riot:114}],35:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("countdown-number-custom",'<div class="countdown-number-custom countdown-number-custom-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.frames=[],this.options={},this.createFrames=function(){for(var t=0;t<this.options.sheetHeight;t+=this.options.frameHeight)for(var e=0;e<this.options.sheetWidth;e+=this.options.frameWidth)this.frames.push(-e+"px "+-t+"px ")},this.createOptions=function(){this.options.frameHeight=this.opts.data.rect.height,this.options.frameWidth=this.opts.data.rect.width,this.options.sheetHeight=11*this.options.frameHeight,this.options.sheetWidth=10*this.options.frameWidth,this.options.source=this.opts.data.spritesheet.url||"https://m.media-amazon.com/images/G/01/IMDb/design/tarnhelm/countdown-number-custom/countdown.png",this.options.date=this.opts.data.targetDate||"Thu, 01 Jan 1970 00:00:00 +0000"},this.getDisplayIndex=function(){var t=this.opts.data.remaining[this.opts.data.timeUnit]+10;return!this.opts.data.padZeros&&this.opts.data.remaining[this.opts.data.timeUnit]<=9&&(t=this.opts.data.remaining[this.opts.data.timeUnit]),t},this.setFrame=function(t,e){var n=t||e?"-"+(t||0)+"px -"+(e||0)+"px":this.frames[this.getDisplayIndex()];this.addStyleRule("background","url("+this.options.source+") "+n+" / 1000% 1100% no-repeat")},this.on("mount",function(){this.createOptions(),this.setFrame(0,this.options.frameHeight),this.createFrames()}),this.on("update",function(){this.setFrame()})})})},{riot:114}],36:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("countdown-number-text",'<div class="countdown-number-text countdown-number-text-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"> {getDisplayValue()} </div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.updateTextStyle=function(){this.addStyleRule("font-size",this.determinedRect.height)},this.pad=function(t){return 9<t?t:"0"+t},this.getDisplayValue=function(){var t=this.opts.data.remaining[this.opts.data.timeUnit];return this.opts.data.padZeros&&(t=this.pad(t)),t},this.on("update",this.updateTextStyle)})})},{riot:114}],37:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("countdown",'<div class="countdown" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div if="{this.opts.data.remaining.totalMs || this.opts.data.showAfterEnd}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.triggerBackgroundState=function(){this.opts.data.remaining.totalMs||this.opts.data.useAlternateBackground||!this.opts.data.alternateBackground||this.getAdInstance().getActionHandler().trigger({actionName:"set-alternate-background",componentName:this.opts.data.name})},this.on("update",function(){this.triggerBackgroundState(),this.setBackground()})})})},{riot:114}],38:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("countdowner",'<div id="{this.opts.data.name}" class="countdowner th-countdown" riot-style="{getTagStyleString()}"><div class="th-countdown-inject" id="{\'th-countdown-\' + this.opts.data.name}"></div></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("zoolander"),this.initCountdowner=function(){for(var t=this.root.getElementsByClassName("th-countdown-inject")[0],e=this.getAdIframeZoolander(),n={el:t,targetDate:new Date(this.opts.data.targetDate),zoolander:e},i=["splitChar","hideAfterRelease","periodContainerCss","periodCountCss","doPad","printLabels","labelsBelow","labels","labelsCss"],r=0;r<i.length;r++)null!=this.opts.data[i[r]]&&(n[i[r]]=this.opts.data[i[r]]);new window.ad_design.Countdowner(n)},this.on("mount",function(){this.initCountdowner(),window.Tarnhelm.log('Warning: The "countdowner" component is deprecated and does not support scaling for MobilePTP, please migrate to the "countdown" component.')})})})},{riot:114}],39:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){i("./graphic.tag"),t.tag("gallery",'<div class="gallery th-gallery-parent" riot-style="{getTagStyleString()}"><graphic each="{name, i in this.opts.data.imageUrls}" data="{parent.getPhotoData(i)}" class="th-gallery-image {currentIndex === i ? \'active\' : \'\'}"></graphic><graphic class="th-gallery-arrow prev" data="{this.opts.data.arrowGraphics.previous}"></graphic><graphic class="th-gallery-arrow next" data="{this.opts.data.arrowGraphics.next}"></graphic></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("background"),this.mixin("rect"),this.mixin("action"),this.mixin("action-swipe"),this.mixin("action-transitions");var e=this;this.currentIndex=0,this.maxIndex=this.opts.data.imageUrls.length-1,this.prevButton=null,this.nextButton=null,this.getPhotoData=function(t){return{name:this.opts.data.name+t,source:this.opts.data.imageUrls[t],rect:{anchorX:"right",anchorY:"top",offsetX:0,offsetY:0,height:this.opts.data.rect.height,width:this.opts.data.rect.width}}},this.on("swipeleft",function(){this.incrementIndex(),this.emitTrackingObject("intent","swipeLeft")}),this.on("swiperight",function(){this.decrementIndex(),this.emitTrackingObject("intent","swipeRight")}),this.incrementIndex=function(){e.currentIndex++,e.currentIndex>e.maxIndex&&(e.currentIndex=0),e.update()},this.decrementIndex=function(){e.currentIndex--,e.currentIndex<0&&(e.currentIndex=e.maxIndex),e.update()},this.onPrevClick=function(){this.emitTrackingObject("click","clickPrev"),this.decrementIndex()},this.onNextClick=function(){this.emitTrackingObject("click","clickNext"),this.incrementIndex()},this.on("mount",function(){this.attachTouchActions(),this.prevButton=e.root.getElementsByClassName("prev")[0],this.nextButton=e.root.getElementsByClassName("next")[0],this.prevButton.addEventListener("click",e.onPrevClick),this.nextButton.addEventListener("click",e.onNextClick)}),this.on("unmount",function(){this.detachTouchActions(),this.prevButton.removeEventListener("click",e.onPrevClick),this.nextButton.removeEventListener("click",e.onNextClick)})})})},{"./graphic.tag":40,riot:114}],40:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("graphic",'<div if="{!this.isDisabledNavigationComponent()}" class="graphic" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><img if="{this.opts.data.source}" riot-src="{this.opts.data.source}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"><img if="{this.opts.data.fullAdHoverSource}" riot-src="{this.opts.data.fullAdHoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="ad-hover"><img if="{this.opts.data.hoverSource}" riot-src="{this.opts.data.hoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="hover"></div><div if="{this.isDisabledNavigationComponent()}" class="graphic disabled" riot-style="{getTagStyleString()}"><img if="{this.opts.data.disabledSource}" riot-src="{this.opts.data.disabledSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})})},{riot:114}],41:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("minimal-video",'<div riot-style="{getTagStyleString()}" class="minimal-video"><video webkit-playsinline playsinline muted="true" __autoplay="{this.shouldItAutoplay()}"><source riot-src="{this.opts.data.video.url}"></video></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions"),this.log=function(t){},this.mixin("weblab"),this.mixin("media-interop");var e=this;this.setupVideoAttributes=function(){var t=this.opts.data.video,e=this.getVideoEl();e&&"function"==typeof e.play&&(!1===t.autoplay||t.canplaythroughRequired||(this.shouldObeyMediaInteroperability()||(e.autoplay=!0),this.doAutoplay(e)),t.canplaythroughRequired&&e.addEventListener("canplaythrough",function(){this.requestPlayback({userInitiated:!1})}),t.loop&&(e.loop=!0))},this.play=function(){var t=e.getVideoEl();t&&"function"==typeof t.play&&e.requestPlayback({userInitiated:!1})},this.pause=function(){var t=e.getVideoEl();t&&"function"==typeof t.pause&&(t.pause(),e.setMediaPaused())},this.mute=function(){var t=e.getVideoEl();t&&"boolean"==typeof t.muted&&(t.muted=!0)},this.unmute=function(){var t=e.getVideoEl();t&&"boolean"==typeof t.muted&&(t.muted=!1)},this.reset=function(){var t=e.getVideoEl();t&&"number"==typeof t.currentTime&&(t.currentTime=0)},this.fullscreen=function(){window.Tarnhelm.log("Minimal video does not support fullscreen and normalscreen actions.")},this.normalscreen=this.fullscreen,this.minimalVideoListen=function(){var t=this.getVideoEl();t&&"function"==typeof t.addEventListener&&t.addEventListener("play",this.makeVisible)},this.minimalVideoTeardown=function(){var t=this.getVideoEl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("play",this.makeVisible)},this.initCuepointEngine=function(){var t=e.getVideoEl();t&&(this.cuepointEngine=new ad_design.CuepointEngine({media:t,cuepoints:this.getCuePoints(),observer:this}))},this.on("mount",function(){this.makeInvisible(),this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.setupVideoAttributes(),this.minimalVideoListen(),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","minimal-video"),this.setMediaEnded(),this.minimalVideoTeardown(),this.cuepointEngine.destroy()})})})},{riot:114}],42:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("panel",'<div class="panel" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})})},{riot:114}],43:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("reely",'<div id="{this.opts.data.name}" riot-style="{getTagStyleString()}" class="reely-inject-el"></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("zoolander"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var e=this,n=window.Tarnhelm.getDeviceInfo().isMobileDevice?40:20;this.determineControlBarConfig=function(t){if(!t)return{};for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];n[r]=t[r]}return n},this.getButtonSize=function(t){return t&&t.buttonSize?t.buttonSize:n},this.determineSpritesheetsConfig=function(t){var e={buttonSize:this.getButtonSize(t)};return t&&t.png&&(e.png=t.png),e},this.initReely=function(){var t=this.opts.data,e=this.root.getElementsByClassName("reely-inject-el")[0],n=this.getAdIframeZoolander(),i=this.determineControlBarConfig(t.controls),r=this.determineSpritesheetsConfig(t.spritesheets),o=this.determineSpritesheetsConfig(t.overlaySpritesheets),a=this.getAdInstance()&&this.getAdInstance().getContainerFrame();this.reelyPlayer=new ad_design.Reely({injectEl:e,src:this.opts.data.video.url,zoolander:n,slate:this.opts.data.video.slate||"",autoplay:this.opts.data.video.autoplay||!1,autosound:this.opts.data.video.autosound||!1,controlBar:i,spritesheets:r,overlaySpritesheets:o,iframeId:a?a.id:"",playsInline:void 0===this.opts.data.video.playsInline||this.opts.data.video.playsInline,fullscreen:this.opts.data.video.fullscreen||!1})},this.initCuepointEngine=function(){this.cuepointEngine=new ad_design.CuepointEngine({media:this.reelyPlayer.videoEl,cuepoints:this.getCuePoints(),observer:this})},this.play=function(){e.reelyPlayer.play()},this.pause=function(){e.reelyPlayer.pause()},this.mute=function(){e.reelyPlayer.mute()},this.unmute=function(){e.reelyPlayer.unmute()},this.reset=function(){e.reelyPlayer.reset()},this.fullscreen=function(){e.reelyPlayer.fullscreenMode()},this.normalscreen=function(){e.reelyPlayer.normalScreenMode()},this.on("mount",function(){this.initReely(),this.setVideoEl(this.reelyPlayer.videoEl),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","reely"),this.reelyPlayer.teardown(),this.cuepointEngine.destroy()})})})},{riot:114}],44:[function(r,i,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==i&&void 0!==i.exports){var n=r("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("rotator",'<div class="rotator" riot-style="{getTagStyleString()}"><child name="{activeChildName}"></child></div>',function(t){var e=r("../stores/delegators/wrap.js"),n=r("../stores/retrievers/rotator.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("rotator"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-transitions");var i=this.getAdInstance().getAdStore();this.activeChildName=this.opts.data.childNames[this.opts.data.activeIndex],this.setActiveChildName=function(){var t=this.opts.data.childNames[this.opts.data.activeIndex];if(t!==this.activeChildName){var e=this;this.activeChildName=void 0,window.setTimeout(function(){e.activeChildName=t,e.update()},1)}},this.on("update",this.setActiveChildName),this.hasWrapConfig=function(){return!(!this.opts.data.wrapConfig||!this.opts.data.wrapConfig.enabled)},this.updateWrap=function(){this.hasWrapConfig()&&e.triggerRotatorWrapSwap(this.opts.data,i.getState())},this.resizeAdContainer=function(){if("expander"===this.opts.data.name){var t=window.Tarnhelm.getAd(i.getAdId()),e=n.getActiveChildComponent(this.opts.data,i.getComponentLibrary());t.resizeAdContainer(e.rect)}},this.on("update",this.updateWrap),this.on("update",this.resizeAdContainer)})})},{"../stores/delegators/wrap.js":71,"../stores/retrievers/rotator.js":77,riot:114}],45:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){i("./graphic.tag"),t.tag("rotatorbutton",'<div class="rotatorbutton" riot-style="{getTagStyleString()}" onclick="{handleClickAndRotatorbuttonClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><graphic data="{graphicData}"></graphic></div>',function(t){var i=this;this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.handleRotatorbuttonClick=function(t){if(!this.isActive()){var e=i.opts.data;if(e.rotatorName){var n={actionName:"route",data:{rotatorConfigs:[{name:e.rotatorName,index:e.rotatorIndex}]}};e.rotatorConfigs&&e.rotatorConfigs.length&&(n.data.rotatorConfigs=n.data.rotatorConfigs.concat(e.rotatorConfigs)),n.data.showComponents=e.showComponents,n.data.hideComponents=e.hideComponents,this.getAdInstance().getActionHandler().trigger(n)}}},this.handleClickAndRotatorbuttonClick=function(t){this.handleClick(t),this.handleRotatorbuttonClick(t),this.hasAction("click")||this.emitTrackingObject("click","click")},this.getGraphicData=function(){var t=this.opts.data,e={description:t.description,source:t.source,hoverSource:t.hoverSource,fullAdHoverSource:t.fullAdHoverSource,disabledSource:t.disabledSource,rect:{anchorX:"left",anchorY:"top",offsetX:0,offsetY:0,height:t.rect.height,width:t.rect.width}};return this.isActive()&&(e.source=t.activeSource),e},this.isActive=function(){var t=this.getAdInstance().getAdStore().getComponentState(this.opts.data.rotatorName);return t&&this.opts.data.rotatorIndex===t.activeIndex},this.setCursor=function(){this.isActive()?this.removeStyleRule("cursor"):this.addStyleRule("cursor","pointer")},this.setState=function(){this.graphicData=this.getGraphicData(),this.setCursor()},this.setState(),this.on("update",function(){this.setState()})})})},{"./graphic.tag":40,riot:114}],46:[function(l,i,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==i&&void 0!==i.exports){var n=l("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("slider-rotator",'<div class="slider-rotator" riot-style="{getTagStyleString()}"><div class="slide-offset js-offset" riot-style="{getSlideOffsetInitialStyle()}"><div each="{name, i in opts.data.childNames}" class="slide"><child name="{name}"></child></div></div><graphic class="th-slider-arrow prev" if="{this.shouldShowArrowPrev()}" data="{this.opts.data.arrowGraphics.previous}" onclick="{this.onPrevClick}"></graphic><graphic class="th-slider-arrow next" if="{this.shouldShowArrowNext()}" data="{this.opts.data.arrowGraphics.next}" onclick="{this.onNextClick}"></graphic></div>',function(t){var r=l("../../modules/numberUtils.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("rotator"),this.mixin("action"),this.mixin("action-transitions"),this.mixin("action-touch"),this.resting=!0,this.on("indexChanged",function(){this.startVisibleLoop(),this.handleIndexChanged()}),this.handleIndexChanged=function(){var t={actionName:"video:pause-all:under-ancestor",ancestorName:this.opts.data.name};this.triggerActions([t])};var e,o,a,s,n,u,i=window.Tarnhelm.getDeviceInfo().canTransitionTransforms;i||window.Tarnhelm.log("Slider NOT supporting touch actions; We've determined that we cannot transition transforms."),this.addStyleRule("overflow","hidden"),this.addStyleRule("white-space","nowrap"),this.getRestingStateOffset=function(){return this.opts.data.activeIndex*this.opts.data.rect.width*-1},this.getSliderStateData=function(){return{activeIndex:this.opts.data.activeIndex,slideWidth:this.opts.data.rect.width,restingOffset:this.getRestingStateOffset()}},this.getTransitionString=function(t){return"transform "+t+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getOffsetString=function(t){return"translate3d("+t+"px,0,0)"},this.getMaxOffset=function(t,e){return this.isAtBeginning()?t+.35*e:t+e},this.getMinOffset=function(t,e){return this.isAtEnd()?t-.35*e:t-e},this.isAtBeginning=function(){return 0===this.opts.data.activeIndex},this.isAtEnd=function(){var t=this.opts.data.childNames.length-1;return this.opts.data.activeIndex===t},this.setOffsetDivStyle=function(t,e){var n=this.root.getElementsByClassName("js-offset")[0];this.setOffsetDivTransition(e,n),n.style.transform=this.getOffsetString(t)},this.setOffsetDivTransition=function(t,e){(e||this.root.getElementsByClassName("js-offset")[0]).style.transition=null==t?"none":this.getTransitionString(t)},this.currAnimProps=null,this.sliderHandleTouchStart=function(t){clearTimeout(this.slideCompleteTimeout),this.setOffsetDivTransition(null);var e=this.getSliderStateData();this.currAnimProps={hasMovedOffset:!1,currTouchStartOffset:this.parseCurrentOffset(),maxPan:this.getMaxOffset(e.restingOffset,e.slideWidth),minPan:this.getMinOffset(e.restingOffset,e.slideWidth)},this.startVisibleLoop(),this.emitTrackingObject("intent","touchStart")},this.sliderHandleTouchMove=function(t){var e=this.currAnimProps;if(t&&!t.isVerticalMove){e.hasMovedOffset=!0,this.getSliderStateData();var n=t.totalDistance.x,i=e.currTouchStartOffset+n;i=r.clamp(i,e.minPan,e.maxPan),this.setOffsetDivStyle(i,null)}else e&&e.hasMovedOffset&&(this.returnToResting(),this.currAnimProps=null)},this.sliderHandleTouchEnd=function(t){if(this.currAnimProps=null,t&&!t.isVerticalMove){this.emitTrackingObject("intent","touchEnd");var e=this.getSliderStateData(),n=this.parseCurrentOffset(),i=this.getOffsetFromResting(e,n),r=0!==t.velocity.x,o=i<0,a=t.velocity.x<0;if(r&&o!==a)this.returnToResting();else{var s=o,u=this.testNeedsIndexChange(e,t),l=s&&this.isAtEnd()||!s&&this.isAtBeginning();if(u&&!l)return this.doSlideChange(t,e,s),void this.emitTrackingObject("intent","swipe"+(s?"Left":"Right"));this.returnToResting()}}},this.doSlideChange=function(t,e,n){var i=n?-1*e.slideWidth:e.slideWidth,r=e.restingOffset+i,o=.85*t.transitionLengthFactor,a=this.determineTransitionLength(r,o);this.setOffsetDivStyle(r,a);var s=n?this.incrementIndex:this.decrementIndex;this.callIndexChangeAfterTransition(s.bind(this),a)},this.callIndexChangeAfterTransition=function(t,e){clearTimeout(this.slideCompleteTimeout),e?this.slideCompleteTimeout=setTimeout(t,1e3*e):(t(),this.stopVisibleLoop()),t=null},this.testNeedsIndexChange=function(t,e){var n=!1;if(n=15<Math.abs(e.velocity.x))return n;var i=this.parseCurrentOffset();return.4*t.slideWidth<Math.abs(this.getOffsetFromResting(t,i))},this.getOffsetFromResting=function(t,e){return e-t.restingOffset},this.returnToResting=function(){var t=this.getRestingStateOffset(),e=this.determineTransitionLength(t,1.5);this.setOffsetDivStyle(t,e),this.startVisibleLoop()},this.parseCurrentOffset=function(){var t=this.root.getElementsByClassName("js-offset")[0];if(!t||!t.style||!t.style.transform)return this.getRestingStateOffset();var e=t.style.transform.split("translate3d(")[1].split(",")[0];return parseInt(e,10)},this.determineTransitionLength=function(t,e){var n=this.getSliderStateData(),i=this.parseCurrentOffset(),r=e||.85,o=Math.abs(i-t)/n.slideWidth;return o<1&&(r*=o),r},this.getSlideOffsetInitialStyle=function(){var t=this.getSliderStateData().restingOffset,e=this.determineTransitionLength(t),n={height:this.opts.data.rect.height+"px"};return i?(n.transition=this.getTransitionString(e),n.transform=this.getOffsetString(t)):(n.transition=this.getNonTranslateTransitionString(.85),n.left=this.getNonTranslateOffsetString(t)),this.cssStringFromCSSObject(n)},i&&(this.addTouchStartHandler(this.sliderHandleTouchStart),this.addTouchMoveHandler(this.sliderHandleTouchMove),this.addTouchEndHandler(this.sliderHandleTouchEnd)),this.shouldShowArrowPrev=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.previous&&!this.isAtBeginning()},this.shouldShowArrowNext=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.next&&!this.isAtEnd()},this.manualUpdateNonTranslateOffsetDiv=function(t,e){e.style.left=this.getNonTranslateOffsetString(t)},this.getNonTranslateTransitionString=function(t){return"left "+t+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getNonTranslateOffsetString=function(t){return t+"px"},this.on("update",function(){if(!i){var t=this.root.getElementsByClassName("js-offset")[0];if(!t)return;this.manualUpdateNonTranslateOffsetDiv(this.getRestingStateOffset(),t)}}),this.onPrevClick=function(){this.decrementIndex(),this.emitTrackingObject("click","clickPrev")},this.onNextClick=function(){this.incrementIndex(),this.emitTrackingObject("click","clickNext")},this.on("mount",function(){this.root.getElementsByClassName("js-offset")[0].addEventListener("transitionend",function(t){this.stopVisibleLoop()}.bind(this)),e=this.opts.data.activeIndex,o=[e],a=this.root.getElementsByClassName("slide"),s=this.root.children[0],this.tags.child&&this.tags.child[e]?(this.tags.child[e].trigger("slideMoveIn"),this.tags.child[e].trigger("slideActivated")):this.tags.child&&this.tags.child.trigger("slideActivated")}),this.on("unmount",function(){this.stopVisibleLoop()}),this.determineVisibleSlides=function(){var t,e=[],n=s.getBoundingClientRect(),i=a.length;for(t=0;t<i;t++){var r=a[t].getBoundingClientRect();if(r.left<n.right&&r.right>n.left)e.push(t);else if(r.left>n.right)break}return e},this.startVisibleLoop=function(){this.resting&&(this.resting=!1,u())},this.stopVisibleLoop=function(){this.resting||(this.resting=!0,n())},n=function(){isNaN(e)||e===this.opts.data.activeIndex||(this.tags.child[e].trigger("slideDeactivated"),this.tags.child[this.opts.data.activeIndex].trigger("slideActivated"),e=this.opts.data.activeIndex)}.bind(this),u=function(){var t,e=this.determineVisibleSlides(),n=Math.min(e[0],o[0]),i=Math.max(e[e.length-1],o[o.length-1]);for(t=n;t<=i;t++)-1===e.indexOf(t)&&-1!==o.indexOf(t)?this.tags.child[t].trigger("slideMoveOut"):-1!==e.indexOf(t)&&-1===o.indexOf(t)&&this.tags.child[t].trigger("slideMoveIn");o=e,this.resting||requestAnimationFrame(u)}.bind(this)})})},{"../../modules/numberUtils.js":20,riot:114}],47:[function(i,r,t){!function(t,e){if("function"==typeof define&&void 0!==define.amd)define(["riot"],function(t){e(t)});else if(void 0!==r&&void 0!==r.exports){var n=i("riot");e(n)}else e(t.riot)}(this,function(t){t.tag("youtube",'<div class="youtube" riot-style="{getTagStyleString()}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div class="youtube_injection"></div></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("video"),this.mixin("resize"),this.firstStart=!0,this.actionHandler=this.getAdInstance().getActionHandler();var e=this;this.loadYoutubeAPI=function(){window.onYouTubeIframeAPIReady=function(){window.Tarnhelm.triggerGlobalAction({actionName:"api-ready:youtube"})};var t="tarnhelm_yt_script",e=document.getElementById(t);if(!e){(e=document.createElement("script")).id=t,e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}},this.getAutoplayValue=function(){return e.opts.data.video.autoplay?1:0},this.initYoutubePlayer=function(){e.player=new YT.Player(e.root.firstChild.firstChild,{height:e.opts.data.rect.height,width:e.opts.data.rect.width,videoId:e.opts.data.video.id,playerVars:{autohide:1,autoplay:e.getAutoplayValue(),rel:0,showinfo:0,wmode:"transparent"},events:{onStateChange:function(t){t.data===YT.PlayerState.PLAYING&&e.firstStart&&(e.firstStart=!1,e.handleEvent(t,"videoStart")),t.data===YT.PlayerState.ENDED&&e.handleEvent(t,"videoComplete")}}})},this.play=function(){e.player.playVideo()},this.pause=function(){e.player.pauseVideo()},this.mute=function(){e.player.mute()},this.unmute=function(){e.player.unMute()},this.reset=function(){e.player.stopVideo()},this.on("mount",function(){this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers),window.YT?this.initYoutubePlayer():(this.actionHandler.one("api-ready:youtube",this.initYoutubePlayer),"function"!=typeof window.onYouTubeIframeAPIReady&&this.loadYoutubeAPI())}),this.on("unmount",function(){e.player.destroy()}),this.on("resize",function(){e.player.getIframe().style.width=e.determinedRect.width,e.player.getIframe().style.height=e.determinedRect.height})})})},{riot:114}],48:[function(t,e,n){e.exports={MINIMAL_VIDEO_NAME:"minimal-video",INLINE20_SLOT_NAME:"inline20",GRANTED:"granted",DENIED:"denied",PENDING:"pending"}},{}],49:[function(t,e,n){var i=t("riot"),r={start:"10ms",firstQuartile:"25%",midpoint:"50%",thirdQuartile:"75%",complete:"90%"},o={init:function(){if(this.cuePoints=[],this.hasCuePointActions()){var t,e=this.getCuePointActions(),n=e.length,i=0;for(this.opts.data.video.viconst;i<n;i++)t={time:e[i].timeString,data:e[i]},this.cuePoints.push(t)}this.addCuePointTracking()},onCuepoint:function(t){this.triggerActions(t.data.actions)},getCuePoints:function(){return this.cuePoints},getCuePointActions:function(){var t=this.opts.data.actions||{};return t&&t.cuePoints?t.cuePoints:[]},hasCuePointActions:function(){return 0<this.getCuePointActions().length},getCuePointAt:function(t){for(var e=0,n=this.cuePoints.length;e<n;e++)if(this.cuePoints[e].time===t)return this.cuePoints[e];return null},addCuePointTracking:function(){var t,e;if(this.opts&&this.opts.data&&this.opts.data.name)for(t in r)(e=this.getCuePointAt(r[t]))||(e={time:r[t],data:{actions:[]}},this.cuePoints.push(e)),e.data.actions=e.data.actions.concat([{actionName:"track:"+this.opts.data.name,eventType:"media",eventSubType:t}]);else console.log("this.opts.data.name is undefined",this)}};i.mixin("action-cuepoint",o)},{riot:114}],50:[function(t,e,n){t("riot").mixin("action-swipe",{init:function(){this.attachTouchActions||this.mixin("action-touch"),this.hasTouch&&this.addTouchEndHandler(this.handleSwipeEnd)},handleSwipeEnd:function(t){!t.isMoveY&&t.isSwipe&&(t.totalDistance.x<0?this.handleSwipeActions("swipeleft"):this.handleSwipeActions("swiperight"))},handleSwipeActions:function(t){this.trigger("swipe"),this.trigger(t),this.hasAction("swipe")&&this.triggerActions(this.opts.data.actions.swipe),this.hasAction(t)&&this.triggerActions(this.opts.data.actions[t])}})},{riot:114}],51:[function(t,e,n){var i=t("riot"),r=(t("../../modules/functionUtils.js"),t("../../modules/touchData.js")),o={init:function(){this.touchStartHandlers=[],this.touchMoveHandlers=[],this.touchEndHandlers=[],this.touchMoveRAF=null,this.hasTouch=window.Tarnhelm.getDeviceInfo().hasTouch,this.hasTouch&&(this.registerTeardownFunction||this.mixin("teardown"),this.registerTeardownFunction(this.detachTouchActions),this.resetTouchData(),this.on("mount",function(){this.attachTouchActions()}),window.Tarnhelm.getIsDebug()&&null!=this.setupTouchDebugVisual&&this.setupTouchDebugVisual())},setupTouchDebugVisual:null,attachTouchActions:function(){this.boundTouchMoveAnimationFrame=this.handleTouchMoveAnimationFrame.bind(this),this.root.addEventListener("touchstart",this.handleTouchStart),this.root.addEventListener("touchmove",this.handleTouchMove),this.root.addEventListener("touchend",this.handleTouchEnd)},detachTouchActions:function(){this.root.removeEventListener("touchstart",this.handleTouchStart),this.root.removeEventListener("touchmove",this.handleTouchMove),this.root.removeEventListener("touchend",this.handleTouchEnd),this.boundTouchMoveAnimationFrame=null,this.throttledHandleTouchMove=null},resetTouchData:function(){this.touchData=null,this.isTouched=!1},stopEvent:function(t){var e=!!this.touchData,n=!!e&&!!this.touchData.isTouchTypeDetermined,i=!!e&&!!this.touchData.isVerticalMove;e&&n&&!i&&t&&(t.stopPropagation(),t.preventDefault())},addTouchStartHandler:function(t,e){this._addTouchEventHandler(this.touchStartHandlers,t,e)},addTouchEndHandler:function(t,e){this._addTouchEventHandler(this.touchEndHandlers,t,e)},addTouchMoveHandler:function(t,e){this._addTouchEventHandler(this.touchMoveHandlers,t,e)},_addTouchEventHandler:function(t,e,n){var i=n||this;t.push({callback:e,thisArg:i})},handleTouchStart:function(t){this.isTouched=!0,this.touchData=new r(t),this.callHandlers(this.touchStartHandlers,this.touchData,t),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame)},handleTouchMove:function(t){this.stopEvent(t),this.touchData&&this.touchData.addTouchMoveData(t)},handleTouchMoveAnimationFrame:function(){this.touchData&&(this.callHandlers(this.touchMoveHandlers,this.touchData),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame))},handleTouchEnd:function(t){window.cancelAnimationFrame(this.touchMoveRAF),this.touchData&&(this.touchData.finalizeTouchDataOnEnd(t),this.callHandlers(this.touchEndHandlers,this.touchData)),this.resetTouchData()},callHandlers:function(t,e,n){if(t.length){var i=[e,n];if(t.length)for(var r=0;r<t.length;r++)this.callHandler(t[r],i)}},callHandler:function(t,e){t.callback.apply(t.thisArg,e)}};i.mixin("action-touch",o)},{"../../modules/functionUtils.js":15,"../../modules/touchData.js":25,riot:114}],52:[function(t,e,n){t("riot").mixin("action-transitions",{init:function(){var t=this,e=this.getAdInstance().getActionHandler();this.hasAction("transitionsOutStart")&&e.on("transition-component-out:"+t.opts.data.name,function(){e.triggerMany(t.opts.data.actions.transitionsOutStart)}),this.hasAction("transitionsOutComplete")&&e.on("transition-component-out:"+t.opts.data.name+":complete",function(){e.triggerMany(t.opts.data.actions.transitionsOutComplete)})}})},{riot:114}],53:[function(t,e,n){t("riot").mixin("action-user",{init:function(){this.hasAction("click")&&this.addStyleRule("cursor","pointer")},handleClick:function(t){this.handleEvent(t,"click")},handleHoverIn:function(t){this.handleEvent(t,"hoverIn")},handleHoverOut:function(t){this.handleEvent(t,"hoverOut")}})},{riot:114}],54:[function(t,e,n){var i=t("riot"),r=["update","updated"],o={init:function(){if(this.hasAction("init")){var t=this.opts.data.actions.init;this.triggerActions(t)}this.on("all",function(t){if(t&&this.hasAction(t)&&-1===r.indexOf(t)){var e=this.opts.data.actions[t];this.triggerActions(e)}})},handleEvent:function(t,e){if(t.preventUpdate=!0,!this.hasAction(e))return!0;var n=this.opts.data.actions[e];return this.triggerActions(n),"click"===e?this.emitTrackingObject(e,e):/^video/i.test(e)?this.emitTrackingObject("video",e):this.emitTrackingObject("intent",e),!0},triggerActions:function(t){this.isDisabledNavigationComponent()?window.Tarnhelm.log('Suppressing actions for navigation component "'+this.opts.data.name+'", navigation is currently disabled.'):this.getAdInstance().getActionHandler().triggerMany(t)},hasAction:function(t){return this.opts.data.actions&&this.opts.data.actions[t]&&this.opts.data.actions[t].length}};i.mixin("action",o)},{riot:114}],55:[function(t,e,n){var i=t("riot"),r=["background-attachment","background-image","background-position","background-repeat","background-size"],o={init:function(){this.setBackground(),this.on("update",this.setBackground)},setBackground:function(){var t,e=this.opts.data||{};(t=e.useAlternateBackground?e.alternateBackground||{}:e.background||{}).color?this.addStyleRule("background-color",t.color):this.removeStyleRule("background-color"),t.source?(this.addStyleRule("background-image","url("+t.source+")"),t.attachment?this.addStyleRule("background-attachment",t.attachment):this.removeStyleRule("background-attachment"),t.position?this.addStyleRule("background-position",t.position):this.removeStyleRule("background-position"),t.repeat?this.addStyleRule("background-repeat",t.repeat):this.addStyleRule("background-repeat","no-repeat"),t.size?this.addStyleRule("background-size",t.size):this.addStyleRule("background-size",this.getBackgroundSize())):this.removeStyleRules(r)},getBackgroundSize:function(){return this.determinedRect.width+" "+this.determinedRect.height}};i.mixin("background",o)},{riot:114}],56:[function(t,e,n){var i=t("riot"),c={start:"//imdb.com/tr/?pt=video&spt=displayad&ht=actionOnly&pageAction=video-view-t0&const=ad",firstQuartile:"//imdb.com/tr/?pt=video&spt=displayad&ht=actionOnly&pageAction=video-view-t25&const=ad",midpoint:"//imdb.com/tr/?pt=video&spt=displayad&ht=actionOnly&pageAction=video-view-t50&const=ad",thirdQuartile:"//imdb.com/tr/?pt=video&spt=displayad&ht=actionOnly&pageAction=video-view-t75&const=ad",complete:"//imdb.com/tr/?pt=video&spt=displayad&ht=actionOnly&pageAction=video-view-t100&const=ad"},r={getAdInstance:function(){if(this._adInstance)return this._adInstance;for(var t,e=this;!t;)t=(e=e.parent)._adInstance;return this._adInstance=t},getAdStore:function(){return this.getAdInstance().getAdStore()},getComponentLibrary:function(){return this.getAdStore().getComponentLibrary()},isDisabledNavigationComponent:function(){return!!this.opts.data.isNavigationComponent&&this.getAdInstance().getAdStore().getNavigationComponentsDisabledFlag()},init:function(){var e="";if(this.data&&this.data.name&&(e=this.data.name),e){var n=this,t=this.getAdInstance().getActionHandler();t.on("track:"+e,function(t){t&&t.eventType?n.emitTrackingObject(t.eventType,t.eventSubType):window.Tarnhelm.log("Tracking event called as an action, track:"+e+", but no eventType was passed. Ignoring.")}),this.on("unmount",function(){t.off("track:"+e)})}},emitTrackingObject:function(t,e,n){var i=this.getAdInstance(),r=i.getTrackingConsumer();if(r){var o,a,s,u=i.getContainerFrame().contentDocument,l=u.hasOwnProperty("ad")&&u.ad.hasOwnProperty("cid")?u.ad.cid:null;if(o={unitName:i.getName(),eventType:t,componentName:this.componentData.name,componentPath:this.getComponentPath(),componentType:this.componentData.type,timeElapsed:i.timeSinceInit(),data:{label:this.componentData.description||this.componentData.name,eventSubType:e}},"reely"===this.componentData.type&&null!==l&&(c[e]&&(a=c[e]+l,(new Image).src=a,window.Tarnhelm.log("  - reely event["+e+"] = "+a)),"start"===e&&(a="//imdb.com/tr/?pt=video&spt=displayad&ht=actionOnly&pageAction=displayad&const=ad"+l,(new Image).src=a,window.Tarnhelm.log("  - reely video 'intent' = "+a))),n)for(s in n)o.data[s]=n[s];r(o)}},getComponentPath:function(){for(var t=this.getAdInstance().getName(),e=this.componentData.name,n=this.parent,i=this.componentData.name;n.componentData&&n.componentData.name!==t;)i!==n.componentData.name&&(e=n.componentData.name+"."+e,i=n.componentData.name),n=n.parent;return this.getComponentPath=function(){return e},e}};i.mixin("base",r)},{riot:114}],57:[function(t,e,n){var i=t("riot"),r=t("../constants").MINIMAL_VIDEO_NAME,l=t("../constants").INLINE20_SLOT_NAME,o=t("../constants").GRANTED,a=t("../constants").DENIED,s=t("../constants").PENDING,u={init:function(){this.setMediaKey=null,this.lastPermission="",this.hasSubscribed=!1,this.shouldObeyMediaInteroperability()&&this.subscribeToMediaNotifications()},getSlotId:function(){var t=this.getAdInstance(),e=t?t.getContainerFrame():null;return e?e.id:""},getAssetName:function(){return this.getSlotId()?this.getSlotId():r},requestPlayback:function(t){if(this.shouldObeyMediaInteroperability()){var e=this,n=t||{};if(!this.hasSubscribed)return this.subscribeToMediaNotifications({shouldRequestPlayback:!0});if(this.lastPermission.toLowerCase()===o){var i=this.getVideoEl();i&&(i.play(),this.setMediaPlay())}this.getBridge().requestPlayback({name:this.getAssetName(),userInitiated:!!n.userInitiated,videoFrame:this.getVideoFrame()}).then(function(t){e.log("requestPlayback success"),e.onMediaPermissionsChanged(t)},function(t){e.log("requestPlayback error: "+JSON.stringify(t))})}else this.getVideoEl().play()},setMediaPlay:function(){this.setStatus("setMediaPlay")},setMediaPaused:function(){this.setStatus("setMediaPaused")},setMediaEnded:function(){this.getBridge().isMediaOrchestratorBridge?this.setStatus("setMediaEnded",{isMinimalVideo:!0}):this.setStatus("setMediaEnded")},setStatus:function(e,t){if(this.shouldObeyMediaInteroperability()){this.log(e);var n=this,i=this.getBridge()[e],r={key:this.setMediaKey,permission:this.lastPermission};(t?i(r,t):i(r)).then(function(t){n.log(e+" success")},function(t){n.log(e+" error: "+JSON.stringify(t))})}},subscribeToMediaNotifications:function(t){var e=!!(t||{}).shouldRequestPlayback;if(!this.hasSubscribed){var n=this.getBridge(),i={onMediaPermissionsChanged:this.onMediaPermissionsChanged.bind(this)};n.isMediaOrchestratorBridge&&(i.name=this.getAssetName()),this.hasSubscribed=n.subscribe(i),this.log("subscribeToMediaNotifications: "+this.hasSubscribed),e&&this.requestPlayback({userInitiated:!1})}},onMediaPermissionsChanged:function(t){if(t&&t.permission&&this.shouldObeyMediaInteroperability()){var e=t.permission.toLowerCase();switch(this.setMediaKey=t.key,this.lastPermission=t.permission,e){case o:this.log("onMediaPermissionsChanged: "+o);var n=this.getVideoEl();n&&(n.play(),this.setMediaPlay());break;case a:this.log("onMediaPermissionsChanged: "+a),this.pause();break;case s:this.log("onMediaPermissionsChanged: "+s);break;default:this.log("onMediaPermissionsChanged unexpected permission: "+e)}}},getVideoFrame:function(){var t=this.getVideoEl(),e=t?t.getBoundingClientRect():{},n=0;t&&t.ownerDocument&&t.ownerDocument.defaultView&&(n=t.ownerDocument.defaultView.innerWidth);var i=(n-window.top.innerWidth)/2,r={x:0<i&&this.getSlotId()===l?e.x-i:e.x,y:e.y,width:e.width,height:e.height},o=window.top.Tarnhelm.getDeviceInfo();if(this.getBridge().isMediaOrchestratorBridge&&o.isMobileSite){var a=t.ownerDocument.defaultView,s=a?a.frameElement||a.iframe:null,u=s?s.getBoundingClientRect():{x:0,y:0};r.x+=u.x+window.scrollX,r.y+=u.y+window.scrollY}return r}};i.mixin("media-interop",u),e.exports=u},{"../constants":48,riot:114}],58:[function(t,e,n){var i=t("riot"),r=t("../../modules/rectProcessor.js"),o={init:function(){this.setRect(),this.on("update",this.setRect)},setRect:function(){var t=(this.opts.data||{}).rect||{};this.removeStyleRules(["top","right","bottom","left"]),this.determinedRect=r.process(t),this.addStyleRule("position",this.determinedRect.position),this.addStyleRule(this.determinedRect.anchorX,this.determinedRect.offsetX),this.addStyleRule(this.determinedRect.anchorY,this.determinedRect.offsetY),this.addStyleRule("height",this.determinedRect.height),this.addStyleRule("width",this.determinedRect.width)}};i.mixin("rect",o)},{"../../modules/rectProcessor.js":22,riot:114}],59:[function(t,e,n){t("riot").mixin("resize",{init:function(){this._isMounted=!1,this._currentWidth=this.opts.data.rect.width,this.on("mount",function(){this._isMounted=!0}),this.on("update",this._checkForResize)},_checkForResize:function(){this._isMounted&&this.opts.data.rect.width!==this._currentWidth&&(this._currentWidth=this.opts.data.rect.width,this.trigger("resize"))}})},{riot:114}],60:[function(t,e,n){t("riot").mixin("rotator",{init:function(){this.registerTeardownFunction||this.mixin("teardown"),this.initRotatorEventHandlers(),this.registerTeardownFunction(this.teardownRotatorEventHandlers)},initRotatorEventHandlers:function(){this.prevActiveIndex=this.activeIndex,this.on("update",this.handleRotatorUpdate)},teardownRotatorEventHandlers:function(){this.off("update",this.handleRotatorUpdate)},incrementIndex:function(){var t={actionName:"rotator:increment-index",componentName:this.opts.data.name};this.triggerActions([t])},decrementIndex:function(){var t={actionName:"rotator:decrement-index",componentName:this.opts.data.name};this.triggerActions([t])},handleRotatorUpdate:function(){var t=this.opts.data.activeIndex,e=this.prevActiveIndex;null!=e&&e!==t&&(this.trigger("indexChanged"),this.emitTrackingObject("intent","navigateRotator",{index:t}),this.hasAction("indexChanged")&&this.triggerActions(this.opts.data.actions.indexChanged)),this.prevActiveIndex=t}})},{riot:114}],61:[function(t,e,n){var i=t("riot"),r={transform:["-webkit-transform","-ms-transform"],"transform-origin":["-webkit-transform-origin","-moz-transform-origin","-ms-transform-origin","-o-transform-origin"],transition:["-webkit-transition","-moz-transition","-o-transition"],filter:["-webkit-filter","-moz-filter","-o-filter"]},o={init:function(){this.initTagStyles(),this.addCustomCSSTagStyles(),this.on("update",this.setTagStyleString)},initTagStyles:function(){this.tagStyles={},this.tagStyleString=""},addCustomCSSTagStyles:function(){var t=this.opts.data.css;t&&this.addStyleRules(t)},addStyleRule:function(t,e){this.tagStyles[t]=e;var n=r[t];if(n)for(var i=0;i<n.length;i++)this.tagStyles[n[i]]=e},addStyleRules:function(t){for(var e in t)t.hasOwnProperty(e)&&this.addStyleRule(e,t[e])},removeStyleRule:function(t){delete this.tagStyles[t]},removeStyleRules:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)this.removeStyleRule(t[e])},setVisibilityStyle:function(){null!=this.opts.data.isInvisible&&(this.opts.data.isInvisible?this.addStyleRule("visibility","hidden"):this.addStyleRule("visibility","visible"))},makeInvisible:function(){var t=this.tagStyles.visibility;(t||"hidden"!==t)&&(this.addStyleRule("visibility","hidden"),this.update())},makeVisible:function(){var t=this.tagStyles.visibility;t&&"visible"!==t&&(this.addStyleRule("visibility","visible"),this.update())},getTagStyleString:function(){var t="";return this.setVisibilityStyle(),t+this.cssStringFromCSSObject(this.tagStyles)},cssStringFromCSSObject:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e},setTagStyleString:function(){this.tagStyleString=this.getTagStyleString()}};i.mixin("styles",o)},{riot:114}],62:[function(t,e,n){t("riot").mixin("teardown",{init:function(){var t=this;this.teardownQueue=[],this.on("unmount",function(){t.unmountTeardown()})},registerTeardownFunction:function(t,e){this.teardownQueue.push({callback:t,thisArg:e||this})},unmountTeardown:function(){for(var t=0;t<this.teardownQueue.length;t++){var e=this.teardownQueue[t];e.callback.call(e.thisArg)}}})},{riot:114}],63:[function(t,e,n){var i=t("riot"),r=t("../../modules/transitionStyleGenerator.js"),o={init:function(){if(this.transitionStyles=this.getAllTransitionStyles(),this.hasTransitionsIn()&&this.hasTransitionsIn()&&(this.setTransitionsStartState(this.transitionStyles.in),this.on("mount",function(){this.setTransitionsEndState(this.transitionStyles.in)})),this.hasTransitionsOut()){var t=this,e=this.getAdInstance().getActionHandler(),n="transition-component-out:"+this.opts.data.name;e.on(n,function(){t.setTransitionsStartState(t.transitionStyles.out),t.setTransitionsEndState(t.transitionStyles.out)})}},getAllTransitionStyles:function(){var t=this.opts.data,e={in:{},out:{}};return this.hasTransitionsIn()&&(e.in=r.calculateTransitionStyles(t.transitionsIn)),this.hasTransitionsOut()&&(e.out=r.calculateTransitionStyles(t.transitionsOut)),e},setTransitionsStartState:function(t){this.addStyleRules(t.start)},setTransitionsEndState:function(t){if(window.requestAnimationFrame){var e=this;window.requestAnimationFrame(function(){window.setTimeout(function(){e.addStyleRules(t.end),e.update()},1)})}else this.addStyleRules(t.end),this.update()},hasTransitionsIn:function(){return this.opts.data.transitionsIn&&this.opts.data.transitionsIn.length},hasTransitionsOut:function(){return this.opts.data.transitionsOut&&this.opts.data.transitionsOut.length}};i.mixin("transitions",o)},{"../../modules/transitionStyleGenerator.js":26,riot:114}],64:[function(t,e,n){var i=t("riot"),a=["play","pause","mute","unmute","reset","fullscreen","normalscreen"],r={init:function(){this.registerTeardownFunction||this.mixin("teardown")},enforceVideoInterface:function(){for(var t=0;t<a.length;t++)"function"!=typeof this[a[t]]&&window.Tarnhelm.log(this.root.tagName+" failed to implement "+a[t]+"()")},setVideoEl:function(t){this.videoEl=t,this.enforceVideoInterface(),this.initVideoElEventHandlers(),this.registerTeardownFunction(this.teardownVideoElEventHandlers),this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers)},getVideoEl:function(){if(this.videoEl)return this.videoEl;window.Tarnhelm.log(this.root.tagName+" failed to call `setVideoEl` or passed a bad reference.")},initVideoActionReceivers:function(){this._setActionReceivers("on")},teardownVideoActionReceivers:function(){this._setActionReceivers("off")},_setActionReceivers:function(t){var e=this.getAdInstance().getActionHandler(),n=e[t].bind(e);n("video:pause-all",this.pause),n("video:mute-all",this.mute),n("video:unmute-all",this.unmute),n("video:reset-all",this.reset);for(var i=this.data.name,r=0;r<a.length;r++){var o=a[r];n("video:"+o+":"+i,this[o])}},initVideoElEventHandlers:function(){this.boundHandleVideoComplete=this.handleVideoComplete.bind(this),this.boundHandleLoadedMetadata=this.handleLoadedMetadata.bind(this);var t=this.getVideoEl();t&&"function"==typeof t.addEventListener&&(t.addEventListener("ended",this.boundHandleVideoComplete),t.addEventListener("loadedmetadata",this.boundHandleLoadedMetadata)),this.registerTeardownFunction(this.teardownVideoElEventHandlers)},teardownVideoElEventHandlers:function(){var t=this.getVideoEl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("ended",this.boundHandleVideoComplete)},handleVideoComplete:function(t){this.handleEvent(t,"videoComplete"),this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()&&this.setMediaEnded()},handleLoadedMetadata:function(){this.isNonQualifyingVideoForMediaInterop&&this.isNonQualifyingVideoForMediaInterop()&&this.overrideMediaInteroperabilityObedienceForSlot()},shouldItAutoplay:function(){var t=!0;return null!=this.opts.data.video.autoplay&&(t=this.opts.data.video.autoplay),this.opts.data.video.canplaythroughRequired&&(t=!1),this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?(this.requestPlayback({userInitiated:!1}),!1):t},handleCanPlay:function(t,e){return function(){this.initialAutoplay?t.removeEventListener("canplay",this.boundHandleCanPlay):this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?this.requestPlayback({userInitiated:!1}):(this.initialAutoplay=!0,t.play())}},doAutoplay:function(t){var e;this.boundHandleCanPlay=this.handleCanPlay(t,e).bind(this),this.initialAutoplay=this.initialAutoplay||!1,t.readyState>=t.HAVE_FUTURE_DATA?this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?this.requestPlayback({userInitiated:!1}):(e=t.play(),this.initialAutoplay=!0):t.addEventListener("canplay",this.boundHandleCanPlay)},fireSyntheticMediaPlaybackEvent:function(t,e){var n="";try{n=this.getAdInstance().getDomNode().ownerDocument.defaultView.name}catch(t){n="unknown"}window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish("mediaPlaybackEvent",{type:t,slotName:n,timestamp:Date.now(),dispatcher:e,targetElementId:this.getVideoEl()?this.getVideoEl().id:"unknown"})}};i.mixin("video",r)},{riot:114}],65:[function(t,e,n){var i=t("riot"),r=t("../constants").MINIMAL_VIDEO_NAME,o={getBridge:function(){return window.NativeWebBridge?window.NativeWebBridge:window.top.ad_utils&&window.top.ad_utils.mediaOrchestratorBridge?window.top.ad_utils.mediaOrchestratorBridge:void 0},isMobileHero:function(){var t=this.getAdInstance(),e=t?t.getDomNode():null,n=e?e.ownerDocument:null;return!!n&&0<n.getElementsByName("mobile-hero").length},shouldObeyMediaInteroperability:function(){if(window.mediaInteroperabilitySlotObeyOverrides&&window.mediaInteroperabilitySlotObeyOverrides[this.getSlotId()])return this.unsubscribeSlotFromMediaOrchestrator(),!1;var t=window.top.Tarnhelm.getDeviceInfo();return void 0===this.getBridge()||!t||this.isNonQualifyingVideoForMediaInterop()?(this.overrideMediaInteroperabilityObedienceForSlot(),!1):!!t.isIMDbApp||window.top.ad_utils&&window.top.ad_utils.isResponsive()},overrideMediaInteroperabilityObedienceForSlot:function(){window.mediaInteroperabilitySlotObeyOverrides||(window.mediaInteroperabilitySlotObeyOverrides={}),window.mediaInteroperabilitySlotObeyOverrides[this.getSlotId()]=!0,this.unsubscribeSlotFromMediaOrchestrator()},unsubscribeSlotFromMediaOrchestrator:function(){if(this.hasSubscribed){this.hasSubscribed=!1,this.setMediaEnded();var t=this.getBridge();t&&t.updateAssetFrameLocation&&t.updateAssetFrameLocation(this.getSlotId(),{x:0,y:0,width:0,height:0})}},isNonQualifyingVideoForMediaInterop:function(){var t=window.top.Tarnhelm.getDeviceInfo();return this.data.type===r&&!t.isIMDbApp&&this.videoEl&&this.videoEl.duration<=10&&(!t.isMobileSite||!this.isMobileHero())}};i.mixin("weblab",o),e.exports={WeblabMixin:o}},{"../constants":48,riot:114}],66:[function(t,e,n){var i={getAdIframeZoolander:function(){var t=this.getAdInstance().getContainerFrame().contentWindow.document;return new ad_design.Zoolander({document:t,id:this.opts.data.name,prefixId:"#"+this.opts.data.name})}};t("riot").mixin("zoolander",i)},{riot:114}],67:[function(n,t,e){var a=n("riot"),s=n("../modules/events/adEvent.js"),i=n("../modules/injectCSS.js"),u=n("../modules/url.js");function r(t,e,n){var i,r=t.getActionHandler();n?r.trigger({actionName:s.ASSET_PRELOAD_TIMEOUT}):e&&r.trigger({actionName:s.ASSET_PRELOAD_FINISH}),i=t,a.mount(i.getDomNode(),{adInstance:i}),i.initAfterMount(),r.trigger({actionName:s.AD_DISPLAYED});var o=t.getAdStore().getSecondaryAssetUrls();u.preloadUrls(o)}n("./app.tag"),t.exports={injectStyles:function(t){var e=n("../../css/ad.min.css.js");i.beforeNode(e,t)},mountAd:function(t){var e=t.getAdStore().getPrimaryAssetUrls();if(e&&e.length){t.getActionHandler().trigger({actionName:s.ASSET_PRELOAD_START});var n=r.bind(null,t,!0);u.preloadUrlsWithCallback(e,n)}else r(t)}}},{"../../css/ad.min.css.js":1,"../modules/events/adEvent.js":10,"../modules/injectCSS.js":16,"../modules/url.js":27,"./app.tag":30,riot:114}],68:[function(t,e,n){t("riot");var i=t("../../modules/countdownTimer.js"),a=t("../../modules/objectUtils.js"),r=t("./retrievers/asset.js"),o=t("./retrievers/background.js"),s=t("./retrievers/component.js"),u=t("./retrievers/dateRange.js"),l=t("./retrievers/rect.js"),c=(t("./retrievers/scale.js"),t("./retrievers/wrap.js")),d=t("./delegators/router.js"),h=(t("./delegators/transition.js"),t("./delegators/wrap.js")),f=["route","rotator:show-index","rotator:show-named-child","rotator:increment-index","rotator:decrement-index","minimize-ad","maximize-ad","hide-component","show-component"],p=["actions","background","css","defaultLink","frameProperties","frequencyCappedInit","id","isScalable","name","trackingConfigs"],m=["rect","frameProperties","spriteSheetDimensions"],g=["background","alternateBackground"],v="video",_="rotator",y="graphic",b="countdown",w={countdown:b,"countdown-number-text":b,"countdown-number-custom":b,rotator:_,"slider-rotator":_,graphic:y,rotatorbutton:y,reely:v,alphalfa:v,"minimal-video":v};function A(t,n,e){var i=this;this._adJson=t,this._options=e,this.actionHandler=n,this.componentNameIterator=0,this.setInitialState(t),this.initComponentTree(this._adJson),this.scaleAdToWidth(e.adWidth),this.initCountdownTimers(),n.on(f.join(" "),function(t,e){i.handleRoutingAction(e)}),n.on("set-wrap-background",function(t){var e=i.state.wrapLibrary[t.wrapName];h.triggerWrapSwap(e)}),n.on("make-invisible",function(t){var e=i.state.componentLibrary[t.componentName];e.isInvisible||(e.isInvisible=!0,n.trigger({actionName:"ad-state-updated"}))}),n.on("make-visible",function(t){var e=i.state.componentLibrary[t.componentName];null!=e.isInvisible&&e.isInvisible&&(e.isInvisible=!1,n.trigger({actionName:"ad-state-updated"}))}),n.on("set-alternate-background",function(t){i.state.componentLibrary[t.componentName].useAlternateBackground=!0,n.trigger({actionName:"ad-state-updated"})}),n.on("unset-alternate-background",function(t){i.state.componentLibrary[t.componentName].useAlternateBackground=!1,n.trigger({actionName:"ad-state-updated"})}),n.on("scale-ad-to-width",function(t){t&&t.data&&t.data.width?i.scaleAdToWidth(t.data.width):window.Tarnhelm.log('Cannot scale ad, action "scale-ad-to-width" did not provide a valid width. Action:',t)}),n.on("enable-navigation-components",function(t){i.state.navigationComponentsDisabled&&(i.state.navigationComponentsDisabled=!1,n.trigger({actionName:"ad-state-updated"}))}),n.on("disable-navigation-components",function(t){i.state.navigationComponentsDisabled||(i.state.navigationComponentsDisabled=!0,n.trigger({actionName:"ad-state-updated"}))}),n.on("trigger-action-collection",function(t){if(t.collectionName){var e=i.state.actions.collections[t.collectionName];e&&e.length?n.triggerMany(e):window.Tarnhelm.log('Collection "'+t.collectionName+'" was not found in ad "'+i.state.name+'"')}else window.Tarnhelm.log("Unable to trigger a collection of actions, missing collectionName")})}A.prototype={setInitialState:function(t){this.state=this.getStaticAdData(t),this.state.actions=this.state.actions||{},this.state.actions.collections=this.state.actions.collections||{},this.state.navigationComponentsDisabled=!1,this.state.scaleData={currentScale:1,currentWidth:this.state.frameProperties.width,pixelDensity:window.devicePixelRatio||1},this.state.countdownTimers={},this.state.componentLibrary={},this.state.componentNamesByType={},this.state.componentNamesByCategory={},this.state.activeSortedDateRanges=u.getActiveSortedDateRanges(window.Tarnhelm.getNowTime(),t.dateRanges),this.state.assetLibrary=this.buildAssetLibrary(),this.state.wrapLibrary=c.generateWrapLibrary(t.wraps,this.state.assetLibrary)},getStaticAdData:function(t){for(var e={},n=0;n<p.length;n++){var i=p[n];e[i]=t[i]}return a.clone(e)},buildAssetLibrary:function(){return r.generateAssetLibrary(this._adJson.assets,this.state.activeSortedDateRanges,this.state.scaleData.currentScale,this.state.scaleData.pixelDensity)},initComponentTree:function(t,e){var n,i,r=[];if(e&&e.length?i=e[e.length-1]:e=[],t.children&&t.children.length){e.push(t);for(var o=0;o<t.children.length;o++)r.push(t.children[o].name),this.initComponentTree(t.children[o],e);e.pop()}i?(n=a.clone(t)).parentName=i.name:n=this.state,delete n.children,n.childNames=r,this.initComponent(n,e),i&&this.addToComponentLibrary(n)},initComponent:function(t,e){t.isHidden=!!t.isHidden,this.storeOriginalValues(t,m),this.storeOriginalValues(t,g),t.arrowGraphics&&(this.inheritDefaultArrowValues(t.arrowGraphics),this.storeOriginalValues(t.arrowGraphics.previous,m),this.storeOriginalValues(t.arrowGraphics.next,m));var n=this.componentTypeInitters[t.type];"function"==typeof n&&n.call(this,t,e);var i=w[t.type],r=this.componentCategoryInitters[i];"function"==typeof r&&r.call(this,t,e),this.setComponentAssets(t)},storeOriginalValues:function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=t[i];r&&(t[i+"_orig"]=l.cloneRect(r))}},componentTypeInitters:{"countdown-number-text":function(t,e){var n={};e&&e.length&&(n=e[e.length-1]),void 0===t.targetDate&&(t.targetDate=n.targetDate),void 0===t.padZeros&&(t.padZeros=n.padZeros)},"countdown-number-custom":function(t,e){var n={};e&&e.length&&(n=e[e.length-1]),void 0===t.targetDate&&(t.targetDate=n.targetDate),void 0===t.padZeros&&(t.padZeros=n.padZeros),void 0===t.spritesheet&&(t.spritesheet=n.spritesheet),void 0===t.showAfterEnd&&(t.showAfterEnd=n.showAfterEnd)},reely:function(t,e){if(t.controls){var n=l.cloneRectAsPercentageValues(t.controls,t.rect);a.shallowMerge(t.controls,n)}},"slider-rotator":function(t,e){this.componentTypeInitters._initArrowGraphics(t,e)},gallery:function(t,e){this.componentTypeInitters._initArrowGraphics(t,e)},_initArrowGraphics:function(t,e){t.arrowGraphics&&t.arrowGraphics.next&&t.arrowGraphics.previous||(window.Tarnhelm.log("Requirements not met! "+t.type+" requires arrowGraphics properties!"),t.arrowGraphics={},t.arrowGraphics.previous={css:{background:"red"},rect:{anchorX:"left",offsetX:5,offsetY:5,width:40,height:40}},t.arrowGraphics.next={css:{background:"red"},rect:{anchorX:"right",offsetX:5,offsetY:5,width:40,height:40}})}},componentCategoryInitters:{countdown:function(t,e){this.addCountdownTimer(t.targetDate,t.name)},rotator:function(t,e){t.activeIndex=parseInt(t.activeIndex,10)||0},video:function(t,e){s.hasAncestorOfType(t,"slider-rotator",e)&&(t.video.autoplay=!1)}},inheritDefaultArrowValues:function(t){if(t&&t.previous&&t.next){var e=t.previous,n=t.next;if(t.defaultArrow){var i=t.defaultArrow;a.mergeDefaults(e.rect,i.rect),a.mergeDefaults(n.rect,i.rect),a.mergeDefaults(e,i),a.mergeDefaults(n,i),t.flippable&&(n.css=n.css||{},n.css.transform=n.css.transform||"",n.css.transform+=" scaleX(-1)")}}},addCountdownTimer:function(t,e){this.state.countdownTimers[t]||(this.state.countdownTimers[t]={countdownTimer:new i(t),listenerComponents:[]}),this.state.countdownTimers[t].listenerComponents.push(e)},initCountdownTimers:function(){for(var t=Object.keys(this.state.countdownTimers),e=0;e<t.length;e++){var n=this.state.countdownTimers[t[e]];this.initCountdownTimer(n)}},initCountdownTimer:function(e){var n=this,t=e.countdownTimer;t.on("tick",function(t){n.setComponentsTimerState(e.listenerComponents,t),n.actionHandler.trigger({actionName:"ad-state-updated"})});for(var i=0;i<e.listenerComponents.length;i++)this.state.componentLibrary[e.listenerComponents[i]].remaining=t.getRemainingValues(t.getMillisecondsRemaining())},setComponentsTimerState:function(t,e){for(var n=0;n<t.length;n++)this.state.componentLibrary[t[n]].remaining=e},setComponentAssets:function(t){switch(t.background&&t.background.asset&&a.shallowMerge(t.background,r.getGraphicAssetSources(t.background,this.state.assetLibrary)),t.alternateBackground&&t.alternateBackground.asset&&a.shallowMerge(t.alternateBackground,r.getGraphicAssetSources(t.alternateBackground,this.state.assetLibrary)),t.type){case"animaniac":case"graphic":case"rotatorbutton":a.shallowMerge(t,r.getGraphicAssetSources(t,this.state.assetLibrary));break;case"gallery":case"slider-rotator":t.arrowGraphics&&t.arrowGraphics.previous&&t.arrowGraphics.next&&(a.shallowMerge(t.arrowGraphics.previous,r.getGraphicAssetSources(t.arrowGraphics.previous,this.state.assetLibrary)),a.shallowMerge(t.arrowGraphics.next,r.getGraphicAssetSources(t.arrowGraphics.next,this.state.assetLibrary)));break;case"alphalfa":case"reely":case"minimal-video":a.shallowMerge(t.video,r.getVideoAssetSources(t.video,this.state.assetLibrary))}},addToComponentLibrary:function(t){var e=t.name;this.state.componentLibrary[e]&&(e+="__"+ ++this.componentNameIterator,window.Tarnhelm.log('More than one component exists with name"'+t.name+'", renaming to "'+e+'"')),t.name=e,this.state.componentLibrary[e]=t,this.addToNamesByType(t.type,t.name),this.addToNamesByCategory(t.type,t.name)},addToNamesByType:function(t,e){this._addToNames(this.state.componentNamesByType,t,e)},addToNamesByCategory:function(t,e){var n=w[t];n&&this._addToNames(this.state.componentNamesByCategory,n,e)},_addToNames:function(t,e,n){return t[e]||(t[e]=[]),t[e].push(n),t},handleRoutingAction:function(t){if(this.state.isTransitioning)window.Tarnhelm.log('Transition in progress, ignoring action "'+t.actionName+'"');else switch(t.actionName){case"route":d.route(t.data,this.state.componentLibrary,this.state);break;case"rotator:show-index":d.routeRotatorToIndex(t.componentName,t.data.index,this.state.componentLibrary,this.state);break;case"rotator:show-named-child":d.routeRotatorToNamedChild(t.componentName,t.data.childName,this.state.componentLibrary,this.state);break;case"rotator:increment-index":d.routeRotatorToIncrementedIndex(t.componentName,this.state.componentLibrary,this.state);break;case"rotator:decrement-index":d.routeRotatorToDecrementedIndex(t.componentName,this.state.componentLibrary,this.state);break;case"minimize-ad":d.routeRotatorToNamedChild("expander","minimized",this.state.componentLibrary,this.state);break;case"maximize-ad":d.routeRotatorToNamedChild("expander","maximized",this.state.componentLibrary,this.state);break;case"hide-component":d.route({hideComponents:[t.componentName]},this.state.componentLibrary,this.state);break;case"show-component":d.route({showComponents:[t.componentName]},this.state.componentLibrary,this.state)}},scaleAdToWidth:function(t){if(this.state.isScalable&&t)if(t!==this.state.frameProperties.width){this.updateScaleData(t),this.state.assetLibrary=this.buildAssetLibrary(),a.shallowMerge(this.state.frameProperties,l.getScaledRect(this.state.frameProperties_orig,this.state.scaleData.currentScale));for(var e=Object.keys(this.state.componentLibrary),n=0;n<e.length;n++){var i=e[n],r=this.state.componentLibrary[i];this.scaleBasedOnOriginalValues(r,m,l.getScaledRect),this.scaleBasedOnOriginalValues(r,g,o.getScaledBackground),r.arrowGraphics&&(this.scaleBasedOnOriginalValues(r.arrowGraphics.previous,m,l.getScaledRect),this.scaleBasedOnOriginalValues(r.arrowGraphics.next,m,l.getScaledRect)),this.setComponentAssets(r)}this.actionHandler.trigger({actionName:"resize-ad-container",data:{rect:this.state.frameProperties}}),this.actionHandler.trigger({actionName:"ad-state-updated"})}else window.Tarnhelm.log('Ad "'+this.state.name+'" is already '+t+"px wide, not rescaling")},scaleBasedOnOriginalValues:function(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t[r]){var o=r+"_orig";a.shallowMerge(t[r],n(t[o],this.state.scaleData.currentScale))}}},updateScaleData:function(t){this.state.scaleData.currentScale=t/this.state.frameProperties_orig.width,this.state.scaleData.currentWidth=t},getState:function(){return this.state},getComponentState:function(t){return this.state.componentLibrary[t]},getComponentLibrary:function(){return this.state.componentLibrary},getComponentNamesByType:function(t){var e=this.state.componentNamesByType[t];return e||window.Tarnhelm.log("Requested names for a component type with nothing indexed: ",t),e||[]},getComponentNamesByCategory:function(t){var e=this.state.componentNamesByCategory[t];return e||window.Tarnhelm.log("Requested names for a component category with nothing indexed: ",t),e||[]},getAdId:function(){return this.state.id},getAdName:function(){return this.state.name},requiresAutoplay:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions&&this.state.frequencyCappedInit.actions.length},getFrequencyCappedInitActions:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions?this.state.frequencyCappedInit.actions:[]},getPrimaryAssetUrls:function(){return r.getPreloadAssetUrls("primary",this.state.assetLibrary)},getSecondaryAssetUrls:function(){return r.getPreloadAssetUrls("secondary",this.state.assetLibrary)},getNavigationComponentsDisabledFlag:function(){return this.state.navigationComponentsDisabled}},e.exports=A},{"../../modules/countdownTimer.js":7,"../../modules/objectUtils.js":21,"./delegators/router.js":69,"./delegators/transition.js":70,"./delegators/wrap.js":71,"./retrievers/asset.js":72,"./retrievers/background.js":73,"./retrievers/component.js":74,"./retrievers/dateRange.js":75,"./retrievers/rect.js":76,"./retrievers/scale.js":78,"./retrievers/wrap.js":80,riot:114}],69:[function(t,e,n){var w=t("../retrievers/component.js"),A=t("./transition.js"),E=t("../retrievers/rect.js"),T=t("../retrievers/rotator.js"),S=t("../../../modules/objectUtils.js"),i={route:function(t,r,o){for(var e=t.rotatorConfigs||[],n=t.hideComponents||[],i=t.showComponents||[],a=window.Tarnhelm.getAd(o.id).getActionHandler(),s=[],u=!1,l=[],c=0;c<e.length;c++){var d=e[c],h=r[d.name];h&&d.childName&&null!=d.index&&(d.index=T.findNamedChildIndex(d.name,d.childName,r)),h&&h.activeIndex!==d.index&&(l.push(d),"expander"===h.name&&(u=!0),h.isHidden||s.push(T.getActiveChildName(h)))}var f=w.getHiddenComponentNames(i,r),p=w.getUnhiddenComponentNames(n,r);if(s=s.concat(p),l.length||p.length||f.length){var m=[];for(c=0;c<s.length;c++)m=m.concat(w.buildTransitionsOutComponentList(s[c],r));if(m.length){var g=this;o.isTransitioning=!0,A.triggerTransitionsOut(m,r,a,function(){var t=T.mapRotatorConfigsToComponentName(l);if(S.shallowMergeMany(r,t),u){var e=o.componentLibrary.expander,n=T.getActiveChildComponent(e,o.componentLibrary),i=E.getDimensions(n.rect);S.shallowMerge(o.frameProperties,i),S.shallowMerge(e.rect,i)}g.setComponentHiddenStates(p,r,!0),g.setComponentHiddenStates(f,r,!1),o.isTransitioning=!1,a.trigger({actionName:"ad-state-updated"})})}else{var v=T.mapRotatorConfigsToComponentName(l);if(S.shallowMergeMany(r,v),u){var _=o.componentLibrary.expander,y=T.getActiveChildComponent(_,o.componentLibrary),b=E.getDimensions(y.rect);S.shallowMerge(o.frameProperties,b),S.shallowMerge(_.rect,b)}this.setComponentHiddenStates(p,r,!0),this.setComponentHiddenStates(f,r,!1),a.trigger({actionName:"ad-state-updated"})}}},routeRotatorToIndex:function(t,e,n,i){var r=[{name:t,index:e}];this.route({rotatorConfigs:r},n,i)},routeRotatorToIncrementedIndex:function(t,e,n){var i=T.getIncrementedIndex(e[t]);this.routeRotatorToIndex(t,i,e,n)},routeRotatorToDecrementedIndex:function(t,e,n){var i=T.getDecrementedIndex(e[t]);this.routeRotatorToIndex(t,i,e,n)},routeRotatorToNamedChild:function(t,e,n,i){var r=T.findNamedChildIndex(t,e,n);this.routeRotatorToIndex(t,r,n,i)},setComponentHiddenStates:function(t,e,n){for(var i=0;i<t.length;i++)e[t[i]].isHidden=!!n}};e.exports=i},{"../../../modules/objectUtils.js":21,"../retrievers/component.js":74,"../retrievers/rect.js":76,"../retrievers/rotator.js":77,"./transition.js":70}],70:[function(t,e,n){t("../../../modules/transitionStyleGenerator.js");var s=t("../retrievers/transition.js"),i={triggerTransitionsOut:function(n,t,i,r){for(var e=s.getMaxTransitionOutTime(n,t),o=0;o<n.length;o++){var a="transition-component-out:"+n[o];i.trigger({actionName:a})}window.setTimeout(function(){"function"==typeof r&&r();for(var t=0;t<n.length;t++){var e="transition-component-out:"+n[t]+":complete";i.trigger({actionName:e})}},e)}};e.exports=i},{"../../../modules/transitionStyleGenerator.js":26,"../retrievers/transition.js":79}],71:[function(t,e,n){var r=t("../retrievers/wrap.js"),i=(t("../retrievers/rotator.js"),{triggerRotatorWrapSwap:function(t,e){var n=r.getWrapNameFromRotator(t,e.componentLibrary);if(n){var i=r.getWrapData(n,e.wrapLibrary);i?this.triggerWrapSwap(i):window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+t.name+'" and wrapName "'+n+'", could not find a matching wrap config')}else window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+t.name+'", could not get the wrap name')},triggerWrapSwap:function(t){var e=r.generateWrapAction(t);window.Tarnhelm.triggerTopAction(e)}});e.exports=i},{"../retrievers/rotator.js":77,"../retrievers/wrap.js":80}],72:[function(t,e,n){var i={image:!0,video:!0},u={image:"url",video:"url"},l={video:"source",image:"source"},c={graphic:[{src:"asset",dest:"source"},{src:"activeAsset",dest:"activeSource"},{src:"hoverAsset",dest:"hoverSource"},{src:"fullAdHoverAsset",dest:"fullAdHoverSource"},{src:"disabledAsset",dest:"disabledSource"}],video:[{src:"asset",dest:"url"}]},s={video:!0},d={primary:!0,secondary:!0},r={generateAsset:function(t,e,n){var i=this.getCurrentDatedAsset(t,e),r=this.generateScaledAsset(i,t.type,n);return r?r.preload=t.preload:window.Tarnhelm.log('Asset "'+t.name+'" is not configured correctly'),r},generateAssetLibrary:function(t,e,n,i){for(var r={},o=Object.keys(t),a=this.getAssetScale(n,i),s=0;s<o.length;s++){var u=o[s],l=t[u],c=this.updateDeprecatedAssetSyntax(l),d=this.generateAsset(c,e,a);d?r[u]=d:window.Tarnhelm.log('There was a problem with asset "'+u+'", Tarnhelm was unable to initialize it')}return r},generateScaledAsset:function(t,e,n){for(var i={},r=this.getValidatedAssetType(e),o=u[r],a=n;0<a;a--){var s=this.getScaledAssetUrlKey(o,a);if(t[s])return i[l[r]]=t[s],i.type=r,i}},getCurrentDatedAsset:function(t,e){if(!e||!e.length||!t.dateOverrides)return t;for(var n=e.length-1;-1<n;n--){var i=e[n].name;if(t.dateOverrides[i])return t.dateOverrides[i]}return t},getValidatedAssetType:function(t){return i[t]?t:"image"},getScaledAssetUrlKey:function(t,e){return"number"==typeof e&&1<e?t+parseInt(e,10)+"x":t},getAssetScale:function(t,e){return Math.ceil(Math.abs(t*e))},getAssetSource:function(t,e){var n=e[t];if(n){var i=this.getAssetSourceKey(n.type),r=n[i];if(r)return r;window.Tarnhelm.log('Error, asset "'+n+'" is missing its source, prop "'+i+'"')}else window.Tarnhelm.log('Error, asset named "'+n+'" does not exist')},getAssetSourceKey:function(t){var e=this.getValidatedAssetType(t);return l[e]},getMappedAssetSources:function(t,e,n){var i={};if(!t)return window.Tarnhelm.log("Cannot get assets, component was not provided"),i;if(!e)return window.Tarnhelm.log("Cannot get assets, assetLibrary was not provided"),i;if(!n||!c[n])return window.Tarnhelm.log('Cannot get assets, componentType "'+n+'" is not supported'),i;for(var r=c[n],o=0;o<r.length;o++){var a=r[o];if(t[a.src]){var s=this.getAssetSource(t[a.src],e);s&&(i[a.dest]=s)}}return i},getGraphicAssetSources:function(t,e){return this.getMappedAssetSources(t,e,"graphic")},getVideoAssetSources:function(t,e){return this.getMappedAssetSources(t,e,"video")},getPreloadAssetUrls:function(t,e){var n=[];if("string"!=typeof t||!d[t])return window.Tarnhelm.log('Problem preloading assets, "'+t+'" should be "primary" or "secondary"'),n;for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],a=e[o];a.preload!==t||s[a.type]||this.getAssetSource(o,e)&&n.push(a.source)}return n},updateDeprecatedAssetSyntax:function(t){var e,n,i={};for(e in t)if("fileName"===e)i.url=t[e]+".mp4";else if("dateOverrides"===e){var r=t[e];for(n in r)r[n]=this.updateDeprecatedAssetSyntax(r[n]);i.dateOverrides=r}else i[e]=t[e];return i}};e.exports=r},{}],73:[function(t,e,n){var l=t("./scale.js"),c=["position","size"],d=/\s+/,i={getScaledBackground:function(t,e){if("object"==typeof t){for(var n={},i=0;i<c.length;i++){var r=c[i],o=t[r];if(o){for(var a=o.split(d),s=0;s<a.length;s++){var u=a[s];"number"==typeof l.getRawDimension(u)&&(a[s]=l.getDimensionWithUnit(l.getScaledDimension(l.getRawDimension(u),e)))}n[r]=a.join(" ")}}return n}window.Tarnhelm.log('Cannot scale, "background" is not an object:',t)},cloneBackground:function(t){for(var e={},n=0;n<c.length;n++){var i=c[n];t[i]&&(e[i]=t[i])}return e}};e.exports=i},{"./scale.js":78}],74:[function(t,e,n){var s=t("./rotator.js"),i={buildTransitionsOutComponentList:function(t,e){var n=[],i=e[t];if(!i||i.isHidden)return n;if(i.transitionsOut&&i.transitionsOut.length&&n.push(i.name),i.childNames&&i.childNames.length)if("rotator"===i.type){var r=s.getActiveChildComponent(i,e);n=n.concat(this.buildTransitionsOutComponentList(r.name,e))}else for(var o=0;o<i.childNames.length;o++){var a=e[i.childNames[o]];a.isHidden||(n=n.concat(this.buildTransitionsOutComponentList(a.name,e)))}return n},filterComponentsByPropertyValue:function(t,e,n,i){for(var r=[],o=0;o<t.length;o++){var a=t[o],s=e[a];s&&s[n]===i&&r.push(a)}return r},filterComponentsByParentNode:function(t,e){for(var n={},i=0;i<t.length;i++)n[t[i]]=1;var r=[];for(i=0;i<t.length;i++){var o=!1,a=e[t[i]];if(a){for(;a.parentName&&!o;)n[(a=e[a.parentName]).name]&&(o=!0);o||r.push(t[i])}}return r},isDescendantOfType:function(t,e,n){for(var i=n[t];i&&i.parentName;)if((i=n[i.parentName])&&i.type===e)return!0;return!1},hasAncestorOfType:function(t,e,n){if(!n||!n.length)return!1;for(var i=n.length-1;0<=i;i--)if(n[i].type===e)return!0;return!1},hasAncestorOfName:function(t,e,n){var i=n[t].parentName;return this._hasAncestorOfNameRecursive(e,i,n)},_hasAncestorOfNameRecursive:function(t,e,n){var i=n[e];return!!i&&(i.name===t||this._hasAncestorOfNameRecursive(t,i.parentName,n))},getHiddenComponentNames:function(t,e){return this.filterComponentsByPropertyValue(t,e,"isHidden",!0)},getUnhiddenComponentNames:function(t,e){return this.filterComponentsByPropertyValue(t,e,"isHidden",!1)}};e.exports=i},{"./rotator.js":77}],75:[function(t,e,n){e.exports={compareDateRanges:function(t,e){var n=new Date(t.start),i=new Date(e.start),r=n.getTime(),o=i.getTime();return r<o?-1:o<r?1:0},getActiveSortedDateRanges:function(t,e){var n=[];if(!e||!e.length)return n;for(var i=0;i<e.length;i++)t>=new Date(e[i].start).getTime()&&n.push(e[i]);return n.sort(this.compareDateRanges)}}},{}],76:[function(t,e,n){var l=t("./scale.js"),a=["offsetX","offsetY","width","height"],c={offsetX:"width",offsetY:"height",width:"width",height:"height"},i={getDimensions:function(t){return{height:t.height,width:t.width}},getScaledRect:function(t,e){if("object"==typeof t){for(var n={},i=0;i<a.length;i++){var r=a[i],o=t[r];o&&"number"==typeof l.getRawDimension(o)&&(n[r]=l.getScaledDimension(l.getRawDimension(o),e))}return n}window.Tarnhelm.log('Cannot scale, "rect" is not an object:',t)},cloneRect:function(t){for(var e={},n=0;n<a.length;n++){var i=a[n];t[i]&&(e[i]=t[i])}return e},cloneRectAsPercentageValues:function(t,e){e.width,e.height;for(var n={},i=Object.keys(c),r=0;r<i.length;r++){var o=i[r],a=c[o],s=l.getRawDimension(t[o]);if(s){var u=l.getRawDimension(e[a]);u||window.Tarnhelm.log('Could not scale rect value for "'+o+'", parent rect value for "'+a+'" is missing'),"number"==typeof s&&("number"==typeof u?s=Math.round(s/u*100)+"%":window.Tarnhelm.log('Could not scale rect value for "'+o+'", parent rect value for "'+a+'" is not a pixel value')),n[o]=s}}return n}};e.exports=i},{"./scale.js":78}],77:[function(t,e,n){var i={isValidRotator:function(t){return t&&(n=t).childNames&&0<n.childNames.length&&0<=(e=t).activeIndex&&e.activeIndex<e.childNames.length;var e,n},getActiveChildName:function(t){var e;return this.isValidRotator(t)&&(e=t.childNames[t.activeIndex]),e||window.Tarnhelm.log('Unable to find active child name for rotator "'+t.name+'"'),e},getActiveChildComponent:function(t,e){var n,i=this.getActiveChildName(t);return i&&(n=e[i]),n},mapRotatorConfigsToComponentName:function(t){for(var e={},n=0;n<t.length;n++){var i=t[n];e[i.name]={activeIndex:i.index}}return e},findNamedChildIndex:function(t,e,n){var i=n[t];if(i){if(i&&i.childNames&&i.childNames.length)for(var r=0;r<i.childNames.length;r++)if(i.childNames[r]===e)return r;return window.Tarnhelm.log("Requested rotator:show-named-child for a non existent childName. rotatorName:",t," childName: ",e),i.activeIndex}window.Tarnhelm.log("Requested rotator:show-named-child for a non existent rotator . rotator:",t)},getIncrementedIndex:function(t){if(this.isValidRotator(t)){var e=t.activeIndex;if(e+1<=t.childNames.length-1)return e+1}return 0},getDecrementedIndex:function(t){if(this.isValidRotator(t)){var e=t.activeIndex,n=t.childNames.length-1;return 0<=e-1?e-1:n}return 0}};e.exports=i},{}],78:[function(t,e,n){var i=new RegExp(/^\-?\d*(\.\d*)?(px)?$/),r={getScaledDimension:function(t,e){if("number"==typeof t&&"number"==typeof e)return Math.ceil(t*e);window.Tarnhelm.log("getScaledDimension() failed, both args were not numbers:",t,e)},getRawDimension:function(t){if("string"!=typeof t&&"number"!=typeof t)return window.Tarnhelm.log("Cannot get raw dimension from invalid value: ",t),t;var e=t.toString();return i.test(e)?parseFloat(e):e},getDimensionWithUnit:function(t){var e=this.getRawDimension(t);return 0===e?"0":"number"==typeof e?e+"px":e}};e.exports=r},{}],79:[function(t,e,n){var o=t("../../../modules/transitionStyleGenerator.js"),i={getMaxTransitionOutTime:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=e[t[i]];n.push(o.getMaxTransitionTime(r.transitionsOut))}return Math.max.apply(null,n)}};e.exports=i},{"../../../modules/transitionStyleGenerator.js":26}],80:[function(t,e,n){var u=t("./asset.js"),i=t("./rotator.js"),l=t("../../../modules/objectUtils.js"),r={generateWrapLibrary:function(t,e){t=t||{};for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r],a=(t[o].asset,l.clone(t[o])),s=u.getGraphicAssetSources(a,e);l.shallowMerge(a,s),n[o]=a}return n},getWrapNameFromRotator:function(t,e){var n=i.getActiveChildComponent(t,e);return n&&n.wrap?n.wrap:t&&t.wrapConfig&&t.wrapConfig.default?t.wrapConfig.default:void window.Tarnhelm.log('Cannot find wrap for rotator "'+t.name+'"')},getWrapData:function(t,e){return e[t]},generateWrapAction:function(t){return{actionName:"set-wrap-background",data:l.clone(t)}}};e.exports=r},{"../../../modules/objectUtils.js":21,"./asset.js":72,"./rotator.js":77}],81:[function(t,e,n){var o=t("./modules/adInstance.js"),i=t("./modules/wrapSwapper.js"),r=t("./modules/actionHandler.js"),a=t("./modules/eventEmitter.js"),s=t("./modules/requirementsTester.js"),u=t("./modules/objectUtils.js"),l=t("./modules/url.js"),c=t("./renderer/renderer.js"),d=t("./modules/deviceInfo.js"),h=t("./modules/events/metricEventSink.js"),f=t("./modules/mobileLog.js"),p=t("./modules/events/tarnhelmEvent.js"),m=t("./legacyTracking.js");t("IMDbAdvertisingJsModules");var g={},v=!1,_=!1,y=0,b=new d(window.location.href,window.navigator.userAgent),w=new s(b.getInfo());function A(t){var e=u.clone(t);return delete e.adName,delete e.isGlobal,e}var E,T,S,C,x={getAd:function(t){return g[t]},getAdByName:function(t){for(var e,n=Object.keys(g),i=0;i<n.length;i++)if(g[n[i]].getName()===t){e=g[n[i]];break}return e},initAdInstance:function(t,e,n,i){this.getAd(n.id)&&this.log('Ad with id "'+n.id+'" already exists. OVERWRITING!'),n.name&&this.getAdByName(n.name)&&this.log('Ad with name "'+n.name+'" already exists. OVERWRITING!'),c.injectStyles(t);var r=new o({domNode:t,containerFrame:e,eventSinks:[T],adData:n,trackingConsumer:i||m(n)});return g[n.id]=r,c.mountAd(r),r},triggerTopAction:function(t){E.trigger(t)},triggerGlobalAction:function(t){for(var e=Object.keys(g),n=A(t),i=0;i<e.length;i++)this.getAd(e[i]).getActionHandler().trigger(n)},triggerTandemAction:function(t){if(t.adName){var e=this.getAdByName(t.adName);if(e){var n=A(t);e.getActionHandler().trigger(n)}else this.log('Tarnhelm.triggerTandemAction failed, adInstance for "'+t.adName+'" was not found')}else this.log("Tarnhelm.triggerTandemAction failed, adName was not provided")},getNowTime:function(){return Date.now()+y},getIsDebug:function(){return v},setIsDebug:function(t){v=!!t},getIsMobileDebug:function(){return _},setIsMobileDebug:function(t){_=!!t},log:function(){if(v&&window.console&&window.console.log){var t=Array.prototype.slice.call(arguments);console.log.apply(console,t),_&&this.getDeviceInfo().isMobileDevice&&window.top.document.body&&(window.top.document.body.style.position="relative",window.top.mobileLog=window.top.mobileLog||new f(window.top.document.body),window.top.mobileLog.log(t))}},getVersion:function(){return"1.0.1"},getDeviceInfo:function(){return b.getInfo()},getRequirementsTester:function(){return w}};e.exports=window.Tarnhelm=x,E=new r(new a,w),function(){var t=l.getQueryParam("tarnhelmDebug",window.location.href);"1"!==t&&"true"!==t||(v=!0,window.Tarnhelm.log("Tarnhelm is in DEBUG mode."));var e=l.getQueryParam("tarnhelmMobileDebug",window.location.href);"1"!==e&&"true"!==e||(v=_=!0,window.Tarnhelm.log("Tarnhelm is in MOBILE DEBUG mode."))}(),S=l.getQueryParam("simulatedDate",window.location.href),C=new Date(S),S&&"Invalid Date"!==C.toString()&&(y=C.getTime()-Date.now()),new i("wrapper",E),T=new h(E),E.trigger({actionName:p.READY})},{"./legacyTracking.js":2,"./modules/actionHandler.js":3,"./modules/adInstance.js":4,"./modules/deviceInfo.js":8,"./modules/eventEmitter.js":9,"./modules/events/metricEventSink.js":11,"./modules/events/tarnhelmEvent.js":12,"./modules/mobileLog.js":19,"./modules/objectUtils.js":21,"./modules/requirementsTester.js":23,"./modules/url.js":27,"./modules/wrapSwapper.js":29,"./renderer/renderer.js":67,IMDbAdvertisingJsModules:94}],82:[function(t,e,n){var i={makeBufferCanvas:function(){var t=document.createElement("canvas");return t.width=this.output.width,t.height=2*this.output.height,t},isIE:function(){return/msie|trident/.test(navigator.userAgent.toLowerCase())},clear2DCanvas:function(t,e,n){t.clearRect(0,0,e,n)}};e.exports=i},{}],83:[function(t,e,n){var i=t("./renderers/alphalfa-renderer-webgl.js"),r=t("./renderers/alphalfa-renderer-horizontal-gl.js"),o=t("./renderers/alphalfa-renderer-canvas.js"),a=t("./renderers/alphalfa-renderer-mask.js"),s=t("./renderers/alphalfa-renderer-color-correct.js"),u=t("./alphalfa-utils.js");t("../polyfills/request-animation-frame.js");var l=function(t){this.doDebug=!1,this.video=t.video,this.output=t.output,this.buffer=t.buffer||void 0,this.dismissalTimeout=t.dismissalTimeout,this.originalOutputDisplay=this.output.style.display||"inline-block",this.outputHeight=this.output.height,this.outputWidth=this.output.width,t.loop&&(this.loop=t.loop,this.setLoopConfig(t)),null!=t.stillFrameMS&&(this.stillFrameInS=t.stillFrameMS/1e3),this.isSupported=!0,this.renderMode=this.determineRenderMode({colorCorrect:t.colorCorrect,maskUrl:t.maskUrl,forceCanvas:t.forceCanvas,horizontalStack:t.horizontalStack}),this.renderMode!==this.RENDER_MODES.CANVAS&&this.renderMode!==this.RENDER_MODES.GL||this.runTaintedContentCheck(this.video),this.setupRenderer()};l.prototype={listen:function(){this.isSupported&&(this.boundFrameHandler=this.boundFrameHandler||this.frameHandler.bind(this),this.video.addEventListener("play",this.boundFrameHandler,!1),this.boundEndHandler=this.boundEndHandler||this.videoEndedHandler.bind(this),this.video.addEventListener("ended",this.boundEndHandler,!1),this.video.loop=this.loop)},teardown:function(){this.video.removeEventListener("play",this.boundFrameHandler),this.video.removeEventListener("ended",this.boundEndHandler),this.video.removeEventListener("seeked",this.boundLoopCountOnSeeked),this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.video=void 0,this.renderer.teardown(),this.output.width=1,this.output.height=1,this.output.parentNode.removeChild(this.output),this.output=void 0},RENDER_MODES:{GL:"gl",CANVAS:"canvas",MASK:"mask",COLOR_CORRECT:"color-correct",HORIZONTAL_GL:"horizontal-gl"},determineRenderMode:function(t){var e;return t.colorCorrect?e=this.RENDER_MODES.COLOR_CORRECT:t.maskUrl?(this.maskUrl=t.maskUrl,e=this.RENDER_MODES.MASK):t.forceCanvas?e=this.RENDER_MODES.CANVAS:t.horizontalStack?(this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl"),e=this.RENDER_MODES.HORIZONTAL_GL):e=this._determineRenderMode(),this.doDebug&&console.log("Alphalfa determined renderMode :: ",e),e},_determineRenderMode:function(){var e=!0;this.gl=void 0;try{this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl")}catch(t){e=!1}return this.gl||(e=!1),e?this.RENDER_MODES.GL:this.RENDER_MODES.CANVAS},setupRenderer:function(){var t={doDebug:this.doDebug,video:this.video,buffer:this.buffer,output:this.output,dieBecauseUnsupported:this.dieBecauseUnsupported};switch(this.renderMode){case this.RENDER_MODES.CANVAS:case this.RENDER_MODES.MASK:case this.RENDER_MODES.COLOR_CORRECT:try{t.outputCtx=this.output.getContext("2d")}catch(t){return this.doDebug&&console.log("Error executing `getContext`, canvas not supported."),void this.dieBecauseUnsupported()}t.outputHeight=this.outputHeight,t.outputWidth=this.outputWidth}switch(this.renderMode){case this.RENDER_MODES.GL:t.gl=this.gl,this.renderer=new i(t);break;case this.RENDER_MODES.CANVAS:this.renderer=new o(t);break;case this.RENDER_MODES.MASK:t.maskUrl=this.maskUrl,this.renderer=new a(t);break;case this.RENDER_MODES.COLOR_CORRECT:this.renderer=new s(t);break;case this.RENDER_MODES.HORIZONTAL_GL:t.gl=this.gl,this.renderer=new r(t)}this.setupRendererContext()},setupRendererContext:function(){this.renderer.setupRendererContext(),this.doDebug||(this.video.style.display="none",this.buffer&&(this.buffer.style.display="none")),this.processFrame=this.determineProcessFrame()},determineProcessFrame:function(){return this.renderMode===this.RENDER_MODES.CANVAS&&u.isIE()&&!this.hasBindSupport()?(this.doDebug&&console.log("Error: IE <9 does not support Function.bind. Aborting."),void this.dieBecauseUnsupported()):this.renderer.getProcessFrameFunc()},hasBindSupport:function(){return"bind"in Function},runTaintedContentCheck:function(t){var e=document.createElement("canvas");e.width=e.height=1,this.boundTestTainted=this.testTainted.bind(this,t,e),t.addEventListener("canplay",this.boundTestTainted)},testTainted:function(t,e){var n=e.getContext("2d");n.drawImage(t,0,0,1,1);try{n.getImageData(0,0,1,1)}catch(t){this.dieBecauseTainted()}t.removeEventListener("canplay",this.boundTestTainted),e=n=null},frameHandler:function(){return!!this.video&&(this.video.paused||this.video.ended?(this.video.paused&&this.freezeOrClear(),!1):(this.processFrame(),void(this.requestAnimationFrameRequest=window.requestAnimationFrame(this.boundFrameHandler))))},videoEndedHandler:function(){this.freezeOrClear(),void 0!==this.dismissalTimeout&&(this.boundHideOutputCanvas=this.boundHideOutputCanvas||this.hideOutputCanvas.bind(this),setTimeout(this.boundHideOutputCanvas,this.dismissalTimeout))},setLoopConfig:function(t){this.loopedNum=0;var e=null!=t.maxLoops?t.maxLoops:5;0!==e&&this.setMaxLoops(e)},setMaxLoops:function(t){this.maxLoops=t,this.boundLoopCountOnSeeked=this.loopCountOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundLoopCountOnSeeked)},loopCountOnSeeked:function(t){this.video.paused?this.loopedNum=0:(this.video.currentTime<.1&&this.loopedNum++,this.loopedNum>=this.maxLoops&&(this.video.pause(),this.loopedNum=0))},freezeOrClear:function(){this.stillFrameInS?this.freezeOnStill(this.stillFrameInS):this.clearOnEnd()},freezeOnStill:function(t){this.video.pause(),this.boundFreezeFrameOnSeeked=this._freezeFrameOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundFreezeFrameOnSeeked);var e=this.video.duration-.05,n=e<t?e:t;this.video.currentTime=n},_freezeFrameOnSeeked:function(){this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.processFrame()},clearOnEnd:function(){this.video.pause(),this._clearCanvas()},showOutputCanvas:function(){this.output.style.display=this.originalOutputDisplay},hideOutputCanvas:function(){this.output.style.display="none"},dieBecauseTainted:function(){this.doDebug&&window.console&&window.console.log&&console.log("Tainted canvas content. Killing Alphalfa playback."),this.dieBecauseUnsupported(!0)},dieBecauseUnsupported:function(t){this.doDebug&&!t&&window.console&&window.console.log&&console.log("Alphalfa has seen things. Attack ships on fire off the shoulder of Orion... Time. to die."),window.cancelAnimationFrame(this.requestAnimationFrameRequest),this.isSupported=!1,this.boundFrameHandler&&this.boundEndHandler&&(this.video.removeEventListener("play",this.boundFrameHandler,!1),this.video.removeEventListener("ended",this.boundEndHandler,!1)),this.video.pause(),this.video.style.display="none",this.output.style.display="none",this.buffer&&(this.buffer.style.display="none")},_clearCanvas:function(){this.renderer.clearCanvas()}},e.exports=l},{"../polyfills/request-animation-frame.js":95,"./alphalfa-utils.js":82,"./renderers/alphalfa-renderer-canvas.js":84,"./renderers/alphalfa-renderer-color-correct.js":85,"./renderers/alphalfa-renderer-horizontal-gl.js":86,"./renderers/alphalfa-renderer-mask.js":87,"./renderers/alphalfa-renderer-webgl.js":88}],84:[function(t,e,n){var i=t("../alphalfa-utils.js"),r=function(t){this.doDebug=t.doDebug,this.output=t.output,this.outputCtx=t.outputCtx,this.outputHeight=t.outputHeight,this.outputWidth=t.outputWidth,this.buffer=t.buffer,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported};r.prototype={PIXEL_DATA_SIZE:4,setupRendererContext:function(){this._setupCanvasContext()},getProcessFrameFunc:function(){return this.processCanvasFrame.bind(this,this.buffer,this.bufferCtx,this.output,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){i.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0,this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0},processCanvasFrame:function(t,e,n,i,r,o){e.drawImage(this.video,0,0);for(var a=this.bufferCtx.getImageData(0,o,r,o),s=a.data,u=3,l=s.length;u<l;u+=this.PIXEL_DATA_SIZE)s[u]=s[u-2];i.putImageData(a,0,0,0,0,r,o),i.drawImage(t,0,0,r,2*o)},_setupCanvasContext:function(){this.buffer=this.buffer||i.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d"),this.outputCtx.globalCompositeOperation="source-in"}},e.exports=r},{"../alphalfa-utils.js":82}],85:[function(t,e,n){var i=t("../alphalfa-utils.js"),r=function(t){this.doDebug=t.doDebug,this.output=t.output,this.outputCtx=t.outputCtx,this.outputWidth=t.outputWidth,this.outputHeight=t.outputHeight,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported};r.prototype={setupRendererContext:function(){},getProcessFrameFunc:function(){return this.processColorCorrectFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){i.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processColorCorrectFrame:function(t,e,n,i){e.drawImage(t,0,0,n,i)}},e.exports=r},{"../alphalfa-utils.js":82}],86:[function(t,e,n){var i=t("../alphalfa-utils.js"),r=function(t){this.doDebug=t.doDebug,this.gl=t.gl,this.output=t.output,this.buffer=t.buffer,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported};r.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.vbuffer),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.texCoordBuffer),t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return i.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(t,e){this._updateTextureFromVideo(t),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(t){t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(t,e,n,i){this._ieUpdateTextureFromVideo(t,n,i),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(t,e,n){this.bufferCtx.drawImage(this.video,0,0,e,2*n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(t){i.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),t.enableVertexAttribArray(0),t.viewport(0,0,this.output.width,this.output.height),this.doDebug?t.clearColor(0,0,0,.1):t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.program=this._compileProgram(t,this.SHADER_VERTEX,this.SHADER_FRAGMENT),t.useProgram(this.program),this._getGlDataLocations(t),this._createAndBindTexCoordData(t),this._createAndBindTexture(t),this._createAndBindVertexData(t)},_ieGlSetup:function(){this.buffer=this.buffer||i.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(t){this.aTexCoord_loc=t.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=t.getAttribLocation(this.program,"aPosition"),this.uImage_loc=t.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(t){this.vbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aPosition_loc),t.vertexAttribPointer(this.aPosition_loc,2,t.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(t){this.texCoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,.5,0,0,1,.5,1]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aTexCoord_loc),t.vertexAttribPointer(this.aTexCoord_loc,2,t.FLOAT,!1,0,0),t.uniform2f(t.getUniformLocation(this.program,"uHalfTexOffset"),.5,0)},_createAndBindTexture:function(t){this.stackTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.stackTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},_compileProgram:function(t,e,n){var i,r,o;return i=t.createShader(t.VERTEX_SHADER),t.shaderSource(i,e),t.compileShader(i),r=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(r,n),t.compileShader(r),o=t.createProgram(),t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),t.getShaderParameter(i,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",t.getShaderInfoLog(i)),t.getShaderParameter(r,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",t.getShaderInfoLog(r)),t.getProgramParameter(o,t.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",t.getProgramInfoLog(o)),o},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},e.exports=r},{"../alphalfa-utils.js":82}],87:[function(t,e,n){var i=t("../alphalfa-utils.js"),r=function(t){this.doDebug=t.doDebug,this.output=t.output,this.outputCtx=t.outputCtx,this.outputHeight=t.outputHeight,this.outputWidth=t.outputWidth,this.video=t.video,this.maskUrl=t.maskUrl,this.dieBecauseUnsupported=t.dieBecauseUnsupported};r.prototype={setupRendererContext:function(){this._setupMaskContext()},getProcessFrameFunc:function(){return this.processMaskFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){i.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processMaskFrame:function(t,e,n,i){e.drawImage(t,0,0,n,i)},_setupMaskContext:function(){this.loadMask(this.maskUrl)},loadMask:function(t){var e=this,n=this.mask=new Image;n.addEventListener("load",function(t){e.putImageMask.call(e,n)}),n.src=t},putImageMask:function(t){this.outputCtx.globalCompositeOperation="source-over",this.outputCtx.drawImage(t,0,0,this.outputWidth,this.outputHeight),this.outputCtx.globalCompositeOperation="source-in"}},e.exports=r},{"../alphalfa-utils.js":82}],88:[function(t,e,n){var i=t("../alphalfa-utils.js"),r=function(t){this.doDebug=t.doDebug,this.gl=t.gl,this.output=t.output,this.buffer=t.buffer,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported};r.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.vbuffer),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.texCoordBuffer),t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return i.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(t,e){this._updateTextureFromVideo(t),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(t){t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(t,e,n,i){this._ieUpdateTextureFromVideo(t,n,i),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(t,e,n){this.bufferCtx.drawImage(this.video,0,0,e,2*n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(t){i.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),t.enableVertexAttribArray(0),t.viewport(0,0,this.output.width,this.output.height),this.doDebug?t.clearColor(0,0,0,.1):t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.program=this._compileProgram(t,this.SHADER_VERTEX,this.SHADER_FRAGMENT),t.useProgram(this.program),this._getGlDataLocations(t),this._createAndBindTexCoordData(t),this._createAndBindTexture(t),this._createAndBindVertexData(t)},_ieGlSetup:function(){this.buffer=this.buffer||i.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(t){this.aTexCoord_loc=t.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=t.getAttribLocation(this.program,"aPosition"),this.uImage_loc=t.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(t){this.vbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aPosition_loc),t.vertexAttribPointer(this.aPosition_loc,2,t.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(t){this.texCoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,.5,1,.5]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aTexCoord_loc),t.vertexAttribPointer(this.aTexCoord_loc,2,t.FLOAT,!1,0,0),t.uniform2f(t.getUniformLocation(this.program,"uHalfTexOffset"),0,.5)},_createAndBindTexture:function(t){this.stackTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.stackTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},_compileProgram:function(t,e,n){var i,r,o;return i=t.createShader(t.VERTEX_SHADER),t.shaderSource(i,e),t.compileShader(i),r=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(r,n),t.compileShader(r),o=t.createProgram(),t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),t.getShaderParameter(i,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",t.getShaderInfoLog(i)),t.getShaderParameter(r,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",t.getShaderInfoLog(r)),t.getProgramParameter(o,t.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",t.getProgramInfoLog(o)),o},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},e.exports=r},{"../alphalfa-utils.js":82}],89:[function(t,e,n){var i=function(t){this.name=t.name,this.frames=t.frames,this.frameSpeed=t.frameSpeed,this.loop=!!t.loop,this.maxLoops=null!=t.maxLoops?t.maxLoops:0,this.onComplete=t.onComplete,this.onCompleteCallback=t.onCompleteCallback,this.currentFrame=0,this.loopCount=0};i.prototype={getClone:function(){return new i({name:this.name,frames:this.frames,frameSpeed:this.frameSpeed,loop:this.loop,maxLoops:this.maxLoops,onComplete:this.onComplete,onCompleteCallback:this.onCompleteCallback})},incrementLoopCount:function(){this.loopCount++},overMaxLoops:function(){return 0!==this.maxLoops&&this.loopCount>=this.maxLoops}},e.exports=i},{}],90:[function(t,e,n){var l=t("./animaniac-animation.js");t("../polyfills/request-animation-frame.js");var i=function(t){this.injectEl=t.injectEl,this.animations={},this.animationConfigs=t.animations,this.autoplayAnimationName=t.autoplay,this.pauseFrame=t.pauseFrame||0,this.sprites={width:t.spriteWidth,height:t.spriteHeight},this.sheet={width:t.sheetWidth,height:t.sheetHeight},this.url=t.url,this.ready=!1,this.init()};i.prototype={doDebug:!1,log:function(){if(this.doDebug){var t=["Animaniac: "].concat(arguments);window.console.log.apply(window.console,t)}},init:function(){this.el=document.createElement("div"),this.el.className="animaniac",this.setInitialStyle(),this.prepareCoords()},setInitialStyle:function(){for(var t={display:"block",width:this.sprites.width+"px",height:this.sprites.height+"px",backgroundColor:"transparent",backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundSize:this.sheet.width+"px "+this.sheet.height+"px"},e=Object.keys(t),n=0;n<e.length;n++)this.el.style[e[n]]=t[e[n]]},prepareCoords:function(){this.cellCoords=this.determineCellCoords(),this.pauseCell=this.cellCoords[this.pauseFrame],this.animations=this.processAnimationConfigs(this.animationConfigs),this.applySpritesheet(),this.autoplayAnimationName?this.playAnimation(this.autoplayAnimationName):this.showCoords(this.pauseCell)},determineCellCoords:function(){var t=[];this.sheet.cols=Math.round(this.sheet.width/this.sprites.width),this.sheet.rows=Math.round(this.sheet.height/this.sprites.height);for(var e=1,n=1,i=(this.sprites.width,this.sprites.height,this.sheet.width,this.sheet.height,this.sheet.cols<=1?0:100/(this.sheet.cols-1)),r=this.sheet.rows<=1?0:100/(this.sheet.rows-1);e<=this.sheet.cols&&n<=this.sheet.rows;)if(t.push({x:((e-1)*i).toFixed(5),y:((n-1)*r).toFixed(5)}),e<this.sheet.cols)e++;else{if(!(n<this.sheet.rows))break;e=1,n++}return t},applySpritesheet:function(){this.el.style.backgroundImage="url("+this.url+")",this.injectEl.appendChild(this.el),this.ready=!0},play:function(){this.unpause(),this.playAnimation(this.currentAnimation.name)},pause:function(){this.paused=!0},unpause:function(){this.paused=!1},isPaused:function(){return this.paused},playAnimation:function(t){this.ready||this.log("Not ready! TODO, add Queuer."),this.currentAnimation=this.animations[t].getClone(),this.currentAnimation?(this.unpause(),this.startAnimation()):this.log("Non-existent animation name passed to Animaniac.play()")},startAnimation:function(){this.boundHandleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this),this.timeSince=0,this.lastTS=Date.now(),this.nextFrame(),window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},handleRequestAnimationFrame:function(){var t=Date.now();this.timeSince>this.currentAnimation.frameSpeed?(this.nextFrame(),this.timeSince=0):(this.timeSince+=t-this.lastTS,this.lastTS=t),this.isPaused()?this.showCoords(this.pauseCell):window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},nextFrame:function(){var t=this.currentAnimation,e=t.currentFrame,n=t.frames[e];if(this.showCoords(n),this.hasNextFrame(t,e))t.currentFrame++;else{if(!t.loop||t.overMaxLoops()){var i=t.onCompleteCallback;if(this.isValidCallback(i)){var r=i.args?i.args:[];i.callback.apply(i.thisArg,r)}return void("string"==typeof t.onComplete?this.playAnimation(t.onComplete):this.pause())}t.incrementLoopCount(),t.currentFrame=0}},isValidCallback:function(t){return!!t&&t.callback&&t.thisArg},hasNextFrame:function(t,e){return!!t.frames[e+1]},showCoords:function(t){var e=t;void 0!==t&&null!=t.x&&null!=t.y||(this.log('Bad coords object passed to "showCoords".'),e=this.pauseCell),this.el.style.backgroundPosition=e.x+"% "+e.y+"%"},setAnimationCoords:function(t){for(var e=0;e<this.animations.length;e++)for(var n=this.animations[e],i=0;i<n.frames.length;i++)n.frames[i]=t[n.frames[i]]},processAnimationConfigs:function(t){null==t&&this.log("Must configure animations!");for(var e={},n=0;n<t.length;n++){for(var i=t[n],r=i.name,o=this.processFrameSeq(i.frames),a=[],s=0;s<o.length;s++){var u=o[s];a.push(this.cellCoords[u])}e[r]=new l({name:r,frames:a,frameSpeed:this.getFrameSpeed(i.fps||24),loop:!!i.loop,maxLoops:i.maxLoops,onComplete:i.onComplete,onCompleteCallback:i.onCompleteCallback})}return e},processFrameSeq:function(t){return Array.isArray(t)?this.processFrameSeqArray(t):"string"==typeof t?this.processFrameSeqString(t):(this.log("Warning, unsupported frame sequence format."),[0])},processFrameSeqArray:function(t){for(var e=t,n=(e.length,0);n<e.length;)if("string"==typeof e[n]){var i=this.processFrameSeqString(e[n]),r=[n,1].concat(i);e.splice.apply(e,r),n+=i.length}else n++;return e},processFrameSeqString:function(t){var e=[],n=t.split("-");if(2!==n.length)return[parseInt(n[0],10)];for(var i=0;i<n.length-1;i++){var r=n[i],o=n[i+1];e=e.concat(this.framesBetween(r,o))}return e},framesBetween:function(t,e){var n=parseInt(t,10),i=parseInt(e,10);return n<i?this._framesBetweenIncremental(n,i):this._framesBetweenDecremental(n,i)},_framesBetweenIncremental:function(t,e){var n=[],i=t;for(n.push(i);++i<=e;)n.push(i);return n},_framesBetweenDecremental:function(t,e){var n=[],i=t;for(n.push(i);--i>=e;)n.push(i);return n},getFrameSpeed:function(t){return 1e3/t}},e.exports=i},{"../polyfills/request-animation-frame.js":95,"./animaniac-animation.js":89}],91:[function(t,e,n){var i=t("./zoolander.js"),r=function(t){t.targetDate||console.warn("Countdowner :: Required argument not provided."),this.el=t.el||document.createElement("div"),this.id="countdowner-"+Date.now()+Math.floor(1e4*Math.random()),this.init(t)};r.prototype={defaults:{splitChar:"",doPad:!1,hideAfterRelease:!1,periods:["days","hours","minutes","seconds"],periodContainerCss:{display:"inline-block"},periodCountCss:{display:"inline-block"},labels:["Days","Hrs","Mins","Secs"],printLabels:!1,labelsBelow:!0,labelsCss:{display:"inline-block"}},classPrefix:"cd-",init:function(t){this.targetDate=this.determineTargetDate(t.targetDate),this.setConfig(t),t.hideAfterRelease&&this.timeRemaining()<=0||(this.zoo=t.zoolander||new i,this.injectCss(),this.initializeHtml(),this.printLabels&&this.initializeLabels(),this._render(),this.renderBind=this._render.bind(this),clearInterval(this.renderInterval),this.renderInterval=setInterval(this.renderBind,1e3))},setConfig:function(t){var e=this.addDefaults(t);for(var n in delete e.targetDate,e)e.hasOwnProperty(n)&&(this[n]=e[n])},addDefaults:function(t){var e=t;for(var n in this.defaults)this.defaults.hasOwnProperty(n)&&(this.isDefined(t[n])||(e[n]=this.defaults[n]));return e},determineTargetDate:function(t){var e;if("object"==typeof t&&this.isDefined(t.month)){var n=t.date||t.day;e=new Date(t.year,t.month-1,n)}else"object"==typeof t&&t instanceof Date?e=t:"string"==typeof t?e=new Date(t):console.warn("No date or invalid date provided. Aborting Countdowner.");return e},makeEl:function(t,e){var n=this.isDefined(e)?e:"div",i=document.createElement(n);if("string"==typeof t)i.classList.add(this.classPrefix+t);else for(var r=0;r<t.length;r++)i.classList.add(this.classPrefix+t[r]);return i},initializeHtml:function(){this.container=this.makeEl("container"),this.container.id=this.id;var t=this.periods;this.periodEls=[];for(var e=t[t.length-1],n=0;n<t.length;n++){var i=this.makePeriodContainer(t[n]);this.container.appendChild(i),this.periodEls[t[n]]=i,this.splitChar&&""!==this.splitChar&&t[n]!==e&&this.container.appendChild(this.makeSplitContainer())}this.el.innerHTML="",this.el.appendChild(this.container)},appendCountChildren:function(t){var e=this.makeEl("count","div");t.appendChild(e)},makePeriodContainer:function(t){var e=this.makeEl([t,"period-container"]);return this.appendCountChildren(e),e},makeSplitContainer:function(){var t=this.makeEl("split-el","span");return t.innerHTML=" "+this.splitChar+" ",t},initializeLabels:function(){for(var t=0;t<this.labels.length;t++){var e=this.makeLabel(this.labels[t],this.periods[t]),n=this.periodEls[this.periods[t]];this.labelsBelow?n.appendChild(e):n.insertBefore(e,n.children[0])}},makeLabel:function(t,e){var n=this.makeEl(["label","label-"+e],"span");return n.innerHTML=t,n},msSec:1e3,msMin:6e4,msHour:36e5,msDay:864e5,timeRemaining:function(){var t=Date.now(),e=this.targetDate.valueOf()-t;return 0<e?e:0},calcRemaining:function(){var t={days:0,hours:0,minutes:0,seconds:0},e=this.timeRemaining();if(0===e)return t;var n=e;if(t.days=Math.floor(n/this.msDay),n-=t.days*this.msDay,t.hours=Math.floor(n/this.msHour),n-=t.hours*this.msHour,t.minutes=Math.floor(n/this.msMin),n-=t.minutes*this.msMin,t.seconds=Math.floor(n/this.msSec),this.doPad)for(var i in t)t.hasOwnProperty(i)&&(t[i]=this.pad(t[i]));return t},pad:function(t){return 10<=t?t:"0"+t},container:function(){return this.el.children[0]},el:function(t){return arguments.length?(this.el=t,this):this.el},_render:function(){var t=this.calcRemaining();this.periodEls.days.children[0].innerHTML=t.days,this.periodEls.hours.children[0].innerHTML=t.hours,this.periodEls.minutes.children[0].innerHTML=t.minutes,this.periodEls.seconds.children[0].innerHTML=t.seconds},injectCss:function(){var t="#"+this.id,e=t+" ."+this.classPrefix,n=[[t,{"box-sizing":"border-box"}],[t+" *",{"box-sizing":"inherit"}],[e+"period-container",this.periodContainerCss],[e+"count",this.periodCountCss],[e+"label",this.labelsCss]];this.zoo.insertRules(n)},isDefined:function(t){return void 0!==t}},e.exports=r},{"./zoolander.js":113}],92:[function(t,e,n){t("../polyfills/request-animation-frame.js");var E=t("./cuepoint.js"),T=t("../utils/notifier.js"),S={onCuepoint:"onCuepoint"};function i(t){var e,n=T(),i=!1,r=null,o=null,a=!1,s=!1,u=[];function l(t){var e,n,i,r;if(!(t&&0<t.length))return null;for(e=[],n=t.length-1;-1!==n;n--)i=t[n],r=E(i),i.error||e.push(r);return e}function c(t){for(var e,n=null,i=u&&0<u.length?u.length:0,r=0;r<i&&null===n;r++)n=(e=u[r]).time>t?e:n;return n}function d(t){null!==e&&b(),void 0===(e=t)||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName||(y(),0<e.duration&&f())}function h(t,e){return t.time<e.time?-1:t.time>e.time?1:0}function f(){var t;if(u&&0!==u.length){for(t=u.length-1;-1!==t;t--)u[t].adjustToDuration(e.duration);u.sort(h),r=c(e.currentTime)}}function p(){r&&void 0!==typeof r.time&&null!==r.time&&e&&void 0!==typeof e.currentTime&&null!==e.currentTime&&r.time<=e.currentTime&&(o=r,i||(o.trigger(e),n.notify(S.onCuepoint,[o,e])),r=c(e.currentTime)),a&&window.requestAnimationFrame(p)}function m(){r=c(e.currentTime)}function g(){a=!0,p()}function v(){a=!1}function _(){a&&"hidden"===document.visibilityState&&e.addEventListener("timeupdate",p),"hidden"!==document.visibilityState&&e.removeEventListener("timeupdate",p)}function y(){s||(s=!0,e.addEventListener("durationchange",f),e.addEventListener("seeked",m),e.addEventListener("playing",g),e.addEventListener("pause",v),e.addEventListener("ended",v),e.addEventListener("abort",v),e.addEventListener("emptied",v),e.addEventListener("error",v),e.addEventListener("stalled",v),e.addEventListener("waiting",v),document.addEventListener("visibilitychange",_))}function b(){s&&(s=!1,e.removeEventListener("durationchange",f),e.removeEventListener("seeked",m),e.removeEventListener("playing",g),e.removeEventListener("pause",v),e.removeEventListener("ended",v),e.removeEventListener("abort",v),e.removeEventListener("emptied",v),e.removeEventListener("error",v),e.removeEventListener("stalled",v),e.removeEventListener("waiting",v),e.removeEventListener("timeupdate",p),document.removeEventListener("visibilitychange",_))}function w(t){!function(t,e){for(var n,i=!1,r=Object.keys(e),o=r.length,a=0;a<o&&!i;a++)n=r[a],i=t.hasOwnProperty(n);return i}(t,S)?console.warn("CuepointEngine.subscribe() :: observer must have valid notification keys!\n\tValid notification keys = '"+Object.keys(S).join("', '")+"'\n\tObserver:",t):n.subscribe(t)}function A(t){var e=t.cuepoints&&0<t.cuepoints.length?t.cuepoints:[];u=l(e),d(t.media),t.observer&&w(t.observer)}return A(t),{init:A,start:y,stop:b,destroy:function(){b(),n.clear(),a=!1,e=u=o=r=null},getCuepoints:function(){return u},setCuepoints:function(t){var e=0<t.length?t:[];u=l(e)},addCuepoint:function(t){E(t).error||(u.push(E(t)),f())},removeCuepoint:function(t){var e=u.indexOf(t);-1<e&&(u.splice(e,1),f())},getMedia:function(){return e},setMedia:d,getIgnoreCuepoints:function(){return i},setIgnoreCuepoints:function(t){i=t},subscribe:w,unsubscribe:n.unsubscribe,NOTIFICATIONS:S}}Object.defineProperty(i,"NOTIFICATIONS",{value:S,writable:!1,enumerable:!0,configurable:!1}),e.exports=i},{"../polyfills/request-animation-frame.js":95,"../utils/notifier.js":109,"./cuepoint.js":93}],93:[function(t,e,n){function u(a){var n=function(t){for(var e,n={},i=a.replace(/(\D{1,})([\d])/g,"$1,$2").split(","),r=0,o=i.length;r<o;r++)n[(e=i[r].split(/(\D{1,})/))[1]]=parseInt(e[0],10);return n}(),i={m:6e4,s:1e3,ms:1};return Object.keys(n).reduce(function(t,e){return t+n[e]*i[e]},0)}e.exports=function(t){if(!t||!t.hasOwnProperty("time"))return{time:-1,error:"Cuepoint Error: cuepointData is invalid",data:t};var n,i={},e=[],r=t.time,o="string"==typeof r,a=o?r.match(/\-?\d+([%msh]+)/):[],s=a&&0<a.length?a[1]:"ms";switch(!0){case o&&"%"===s:n=parseInt(r,10);break;case!o:n=r;break;case o&&0===r.indexOf("-")||r<0:n=-u(r.substring(1)),s="ms";break;default:n=u(r),s="ms"}return i.timestamp=r,i.endOffset=n<0,i.durationDependent="%"===s||i.endOffset,i.time=function(t,e){var n;switch(!0){case"s"===s:n=t;break;case"%"===s:n=t/100;break;default:n=t/1e3}return n}(n),i.name=t.hasOwnProperty("name")?t.name:"Unnamed Cuepoint",i.type=t.hasOwnProperty("type")?t.type:"cuepoint",i.data=t.hasOwnProperty("data")?t.data:{},t.hasOwnProperty("callback")&&"function"==typeof t.callback&&(i.callback=t.callback),i.trigger=function(t){return i.callback&&i.callback(i,t),e.push(Date.now()),i},i.reset=function(){e=[]},i.getHistory=function(){return e},i.adjustToDuration=function(t){var e;return"%"===s&&(e=t*(n/100),i.time=e),i.endOffset&&(e=t+n/1e3,i.time=e),i},i}},{}],94:[function(t,e,n){var i={AlphalfaPlayer:t("./alphalfa/alphalfa.js"),Animaniac:t("./animaniac/animaniac.js"),Countdowner:t("./countdowner.js"),CuepointEngine:t("./cuepoints/cuepoint-engine.js"),Reely:t("./reely/reely.js"),Uatu:t("./uatu.js"),Zoolander:t("./zoolander.js")};window.ad_design=i,e.exports=i},{"./alphalfa/alphalfa.js":83,"./animaniac/animaniac.js":90,"./countdowner.js":91,"./cuepoints/cuepoint-engine.js":92,"./reely/reely.js":106,"./uatu.js":107,"./zoolander.js":113}],95:[function(t,e,n){!function(){for(var o=0,t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-o)),r=window.setTimeout(function(){t(n+i)},i);return o=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},{}],96:[function(t,e,n){e.exports={DEFAULT_SPRITESHEET:"https://m.media-amazon.com/images/I/21uHhW38EgL.svg",DEFAULT_OVERLAY_SPRITESHEET:"https://m.media-amazon.com/images/G/01/IMDb/design/modules/reely/sprites/reely-overlay._V503633712_.png"}},{}],97:[function(t,e,n){var i=t("./reely-scrubber.js"),r=t("./reely-css-classes.js"),o=t("./reely-el-maker.js"),a=t("./reely-events.js"),s=function(t,e){this.eventBus=t.eventBus,this.spriteDimensions=t.spriteDimensions,this.controlBarConfig=t.controlBarConfig,this.spritesheet=t.spritesheet,this.zoo=t.zoo,this.init(e)};s.prototype={FADE_DELAY_SECS:2,init:function(t){this.el=o.make("div",r.CONTROL_BAR_CONTAINER),this.el.style.display="none",this.reely=t,this.controlBar=o.make("div",[r.CONTROL_BAR,r.REPEAT_X_SPRITE+"-controlsBG"]),this.appendTableLayoutDivs(this.controlBar),this.injectControlsStyles(),this.populateControls(),this.el.appendChild(this.controlBar),this.controlBarConfig.autohide&&(this.fadeOutBind=this.fadeOut.bind(this),this.resetFadeOutDelay(),this.autohideListen()),this.broadcastInteraction(),this.listen()},populateControls:function(){this.createControlButtons(),this.scrubber=new i({eventBus:this.eventBus,spritesheet:this.spritesheet,spriteDimensions:this.spriteDimensions,zoo:this.zoo}),this.midCell.appendChild(this.scrubber.getEl())},clearFadeOutDelay:function(){clearTimeout(this.fadeOutDelay)},resetFadeOutDelay:function(){this.clearFadeOutDelay(),this.fadeOutDelay=setTimeout(this.fadeOutBind,1e3*this.FADE_DELAY_SECS)},fadeIn:function(){r.remove(this.el,r.TRANSPARENT),this.eventBus.trigger(a.FADE_IN_START)},fadeOut:function(){r.add(this.el,r.TRANSPARENT),this.eventBus.trigger(a.FADE_OUT_START)},broadcastInteraction:function(){this.el.addEventListener("mousemove",this.eventBus.triggers[a.MOUSE_MOVE])},listen:function(){this.eventBus.addEventListener(a.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(a.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.addEventListener(a.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.addEventListener(a.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.addEventListener(a.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.addEventListener(a.VID_EXITFULLSCREEN,this.toggleNormalFullscreen,this,"normal"),this.eventBus.addEventListener(a.VID_ENTERFULLSCREEN,this.toggleNormalFullscreen,this,"fullscreen")},autohideListen:function(){this.eventBus.addEventListener(a.MOUSE_IN,this.onMouseIn,this),this.eventBus.addEventListener(a.MOUSE_OUT,this.onMouseOut,this),this.eventBus.addEventListener(a.MOUSE_MOVE,this.onMouseMove,this)},teardown:function(){this.clearFadeOutDelay(),this.scrubber.teardown(),this.el.removeEventListener("mousemove",this.eventBus.triggers[a.MOUSE_MOVE]),this.eventBus.removeEventListener(a.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(a.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.removeEventListener(a.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.removeEventListener(a.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.removeEventListener(a.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.removeEventListener(a.VID_EXITFULLSCREEN,this.toggleNormalFullscreen,this,"normal"),this.eventBus.removeEventListener(a.VID_ENTERFULLSCREEN,this.toggleNormalFullscreen,this,"fullscreen"),this.eventBus.removeEventListener(a.MOUSE_IN,this.onMouseIn,this),this.eventBus.removeEventListener(a.MOUSE_OUT,this.onMouseOut,this),this.eventBus.removeEventListener(a.MOUSE_MOVE,this.onMouseMove,this)},onLoadedData:function(t){this.el.style.display=""},togglePlayPause:function(t){var e=this.isToggled(this.playPause);(!e&&"play"===t||e&&"pause"===t)&&this.toggleTwoState(this.playPause)},toggleMuteUnmute:function(t){var e=this.isToggled(this.muteUnmute);(!e&&"muted"===t||e&&"unmuted"===t)&&this.toggleTwoState(this.muteUnmute)},toggleNormalFullscreen:function(t){var e=this.isToggled(this.fullscreenNormal);(!e&&"fullscreen"===t||e&&"normal"===t)&&this.toggleTwoState(this.fullscreenNormal)},isToggled:function(t){return r.contains(t,r.TOGGLED)},toggleTwoState:function(t){this.isToggled(t)?r.remove(t,r.TOGGLED):r.add(t,r.TOGGLED)},onMouseIn:function(t){this.fadeIn()},onMouseMove:function(t){this.fadeIn(),this.resetFadeOutDelay()},onMouseOut:function(t){this.resetFadeOutDelay()},appendTableLayoutDivs:function(t){this.midCell=o.make("div",r.CONTROL_BAR_MID),this.leftCell=o.make("div",r.CONTROL_BAR_LEFT),this.rightCell=o.make("div",r.CONTROL_BAR_RIGHT),t.appendChild(this.midCell),t.appendChild(this.leftCell),t.appendChild(this.rightCell)},createControlButtons:function(){this.playPause=o.createTwoStateButton("play-pause",[{defaultIconName:"play",hoverIconName:"play-hover"},{defaultIconName:"pause",hoverIconName:"pause-hover"}]),this.muteUnmute=o.createTwoStateButton("mute-unmute",[{defaultIconName:"sound-off",hoverIconName:"sound-off-hover"},{defaultIconName:"sound-on",hoverIconName:"sound-on-hover"}]);var t=this.eventBus.triggerBind(a.PLAY_PAUSE_TOGGLE),e=this;this.playPause.addEventListener("click",function(){return e.reely&&(e.reely.isPausedByUser=e.reely.isPlaying()),t()}),this.leftCell.appendChild(this.playPause),this.muteUnmute.addEventListener("click",this.eventBus.triggerBind(a.MUTE_UNMUTE_TOGGLE)),this.rightCell.appendChild(this.muteUnmute)},addFullscreenButton:function(){r.add(this.midCell,r.CONTROL_BAR_MID+"-fullscreen"),r.add(this.rightCell,r.CONTROL_BAR_RIGHT+"-fullscreen"),this.fullscreenNormal=o.createTwoStateButton("fullscreen-normal",[{defaultIconName:"fullscreen",hoverIconName:"fullscreen-hover"},{defaultIconName:"normal",hoverIconName:"normal-hover"}]),this.fullscreenNormal.addEventListener("click",this.eventBus.triggerBind(a.FULLSCREEN_NORMAL_TOGGLE)),this.rightCell.appendChild(this.fullscreenNormal)},injectControlsStyles:function(){var t=[];t=(t=t.concat(this.getButtonStyles())).concat(this.getControlBarStyles()),this.zoo.insertRules(t)},determineButtonVisualWidth:function(){return this.spriteDimensions.spriteWidth+2*this.spriteDimensions.buttonPadding},determineContainerStyles:function(){var t=this.controlBarConfig,e={position:"absolute",display:"inline-block",height:t.height+"px",width:"100%",transition:"opacity 1s ease"};return"center"===t.anchorX&&(e.margin="0 auto",e.textAlign="center"),e[t.anchorY]=t.offsetY,e},determineBarElStyles:function(){var t=this.controlBarConfig,e={position:"relative",display:"block",height:"inherit",width:t.width,"background-color":"transparent","background-position":"0 0","background-repeat":"repeat-x"};return this.controlBarConfig.hideBG||(e["background-image"]='url("'+this.spritesheet.getSrc()+'")'),"center"===t.anchorX?e.margin="0 auto":e[t.anchorX]=t.offsetX,e},getButtonStyles:function(){return[["."+r.BUTTON_ICON,{height:this.spriteDimensions.spriteHeight+"px",width:this.spriteDimensions.spriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getControlBarStyles:function(){var t=this.determineButtonVisualWidth(),e=this.determineContainerStyles(),n=this.determineBarElStyles();return[["."+r.CONTROL_BAR_CONTAINER,e],["."+r.FULLSCREEN+" ."+r.CONTROL_BAR_CONTAINER,{bottom:0,top:"auto"}],["."+r.CONTROL_BAR,n],["."+r.FULLSCREEN+" ."+r.CONTROL_BAR,{left:0,right:"auto",width:"100%"}],[["."+r.CONTROL_BAR_LEFT,"."+r.CONTROL_BAR_RIGHT],{display:"inline-block",height:"100%",width:t+"px"}],[["."+r.CONTROL_BAR_RIGHT+"-fullscreen"],{width:2*t+"px"}],["."+r.CONTROL_BAR_LEFT,{float:"left"}],["."+r.CONTROL_BAR_RIGHT,{float:"right"}],["."+r.CONTROL_BAR_MID,{position:"absolute",left:"0",display:"block",height:"100%",width:"100%","box-sizing":"border-box","padding-left":t+"px","padding-right":t+"px"}],["."+r.CONTROL_BAR_MID+"-fullscreen",{"padding-right":2*t+"px"}],[".reely-two-state-fullscreen-normal",{"padding-left":t+"px"}]]}},e.exports=s},{"./reely-css-classes.js":98,"./reely-el-maker.js":99,"./reely-events.js":101,"./reely-scrubber.js":104}],98:[function(t,e,n){var i={CONTAINER:"reely-container",VIDEO:"reely-video",OVERLAY_CONTAINER:"reely-overlay-container",OVERLAY_SLATE:"reely-overlay-slate",CONTROL_BAR_CONTAINER:"reely-control-bar-container",CONTROL_BAR:"reely-control-bar",CONTROL_BAR_LEFT:"reely-control-bar-left",CONTROL_BAR_RIGHT:"reely-control-bar-right",CONTROL_BAR_MID:"reely-control-bar-mid",BUTTON:"reely-button",BUTTON_ICON:"reely-button-icon",BUTTON_ICON_LARGE:"reely-button-icon-large",TWO_STATE_BUTTON:"reely-two-state",TWO_STATE_DEFAULT:"reely-two-state-default",TWO_STATE_ALT:"reely-two-state-toggled",REPEAT_X_SPRITE:"reely-repeat-x-sprite",ICON_LARGE:"reely-icon-large",ICON:"reely-icon",ICON_DEFAULT:"reely-default-icon",ICON_HOVER:"reely-hover-icon",ICON_ACTIVE:"reely-toggle-active",ICON_DOWN:"reely-toggle-down",LOADING_SPINNER:"reely-loading-spinner",SCRUBBER_CONTAINER:"reely-scrubber-container",TOGGLED:"reely-toggled",UNSELECTABLE:"reely-unselectable",HIDDEN:"reely-hidden",INVISIBLE:"reely-invisible",TRANSPARENT:"reely-transparent",FULLSCREEN:"reely-fullscreen",add:function(t,e){switch(void 0===e&&console.warn("Attempted to add() an undefined class."),this.mode()){case"modern":return t.classList.add(e);case"oldIE":return t.className+=" "+e}},contains:function(t,e){switch(void 0===e&&console.warn("Attempted to check contains() an undefined class."),this.mode()){case"modern":return t.classList.contains(e);case"oldIE":return-1!==t.className.split(" ").indexOf(e)}},remove:function(t,e){void 0===e&&console.warn("Attempted to remove() an undefined class."),this._removeClass||(this._removeClass=this.removeModes[this.mode()]),this._removeClass(t,e)},removeModes:{modern:function(t,e){t.classList.remove(e)},oldIE:function(t,e){var n=t.className.split(" "),i=n.indexOf(e);-1!==i&&n.splice(i,1),t.className=n.join(" ")}},mode:function(){if(!this._mode){var t=document.createElement("div");this._mode="classList"in t?"modern":"oldIE",t=void 0}return this._mode}};e.exports=i},{}],99:[function(t,e,n){var u=t("./reely-css-classes.js"),i={make:function(t,e,n){var i=document.createElement(t);return i.setAttribute("class",this.arrayWrap(e).join(" ")),n&&(i.id=n),i},createIcon:function(t,e){return this._createIcon(u.ICON,t,e)},createLargeIcon:function(t,e){return this._createIcon(u.ICON_LARGE,t,e)},_createIcon:function(t,e,n){var i=this.concatClasses([t,t+"-"+e],n);return this.make("div",i)},createRepeatXSprite:function(t,e){var n=this.concatClasses([u.REPEAT_X_SPRITE,u.REPEAT_X_SPRITE+"-"+t],e);return this.make("div",n)},createSpriteEl:function(t,e){var n=t;return e&&(n=this.concatClasses(n,e)),this.make("div",n)},concatClasses:function(t,e){return e?"string"==typeof e?(t.push(e),t):t.concat(e):t},createTwoStateButton:function(t,e){var n=this.createIcon,i=u.BUTTON_ICON;return this._createTwoStateButton(t,e,i,n)},createLargeTwoStateButton:function(t,e){var n=this.createLargeIcon,i=u.BUTTON_ICON_LARGE;return this._createTwoStateButton(t,e,i,n)},_createTwoStateButton:function(t,e,n,i){var r=this.make("div",[u.TWO_STATE_BUTTON,u.TWO_STATE_BUTTON+"-"+t]),o=this.createButtonState(e[0],u.TWO_STATE_DEFAULT,n,i),a=this.createButtonState(e[1],u.TWO_STATE_ALT,n,i);return r.appendChild(o),r.appendChild(a),r},createButtonState:function(t,e,n,i){return i||(i=this.createIcon),n||(n=u.BUTTON_ICON),this._createButtonState(t,e,n,i)},_createButtonState:function(t,e,n,i){var r=[u.BUTTON,u.UNSELECTABLE];r.push(n),e&&(r=r.concat(this.arrayWrap(e)));var o=this.make("div",r),a=i.call(this,t.defaultIconName,u.ICON_DEFAULT),s=i.call(this,t.hoverIconName,u.ICON_HOVER);return o.appendChild(a),o.appendChild(s),o},arrayWrap:function(t){return void 0===t?[]:"[object Array]"!==Object.prototype.toString.call(t)?[t]:t}};e.exports=i},{"./reely-css-classes.js":98}],100:[function(t,e,n){var i=t("./reely-events.js"),r=function(){this.init()};r.prototype={reelyEvents:[],init:function(){this.triggers={},this.listeners={},this.reelyEvents=this.getReelyEventsArray();for(var t=0;t<this.reelyEvents.length;t++){var e=this.reelyEvents[t];this.triggers[e]=this.triggerBind(e),this.listeners[e]=[]}},getReelyEventsArray:function(){var t=[];for(var e in i)i.hasOwnProperty(e)&&t.push(i[e]);return t},addEventListener:function(t,e,n){this.listeners[t]||console.warn("Attempted to addEventListener with unsupported event :: ",t);var i=Array.prototype.slice.call(arguments);i.splice(0,3);var r={callback:e,context:n,args:i};this.listeners[t].push(r)},removeEventListener:function(t,e,n){this.listeners[t]||console.warn("Attempted to removeEventListener with unsupported event :: ",t);for(var i,r=this.listeners[t].slice(),o=0;o<r.length;o++)if((i=r[o]).callback===e&&i.context===n){r.splice(o,1);break}this.listeners[t]=r},triggerBind:function(t,e){return this.trigger.bind(this,t)},trigger:function(t){this.listeners[t]||console.warn("Attempted to trigger an unsupported event :: ",t);var e=Array.prototype.slice.call(arguments);e.splice(0,1);for(var n,i=this.listeners[t],r=[],o=0;o<i.length;o++)r=(n=i[o]).args.concat(e),n.callback.apply(n.context,r)}},e.exports=r},{"./reely-events.js":101}],101:[function(t,e,n){e.exports={STARTED:"started",PLAY_PAUSE_TOGGLE:"playPauseToggle",MUTE_UNMUTE_TOGGLE:"muteUnmuteToggle",FULLSCREEN_NORMAL_TOGGLE:"fullscreenNormalToggle",SCRUBBER_BAR_CLICK:"scrubberBarClick",MOUSE_IN:"mouseIn",MOUSE_OUT:"mouseOut",MOUSE_MOVE:"mouseMove",MUTED:"muted",UNMUTED:"unmuted",VID_ENTERFULLSCREEN:"video:enterfullscreen",VID_EXITFULLSCREEN:"video:exitfullscreen",VID_LOADSTART:"video:loadstart",VID_LOADEDMETADATA:"video:loadedmetadata",VID_LOADEDDATA:"video:loadeddata",VID_CANPLAY:"video:canplay",VID_CANPLAYTHROUGH:"video:canplaythrough",VID_WAITING:"video:waiting",VID_PROGRESS:"video:progress",VID_SUSPEND:"video:suspend",VID_PLAY:"video:play",VID_PLAYING:"video:playing",VID_PAUSE:"video:pause",VID_TIMEUPDATE:"video:timeupdate",VID_ENDED:"video:ended",FADE_OUT_START:"reely:fadeoutstart",FADE_IN_START:"reely:fadeinstart"}},{}],102:[function(t,e,n){var i=t("./reely-css-classes.js"),r=t("./reely-el-maker.js"),o=t("./reely-events.js"),a=function(t){this.eventBus=t.eventBus,this.zoo=t.zoo,this.init()};a.prototype={PROGRESS_TICKS_TO_SHOW:5,init:function(){this.el=r.make("div",i.LOADING_SPINNER+"-outer-container"),this.innerContainer=r.make("div",i.LOADING_SPINNER+"-inner-container"),this.spinner=r.make("div",i.LOADING_SPINNER),this.innerContainer.appendChild(this.spinner),this.el.appendChild(this.innerContainer),this.injectLoadingSpinnerCSS(),this.progressTicks=0,this.listen()},listen:function(){this.eventBus.addEventListener(o.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(o.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(o.VID_PROGRESS,this.onProgress,this),this.eventBus.addEventListener(o.VID_SUSPEND,this.onSuspend,this),this.eventBus.addEventListener(o.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(o.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(o.VID_PAUSE,this.onPause,this)},teardown:function(){this.eventBus.removeEventListener(o.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(o.VID_CANPLAY,this.onCanPlay,this),this.eventBus.removeEventListener(o.VID_PROGRESS,this.onProgress,this),this.eventBus.removeEventListener(o.VID_SUSPEND,this.onSuspend,this),this.eventBus.removeEventListener(o.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(o.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(o.VID_PAUSE,this.onPause,this)},onPlay:function(){this.isPlaying=!0,this.progressTicks=0},onPause:function(){this.isPlaying=!1,this.progressTicks=0},onLoadedMetadata:function(){this.show()},onCanPlay:function(){this.hide()},onSuspend:function(){this.progressTicks=0},onProgress:function(){this.isPlaying&&(this.progressTicks++,this.progressTicks>=this.PROGRESS_TICKS_TO_SHOW&&this.show())},onTimeUpdate:function(){this.progressTicks=0,this.hide()},hide:function(){this.isHidden||(this.isHidden=!0,i.add(this.el,i.HIDDEN),i.remove(this.spinner,i.TRANSPARENT))},show:function(){this.isHidden&&(this.isHidden=!1,i.remove(this.el,i.HIDDEN),i.remove(this.spinner,i.TRANSPARENT))},injectLoadingSpinnerCSS:function(){var t="loading-spinner-spin";this.zoo.insertKeyframes(t,this.getSpinnerKeyframes());var e=[];e=e.concat(this.getSpinnerStyles()),this.zoo.insertRules(e),this.zoo.insertAnimation("."+i.LOADING_SPINNER,"animation",t+" 1.6s linear infinite")},getSpinnerKeyframes:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(359deg)"}}},getSpinnerStyles:function(){return[["."+i.LOADING_SPINNER+"-outer-container",{position:"absolute",top:"50%",left:"50%",height:0,width:0}],["."+i.LOADING_SPINNER+"-inner-container",{display:"block",height:"64px",width:"64px",transform:"translate(-50%, -50%)"}],["."+i.LOADING_SPINNER,{display:"block","box-sizing":"border-box",height:"64px",width:"64px",background:"transparent","border-radius":"50%","border-top":"7px solid rgba(255, 255, 255, 1)","border-right":"7px solid rgba(255, 255, 255, 0.5)","border-bottom":"7px solid rgba(255, 255, 255, 0.5)","border-left":"7px solid rgba(255, 255, 255, 0.5)",transition:"opacity 1s ease-out"}]]}},e.exports=a},{"./reely-css-classes.js":98,"./reely-el-maker.js":99,"./reely-events.js":101}],103:[function(t,e,n){var i=t("./reely-css-classes.js"),r=t("./reely-el-maker.js"),o=t("./reely-events.js"),a=t("./reely-loading-spinner.js"),s=function(t,e){this.eventBus=t.eventBus,this.spritesheet=t.spritesheet,this.spriteDimensions=t.spriteDimensions,this.slate=t.slate,this.zoo=t.zoo,this.loadingSpinner=new a(t),this.init(e)};s.prototype={init:function(t){this.el=r.make("div",i.OVERLAY_CONTAINER),this.reely=t,this.isPlaying(!1),this.isEnded(!1),this.showSlate(),this.playReplay=r.createLargeTwoStateButton("overlay-play-pause",[{defaultIconName:"overlay-play",hoverIconName:"overlay-play-hover"},{defaultIconName:"overlay-replay",hoverIconName:"overlay-replay-hover"}]),this.el.appendChild(this.playReplay),this.el.appendChild(this.loadingSpinner.el),this.hide(),this.broadcastInteraction(),this.injectOverlayStyles(),this.listen()},hide:function(){i.add(this.playReplay,i.TRANSPARENT)},show:function(){i.remove(this.playReplay,i.TRANSPARENT)},hideSlate:function(){i.remove(this.el,i.OVERLAY_SLATE)},showSlate:function(){i.add(this.el,i.OVERLAY_SLATE)},listen:function(){this.eventBus.addEventListener(o.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(o.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(o.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(o.VID_PAUSE,this.onPause,this),this.eventBus.addEventListener(o.VID_ENDED,this.onVideoEnded,this)},teardown:function(){this.loadingSpinner.teardown(),this.el.removeEventListener("click",this.eventBus.triggers[o.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("mouseenter",this.eventBus.triggers[o.MOUSE_IN]),this.el.removeEventListener("mouseleave",this.eventBus.triggers[o.MOUSE_OUT]),this.el.removeEventListener("mousemove",this.eventBus.triggers[o.MOUSE_MOVE]),this.eventBus.removeEventListener(o.VID_CANPLAY,this.onLoadedMetadata,this),this.eventBus.removeEventListener(o.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(o.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(o.VID_PAUSE,this.onPause,this),this.eventBus.removeEventListener(o.VID_ENDED,this.onVideoEnded,this)},broadcastInteraction:function(){var t=this.eventBus.triggers[o.PLAY_PAUSE_TOGGLE],e=this;this.el.addEventListener("click",function(){return e.reely&&(e.reely.isPausedByUser=e.reely.isPlaying()),t()}),this.el.addEventListener("mouseenter",this.eventBus.triggers[o.MOUSE_IN]),this.el.addEventListener("mouseleave",this.eventBus.triggers[o.MOUSE_OUT]),this.el.addEventListener("mousemove",this.eventBus.triggers[o.MOUSE_MOVE])},onCanPlay:function(){this.isPlaying()||this.show()},onScrubberBarClick:function(){this.setToPlayIcon(),this.hideSlate()},onPlay:function(){this.setToPlayIcon(),this.isEnded(!1),this.isPlaying(!0),this.hide(),this.hideSlate()},onPause:function(){this.isPlaying(!1),this.show()},onVideoEnded:function(){this.setToReplayIcon(),this.isEnded(!0),this.show(),this.showSlate()},setToPlayIcon:function(){i.remove(this.playReplay,i.TOGGLED)},setToReplayIcon:function(){i.add(this.playReplay,i.TOGGLED)},isPlaying:function(t){return null!=t&&(this._isPlaying=t),this._isPlaying},isEnded:function(t){return null!=t&&(this._isEnded=t),this._isEnded},injectOverlayStyles:function(){var t=[];t=(t=(t=(t=t.concat(this.getContainerStyles())).concat(this.getSlateStyles())).concat(this.getButtonStyles())).concat(this.getHoverOverrideStyles()),this.zoo.insertRules(t)},getContainerStyles:function(){return[["."+i.OVERLAY_CONTAINER,{position:"absolute",top:0,left:0,display:"block",height:"100%",width:"100%",cursor:"pointer","text-align":"center"}],["."+i.OVERLAY_CONTAINER+" *",{visibility:"inherit"}]]},getSlateStyles:function(){return this.slate?[["."+i.OVERLAY_SLATE,{background:"url("+this.slate+") no-repeat center center transparent","background-size":"contain"}]]:[]},getButtonStyles:function(){return[["."+i.OVERLAY_CONTAINER+" ."+i.TWO_STATE_BUTTON,{top:"50%",left:"50%"}],["."+i.OVERLAY_CONTAINER+" ."+i.BUTTON_ICON_LARGE,{transform:"translate(-50%, -50%)"}],["."+i.BUTTON_ICON_LARGE,{height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getHoverOverrideStyles:function(){var t=i;return[[["."+t.OVERLAY_CONTAINER+" ."+t.TWO_STATE_BUTTON+" ."+t.TWO_STATE_DEFAULT,"."+t.OVERLAY_CONTAINER+" ."+t.TWO_STATE_BUTTON+" ."+t.TWO_STATE_DEFAULT],{visibility:"inherit"}],[["."+t.OVERLAY_CONTAINER+" ."+t.BUTTON+" ."+t.ICON_DEFAULT,"."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_HOVER],{opacity:1}],[["."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_DEFAULT,"."+t.OVERLAY_CONTAINER+" ."+t.BUTTON+" ."+t.ICON_HOVER],{opacity:0}],[["."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_DEFAULT,"."+t.OVERLAY_CONTAINER+" ."+t.BUTTON+" ."+t.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]}},e.exports=s},{"./reely-css-classes.js":98,"./reely-el-maker.js":99,"./reely-events.js":101,"./reely-loading-spinner.js":102}],104:[function(t,e,n){var i=t("./reely-css-classes.js"),r=t("./reely-el-maker.js"),o=t("./reely-events.js"),a=function(t){this.eventBus=t.eventBus,this.spritesheet=t.spritesheet,this.spriteDimensions=t.spriteDimensions,this.zoo=t.zoo,this.init()};a.prototype={init:function(){this.el=r.make("div",i.SCRUBBER_CONTAINER),this.el.addEventListener("click",this.onScrubberClick.bind(this)),this.els=this.createScrubberBarEls(),this.appendEls(),this.injectScrubberStyles(),this.listen()},getEl:function(){return this.el},appendEls:function(){this.el.appendChild(this.els.bg),this.el.appendChild(this.els.buffered),this.el.appendChild(this.els.played),this.el.appendChild(this.els.thumb)},createScrubberBarEls:function(){var t={};return t.bg=r.createRepeatXSprite("scrubber-bg"),t.bg.style.width="100%",t.played=r.createRepeatXSprite("scrubber-played-bg"),t.played.style.width=0,t.buffered=r.createRepeatXSprite("scrubber-buffered-bg"),t.buffered.style.width=0,t.thumb=r.createButtonState({defaultIconName:"scrubber-tab",hoverIconName:"scrubber-tab-hover"},i.BUTTON+"-scrubber-tab"),t},listen:function(){this.eventBus.addEventListener(o.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(o.VID_PLAY,this.onPlay,this)},teardown:function(){this.eventBus.removeEventListener(o.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(o.VID_PLAY,this.onPlay,this)},onPlay:function(t){this.lastUpdateMs=Date.now()},onTimeUpdate:function(t){var e,n=Date.now();this.lastUpdateMs&&(e=(n-this.lastUpdateMs)/1e3);var i=t.target,r=i.currentTime/i.duration;this.setScrubberBar(r,e);var o=this.determineBufferedFraction(i.buffered,i.duration);this.setBufferBar(o),this.lastUpdateMs=n},setScrubberTransition:function(t){t?(this.els.played.style.transition="width "+t+"s linear",this.els.thumb.style.transition="left "+t+"s linear"):(this.els.played.style.transition="",this.els.thumb.style.transition="")},onScrubberClick:function(t){if(!i.contains(t.target,"reely-icon")){var e=(void 0!==t.offsetX?t.offsetX:t.layerX)/this.el.clientWidth;this.eventBus.trigger(o.SCRUBBER_BAR_CLICK,{clickedFraction:e})}},setScrubberBar:function(t,e){this.playedFraction=t,this.transitionInS=e,this.setScrubberTransition(this.transitionInS||void 0);var n=100*this.playedFraction;this.els.played.style.width=n+"%",this.els.thumb.style.left=n+"%"},setBufferBar:function(t){var e=100*t;this.els.buffered.style.width=e+"%"},determineBufferedFraction:function(t,e){for(var n=0,i=0,r=0;r<t.length;r++)i+=t.end(0)-t.start(0);return 0<i&&(n=i/e),n},injectScrubberStyles:function(){var t=[];t=(t=t.concat(this.getScrubberBarStyles())).concat(this.getScrubberThumbOverrideStyles()),this.zoo.insertRules(t)},getScrubberBarStyles:function(){return[["."+i.SCRUBBER_CONTAINER,{position:"relative",height:"100%",width:"100%","box-sizing":"border-box",overflow:"initial","padding-top":this.spriteDimensions.buttonPadding+"px","padding-bottom":this.spriteDimensions.buttonPadding+"px"}],["."+i.BUTTON+"-scrubber-tab",{position:"absolute",top:0,left:0,transform:"translateX(-"+this.spriteDimensions.spriteWidth/2+"px)","padding-left":0,"padding-right":0,"pointer-events":"none"}]]},getScrubberThumbOverrideStyles:function(){return[["."+i.SCRUBBER_CONTAINER+" ."+i.ICON_HOVER,{left:0}]]}},e.exports=a},{"./reely-css-classes.js":98,"./reely-el-maker.js":99,"./reely-events.js":101}],105:[function(t,e,n){var i=t("./reely-css-classes.js"),r=t("./reely-config.js"),o=function(t){this.spriteDimensions=t.spriteDimensions,this.controlBarConfig=t.controlBarConfig,this.zoo=t.zoo,this.spritesheetUrls=this.determineSpritesheetUrls(t.spritesheetUrls),this.overlaySpritesheetUrls=this.determineOverlaySpritesheetUrls(t.overlaySpritesheetUrls),this.init()};o.prototype={TEMP_FORCE_PNG_SPRITESHEET:!0,init:function(){this.doesSupportSVG=this.supportsSVG(),this.spritesheetSrc=this.determineSpritesheetMode(this.spritesheetUrls),this.overlaySpritesheetSrc=this.determineSpritesheetMode(this.overlaySpritesheetUrls),this.spritesData=this.initSpritesData();var n=new Image;n.addEventListener("load",function(t){document.body.appendChild(n);var e=(t.path||t.composedPath&&t.composedPath())[0];this.rows=e.height/e.width*2,this.injectSpritesheetCSS(),document.body.removeChild(n)}.bind(this)),n.style.visibility="hidden",n.style.position="fixed",n.style.left="-9999px",n.style.top="-9999px",n.style.zIndex="-9999",n.style.pointerEvents="none",n.src=this.spritesheetSrc},getSrc:function(){return this.spritesheetSrc},getOverlaySrc:function(){return this.overlaySpritesheetSrc},supportsSVG:function(){return"undefined"!=typeof SVGRect},determineSpritesheetMode:function(t){return!this.TEMP_FORCE_PNG_SPRITESHEET&&this.doesSupportSVG&&t.svg?t.svg:t.png},initSpritesData:function(){var t={},e=0;return e=this.addControlsBGData(t,e),e=this.addRepeatXData(t,e),e=this.addIconData(t,e),this.addLargeIconData(t),t},addControlsBGData:function(t,e){var n=this.controlBarConfig.height;return t.controlsBG={type:"repeat-x",h:n,x:0,y:e},e+n},addRepeatXData:function(t,e){for(var n=e,i=this.spriteDimensions.spriteHeight,r=["scrubber-bg","scrubber-played-bg","scrubber-buffered-bg"],o=0;o<r.length;o++)t[r[o]]={type:"repeat-x",h:i,x:0,y:n},n+=i;return n},addIconData:function(t,e){for(var n,i,r,o=this.spriteDimensions.spriteHeight,a=this.spriteDimensions.spriteWidth,s=["scrubber-tab","scrubber-tab-hover","scrubber-tabDown","","play","play-hover","pause","pause-hover","sound-off","sound-off-hover","sound-on","sound-on-hover","fullscreen","fullscreen-hover","normal","normal-hover"],u=e,l=0;l<s.length;l++)r=(i=l%2)?a:0,""!==(n=s[l])&&(t[n]={type:"icon",w:a,h:o,x:r,y:u}),u=i?u+o:u;return u},addLargeIconData:function(t,e){for(var n=this.spriteDimensions.overlaySpriteWidth,i=this.spriteDimensions.overlaySpriteHeight,r=["overlay-play","overlay-play-hover","overlay-replay","overlay-replay-hover"],o=0,a=0;a<r.length;a++)t[r[a]]={type:"icon-large",w:n,h:i,x:0,y:o},o+=i;return o},determineSpritesheetUrls:function(t){var e={png:r.DEFAULT_SPRITESHEET};return this._determineSpritesheetUrls(t,e)},determineOverlaySpritesheetUrls:function(t){var e={png:r.DEFAULT_OVERLAY_SPRITESHEET};return this._determineSpritesheetUrls(t,e)},_determineSpritesheetUrls:function(t,e){var n={};return t&&Object.keys(t).length&&t.png?n.png=t.png:n=e,n},injectSpritesheetCSS:function(){var t=[];t=(t=(t=t.concat(this.getSpriteStyles())).concat(this.getOverlaySpriteStyles())).concat(this.getIndividualSpriteStyles()),this.zoo.insertRules(t)},getSpriteStyles:function(){return[[["."+i.ICON,"."+i.REPEAT_X_SPRITE],{height:this.spriteDimensions.spriteHeight+"px",display:"inline-block","background-image":"url("+this.getSrc()+")","background-color":"transparent"}]]},getOverlaySpriteStyles:function(){return[["."+i.ICON_LARGE,{display:"inline-block",height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px","background-image":"url("+this.getOverlaySrc()+")","background-color":"transparent"}]]},getIndividualSpriteStyles:function(){var t,e,n=[],i={icon:this.getIconCSS,"repeat-x":this.getRepeatXSpriteCSS,"icon-large":this.getIconLargeCSS};for(var r in this.spritesData)this.spritesData.hasOwnProperty(r)&&(e=i[(t=this.spritesData[r]).type].call(this,r,t),n.push(e));return n},getIconCSS:function(t,e){var n=this.spriteDimensions;return["."+i.ICON+"-"+t,{width:this.spriteDimensions.spriteWidth+"px","background-position":"-"+e.x+"px -"+e.y+"px","background-repeat":"no-repeat","background-size":2*n.spriteWidth+"px "+n.spriteHeight*this.rows+"px"}]},getRepeatXSpriteCSS:function(t,e){var n=this.spriteDimensions;return["."+i.REPEAT_X_SPRITE+"-"+t,{position:t.includes("controls")?"relative":"absolute","max-width":"100%","background-position":"0 -"+e.y+"px","background-repeat":"repeat-x","background-size":2*n.spriteWidth+"px "+n.spriteHeight*this.rows+"px"}]},getIconLargeCSS:function(t,e){return["."+i.ICON_LARGE+"-"+t,{"background-position":"0 -"+e.y+"px","background-repeat":"no-repeat"}]}},e.exports=o},{"./reely-config.js":96,"./reely-css-classes.js":98}],106:[function(t,e,n){var i=t("./reely-event-bus.js"),r=t("./reely-controls.js"),o=t("./reely-overlay.js"),a=t("./reely-spritesheet.js"),s=t("../zoolander.js"),u=t("./reely-css-classes.js"),l=t("./reely-el-maker.js"),c=t("./reely-events.js"),d=t("../utils/weblab"),h=t("../utils/bridge").getBridge,f=t("../utils/url"),p="granted",m=function(t){this.injectEl=t.injectEl,this.src=t.src,this.slate=t.slate||"",this.fullscreen=t.fullscreen||!1,this.autoplay=t.autoplay||!1,this.autosound=t.autosound||!1,this.playsInline=t.playsInline||!0,this.spritesheetUrls=t.spritesheets||{},this.overlaySpritesheetUrls=t.overlaySpritesheets||{},this.iframeId=t.iframeId,this.spriteDimensions=this.determineSpriteDimensionsConfig(t.spritesheets),this.setMediaKey=null,this.lastPermission="",this.hasSubscribed=!1,this.shouldObeyMediaInteroperability=!1,this.isInWeblab=!1,this.isPausedByUser=!1;var e=t.controlBar||{};this.controlBarConfig=this.determineControlBarConfig(e),this.onScreenChange=this.onScreenChange.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),t.zoolander&&(this.zoo=t.zoolander),this.setInitialDebugMode(),this.init()};m.prototype={doDebug:!1,log:function(t){this.reelyDebug&&console.log("[reely]: ",t)},init:function(){this.el=l.make("div",u.CONTAINER),this.shouldObeyMediaInteroperability=d.shouldObeyMediaInteroperability(),this.isInWeblab=d.isInWeblab(d.autoplayId),this.shouldObeyMediaInteroperability&&this.subscribeToMediaNotifications(),this.initZoolander(),this.injectPlayerStyles(),this.hide(),this.initChildren(),this.videoStarted=!1,this.videoEl=this.createVideoEl(),this.broadcast(),this.listen(),this.el.appendChild(this.videoEl),this.el.appendChild(this.overlay.el),this.el.appendChild(this.controls.el),this.injectEl.appendChild(this.el),this.autoplay&&this.videoEl&&3<=this.videoEl.readyState&&!this.isPlaying()&&this.isInWeblab&&this.play()},initZoolander:function(){if(!this.zoo){var t=this.injectEl.id;if(!t){var e=Date.now()+1e3*Math.floor(Math.random());this.injectEl.id=t="reely-container-parent-"+e}this.zoo=new s({id:t,prefixId:t})}},initChildren:function(){this.eventBus=new i,this.spritesheet=new a({spritesheetUrls:this.spritesheetUrls,overlaySpritesheetUrls:this.overlaySpritesheetUrls,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo});var t={eventBus:this.eventBus,spritesheet:this.spritesheet,slate:this.slate,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo};this.overlay=new o(t,this),this.controls=new r(t,this)},play:function(){this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!0}):this.isPlaying()||this.eventBus.trigger(c.PLAY_PAUSE_TOGGLE)},pause:function(t){this.isPlaying()?(this.eventBus.trigger(c.PLAY_PAUSE_TOGGLE),this.shouldObeyMediaInteroperability&&(t&&t.ended?this.setMediaEnded():this.setMediaPaused())):this.shouldObeyMediaInteroperability&&t&&t.ended&&this.setMediaEnded()},isPlaying:function(){return!!this.videoEl&&!this.videoEl.paused},reset:function(){this.videoEl.currentTime=0,this.pause()},unmute:function(){this.isMuted()&&(this.videoEl.muted=!1)},mute:function(){this.isMuted()||(this.videoEl.muted=!0)},isMuted:function(){return this.videoEl.muted||0===this.videoEl.volume},onVolumeChange:function(){var t=this.controls.isToggled(this.controls.muteUnmute);t&&this.isMuted()?this.eventBus.trigger(c.MUTED):t||this.isMuted()||this.eventBus.trigger(c.UNMUTED)},normalScreenMode:function(){this.isFullscreen()&&(document.exitFullscreen?(document.exitFullscreen(),this.setNormalPlayerBar()):document.webkitExitFullscreen?(document.webkitExitFullscreen(),this.setNormalPlayerBar()):document.mozCancelFullScreen?(document.mozCancelFullScreen(),this.setNormalPlayerBar()):document.msExitFullscreen?(document.msExitFullscreen(),this.setNormalPlayerBar()):this.videoEl.webkitExitFullscreen&&(this.videoEl.webkitExitFullscreen(),this.setNormalPlayerBar()))},fullscreenMode:function(){this.isFullscreen()||(this.el.requestFullscreen?this.el.requestFullscreen():this.el.webkitRequestFullscreen?this.el.webkitRequestFullscreen():this.el.msRequestFullscreen?this.el.msRequestFullscreen():this.el.mozRequestFullScreen?this.el.mozRequestFullScreen():this.videoEl.webkitEnterFullscreen&&this.videoEl.webkitEnterFullscreen())},isFullscreen:function(){return this.el.fullscreen},supportsFullscreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled||this.videoEl&&this.videoEl.webkitSupportsFullscreen},hide:function(){u.add(this.el,u.HIDDEN)},show:function(){u.remove(this.el,u.HIDDEN)},requestPlayback:function(t){var e=this,n=t||{};return this.hasSubscribed?this.lastPermission===p&&this.videoEl?(this.videoEl.play(),this.setMediaPlay()):void h().requestPlayback({name:this.iframeId||"reely",userInitiated:!!n.userInitiated,videoFrame:this.getVideoFrame()}).then(function(t){e.log("requestPlayback success"),e.onMediaPermissionsChanged(t)},function(t){e.log("requestPlayback error: "+JSON.stringify(t))}):this.subscribeToMediaNotifications({shouldRequestPlayback:!0})},setMediaPlay:function(){h().isMediaOrchestratorBridge?this.setStatus("setMediaPlay",{isReely:!0}):this.setStatus("setMediaPlay")},setMediaPaused:function(){this.setStatus("setMediaPaused")},setMediaEnded:function(){this.setStatus("setMediaEnded")},setStatus:function(e,t){if(this.shouldObeyMediaInteroperability){this.log(e);var n=this,i=h()[e],r={key:this.setMediaKey,permission:this.lastPermission};(t?i(r,t):i(r)).then(function(t){n.log(e+" success")},function(t){n.log(e+" error: "+JSON.stringify(t))})}},subscribeToMediaNotifications:function(t){var e=!!(t||{}).shouldRequestPlayback;if(!this.hasSubscribed){var n=h(),i={onMediaPermissionsChanged:this.onMediaPermissionsChanged.bind(this)};n.isMediaOrchestratorBridge&&(i.name=this.iframeId||"reely"),this.hasSubscribed=n.subscribe(i),this.log("subscribeToMediaNotifications: "+this.hasSubscribed),e&&this.requestPlayback({userInitiated:!1})}},onMediaPermissionsChanged:function(t){if(t&&t.permission){var e=t.permission.toLowerCase();switch(this.setMediaKey=t.key,this.lastPermission=t.permission,e){case p:this.log("onMediaPermissionsChanged: "+p),this.videoEl&&!this.isPausedByUser&&(this.videoEl.play(),this.setMediaPlay());break;case"denied":this.log("onMediaPermissionsChanged: denied"),this.pause();break;case"pending":this.log("onMediaPermissionsChanged: pending");break;default:this.log("onMediaPermissionsChanged unexpected permission: "+e)}}},getVideoFrame:function(){var t=this.videoEl?this.videoEl.getBoundingClientRect():{},e=window.top.Tarnhelm&&window.top.Tarnhelm.getDeviceInfo(),n=0;this.videoEl&&this.videoEl.ownerDocument&&this.videoEl.ownerDocument.defaultView&&(n=this.videoEl.ownerDocument.defaultView.innerWidth);var i=(n-window.top.innerWidth)/2,r={x:0<i&&"inline20"===this.iframeId?t.x-i:t.x,y:t.y,width:t.width,height:t.height};if(h().isMediaOrchestratorBridge&&e.isMobileSite){var o=this.videoEl&&this.videoEl.ownerDocument&&this.videoEl.ownerDocument.defaultView,a=o?o.frameElement||o.iframe:null,s=a?a.getBoundingClientRect():{x:0,y:0};r.x+=s.x+window.scrollX,r.y+=s.y+window.scrollY}return e&&!e.isIMDbApp&&this.isFullscreen()&&(r.isFullscreen=!0),r},getEventBus:function(){return this.eventBus},broadcast:function(){this.passVideoEvents()},passVideoEvents:function(){this.log("passVideoEvents"),(this.doDebug||this.reelyDebug)&&this.passDebugEventLog(),this.videoEl.addEventListener("loadstart",this.eventBus.triggers[c.VID_LOADSTART]),this.videoEl.addEventListener("loadedmetadata",this.eventBus.triggers[c.VID_LOADEDMETADATA]),this.videoEl.addEventListener("loadeddata",this.eventBus.triggers[c.VID_LOADEDDATA]),this.videoEl.addEventListener("canplay",this.eventBus.triggers[c.VID_CANPLAY]),this.videoEl.addEventListener("canplaythrough",this.eventBus.triggers[c.VID_CANPLAYTHROUGH]),this.videoEl.addEventListener("waiting",this.eventBus.triggers[c.VID_WAITING]),this.videoEl.addEventListener("progress",this.eventBus.triggers[c.VID_PROGRESS]),this.videoEl.addEventListener("suspend",this.eventBus.triggers[c.VID_SUSPEND]),this.videoEl.addEventListener("play",this.eventBus.triggers[c.VID_PLAY]),this.videoEl.addEventListener("pause",this.eventBus.triggers[c.VID_PAUSE]),this.videoEl.addEventListener("timeupdate",this.eventBus.triggers[c.VID_TIMEUPDATE]),this.videoEl.addEventListener("ended",this.eventBus.triggers[c.VID_ENDED]),this.videoEl.addEventListener("volumechange",this.onVolumeChange),this.el.addEventListener("fullscreenchange",this.onScreenChange),this.el.addEventListener("mozfullscreenchange",this.onScreenChange),this.el.addEventListener("MSFullscreenChange",this.onScreenChange),this.el.addEventListener("webkitfullscreenchange",this.onScreenChange)},passDebugEventLog:function(){for(var t=["canplay","canplaythrough","loadeddata","loadedmetadata","loadstart","pause","play"],e=0;e<t.length;e++)this.videoEl.addEventListener(t[e],this.debugLog)},debugLog:function(t){window&&window.console&&window.console.log&&window.console.log("Media Event :: type :: ",t.type)},listen:function(){this.log("listen"),this.eventBus.addEventListener(c.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(c.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(c.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(c.VID_ENDED,this.onVideoEnded,this),this.eventBus.addEventListener(c.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.addEventListener(c.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.addEventListener(c.FULLSCREEN_NORMAL_TOGGLE,this.onFullscreenNormalClick,this),this.eventBus.addEventListener(c.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(c.VID_CANPLAY,this.onCanPlay,this)},teardown:function(){this.pause({ended:!0}),this.mute(),this.videoEl.removeEventListener("loadstart",this.eventBus.triggers[c.VID_LOADSTART]),this.videoEl.removeEventListener("loadedmetadata",this.eventBus.triggers[c.VID_LOADEDMETADATA]),this.videoEl.removeEventListener("loadeddata",this.eventBus.triggers[c.VID_LOADEDDATA]),this.videoEl.removeEventListener("canplay",this.eventBus.triggers[c.VID_CANPLAY]),this.videoEl.removeEventListener("canplaythrough",this.eventBus.triggers[c.VID_CANPLAYTHROUGH]),this.videoEl.removeEventListener("waiting",this.eventBus.triggers[c.VID_WAITING]),this.videoEl.removeEventListener("progress",this.eventBus.triggers[c.VID_PROGRESS]),this.videoEl.removeEventListener("suspend",this.eventBus.triggers[c.VID_SUSPEND]),this.videoEl.removeEventListener("play",this.eventBus.triggers[c.VID_PLAY]),this.videoEl.removeEventListener("pause",this.eventBus.triggers[c.VID_PAUSE]),this.videoEl.removeEventListener("timeupdate",this.eventBus.triggers[c.VID_TIMEUPDATE]),this.videoEl.removeEventListener("ended",this.eventBus.triggers[c.VID_ENDED]),this.videoEl.removeEventListener("volumechange",this.onVolumeChange),this.videoEl.removeEventListener("click",this.eventBus.triggers[c.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("fullscreenchange",this.onScreenChange),this.el.removeEventListener("mozfullscreenchange",this.onScreenChange),this.el.removeEventListener("MSFullscreenChange",this.onScreenChange),this.el.removeEventListener("webkitfullscreenchange",this.onScreenChange),this.eventBus.removeEventListener(c.STARTED,this.onPlay,this),this.eventBus.removeEventListener(c.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(c.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(c.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.removeEventListener(c.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.removeEventListener(c.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(c.VID_CANPLAY,this.onCanPlay,this),this.zoo.teardown(),this.overlay.teardown(),this.controls.teardown(),this.removeNodes()},removeNodes:function(){this.injectEl.removeChild(this.el),this.videoEl=null,this.overlay.el=null,this.controls.el=null,this.el=null},onPlay:function(){this.videoStarted||(this.videoStarted=!0,this.eventBus.triggers[c.STARTED](),this.eventBus.removeEventListener(c.STARTED,this.onPlay,this))},onVideoEnded:function(){this.pause({ended:!0})},onPlayPauseClick:function(){this.videoEl.paused?this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!0}):this.videoEl.play():(this.videoEl.pause(),this.shouldObeyMediaInteroperability&&this.setMediaPaused())},onMuteUnmuteClick:function(t){this.isMuted()?(this.videoEl.volume=1,this.unmute()):this.mute()},setNormalPlayerBar:function(){u.remove(this.el,u.FULLSCREEN),this.el.fullscreen=!1,this.eventBus.trigger(c.VID_EXITFULLSCREEN)},onScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.videoEl&&this.videoEl.webkitDisplayingFullscreen?(u.add(this.el,u.FULLSCREEN),this.el.fullscreen=!0,this.eventBus.trigger(c.VID_ENTERFULLSCREEN)):this.setNormalPlayerBar()},onFullscreenNormalClick:function(t){this.isFullscreen()?this.normalScreenMode():this.fullscreenMode()},onScrubberBarClick:function(t){var e=t.clickedFraction;this.videoEl.currentTime=this.videoEl.duration*e},onLoadedMetadata:function(t){this.log("onLoadedMetadata"),this.fullscreen&&(this.supportsFullscreen()?this.controls.addFullscreenButton():this.log("Fullscreen not supported. Disabling.")),this.needsAspectInjection()&&this.injectAspectStyles()},checkIsPlayingAndIsInWeblab:function(){return this.autoplay&&!this.isPlaying()&&this.isInWeblab},playbackOnMediaInterop:function(){this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!1}):this.videoEl.play()},onLoadedData:function(t){this.log("onLoadedData"),this.show(),this.checkIsPlayingAndIsInWeblab()&&this.playbackOnMediaInterop()},onCanPlay:function(t){this.log("onCanPlay"),this.checkIsPlayingAndIsInWeblab()?this.playbackOnMediaInterop():this.autoplay&&this.playbackOnMediaInterop()},createVideoEl:function(){var t=l.make("video",u.VIDEO);t.volume=1,t.preload=!0,t.poster=this.slate,this.playsInline&&(t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""));var e=this.autosound;return t.muted=!e,e&&this.eventBus.trigger(c.UNMUTED),this.addSources(t),t},addSources:function(t){var e=/\.([a-z0-9]{2,4})$/.exec(this.src);if(e){var n=this.createSource(this.src,e[1]);t.appendChild(n)}else{var i=this.createSource(this.src,"mp4"),r=this.createSource(this.src,"webm");t.appendChild(i),t.appendChild(r)}var o=document.createElement("p");o.innerHTML="Sorry, your browser does not support HTML5 video.",t.appendChild(o)},createSource:function(t,e){var n=document.createElement("source");return n.src=new RegExp("\\."+e+"$").test(t)?t:t+"."+e,n.type="video/"+e,n},determineControlBarConfig:function(t){var e=this.controlBarDefaults(),n=t;if(!n)return e;var i=e;null==n.autohide&&null!=n.autoHide&&(n.autohide=n.autoHide,delete n.autoHide);for(var r,o=["width","autohide","anchorX","offsetX","anchorY","offsetY","hideBG"],a=0;a<o.length;a++)null!=n[r=o[a]]&&(i[r]=this.addPxIfNumber(n[r]));return i},controlBarDefaults:function(){return{height:1.5*this.spriteDimensions.spriteHeight,autohide:!0,anchorX:"center",offsetX:0,anchorY:"bottom",offsetY:0,width:"100%",hideBG:!1}},addPxIfNumber:function(t){return"number"==typeof t?t+"px":t},determineSpriteDimensionsConfig:function(t){var e=this.spriteDimensionsDefaults();if(!t||!t.buttonSize)return e;var n=t.buttonSize;return{buttonPadding:.25*n,spriteHeight:n,spriteWidth:n,overlaySpriteHeight:100,overlaySpriteWidth:100}},spriteDimensionsDefaults:function(){return{buttonPadding:5,spriteHeight:20,spriteWidth:20,overlaySpriteHeight:100,overlaySpriteWidth:100}},injectPlayerStyles:function(){var t=[];t=(t=(t=(t=(t=t.concat(this.getUtilityStyles())).concat(this.getPlayerStyles())).concat(this.getIconStyles())).concat(this.getButtonStyles())).concat(this.getTwoStateStyles()),this.zoo.insertRules(t)},getUtilityStyles:function(){return[["."+u.UNSELECTABLE,{"user-select":"none"}],["."+u.HIDDEN,{display:"none"}],["."+u.INVISIBLE,{visibility:"hidden"}],["."+u.TRANSPARENT,{opacity:0}]]},getPlayerStyles:function(){return[["."+u.CONTAINER,{position:"relative","z-index":1,display:"block",width:"100%",height:"100%",margin:"0 auto","background-color":"black",overflow:"visible"}],["."+u.VIDEO,{position:"absolute","z-index":-1,top:0,left:0,height:"100%",width:"100%",cursor:"pointer"}]]},getIconStyles:function(){return[[["."+u.ICON,"."+u.ICON_HOVER],{position:"absolute"}],["."+u.ICON_HOVER,{top:this.spriteDimensions.buttonPadding+"px",left:this.spriteDimensions.buttonPadding+"px"}]]},getButtonStyles:function(){return[["."+u.BUTTON,{cursor:"pointer"}],[["."+u.BUTTON+" ."+u.ICON_DEFAULT,"."+u.BUTTON+":hover ."+u.ICON_HOVER],{opacity:1}],[["."+u.BUTTON+":hover ."+u.ICON_DEFAULT,"."+u.BUTTON+" ."+u.ICON_HOVER],{opacity:0}],[["."+u.BUTTON+":hover ."+u.ICON_DEFAULT,"."+u.BUTTON+" ."+u.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+u.BUTTON+":hover ."+u.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]},getTwoStateStyles:function(){return[[["."+u.TWO_STATE_BUTTON,"."+u.TWO_STATE_BUTTON+" ."+u.TWO_STATE_DEFAULT,"."+u.TWO_STATE_BUTTON+" ."+u.TWO_STATE_ALT],{position:"absolute"}],["."+u.TWO_STATE_BUTTON,{display:"inline-block"}],[["."+u.TWO_STATE_BUTTON+" ."+u.TWO_STATE_DEFAULT,"."+u.TWO_STATE_BUTTON+"."+u.TOGGLED+" ."+u.TWO_STATE_ALT],{opacity:1,visibility:"visible"}],[["."+u.TWO_STATE_BUTTON+"."+u.TOGGLED+" ."+u.TWO_STATE_DEFAULT,"."+u.TWO_STATE_BUTTON+" ."+u.TWO_STATE_ALT],{opacity:0,visibility:"hidden"}]]},needsAspectInjection:function(){return 0===this.el.parentNode.clientHeight},injectAspectStyles:function(){var t=this.determineLoadedVideoDimensions(),e=(t.height/t.width*100).toFixed(4);this.aspectRule=this.zoo.insertRule("."+u.CONTAINER,{"padding-top":e+"%"})},determineLoadedVideoDimensions:function(){return{width:this.videoEl.videoWidth,height:this.videoEl.videoHeight}},setInitialDebugMode:function(){var t=f.getQueryParam("reelyDebug");"1"!==t&&"true"!==t||(this.reelyDebug=!0,console.log("Reely video logs enabled."))}},e.exports=m},{"../utils/bridge":108,"../utils/url":110,"../utils/weblab":111,"../zoolander.js":113,"./reely-controls.js":97,"./reely-css-classes.js":98,"./reely-el-maker.js":99,"./reely-event-bus.js":100,"./reely-events.js":101,"./reely-overlay.js":103,"./reely-spritesheet.js":105}],107:[function(t,e,n){var g={adCustomAction1001:!0,adCustomAction1002:!0,adCustomAction1003:!0,adCustomAction1004:!0,adCustomAction1005:!0,adCustomAction1006:!0,adCustomAction1007:!0,adCustomAction1008:!0,adCustomAction1009:!0,adCustomAction1031:!0,adCustomAction1032:!0,adCustomAction1033:!0,adCustomAction1034:!0,adCustomAction1035:!0,adCustomAction1036:!0,adCustomAction1037:!0,adCustomAction1038:!0,adCustomAction1039:!0,adCustomAction1040:!0,adCustomAction1041:!0,adCustomAction1042:!0,adCustomAction1043:!0,adCustomAction1044:!0,adCustomAction1045:!0,adCustomAction1046:!0,adCustomAction1047:!0,adCustomAction1048:!0,adCustomAction1049:!0,adCustomAction1050:!0,adCustomAction1101:!0,adCustomAction1102:!0,adCustomAction1103:!0,adCustomAction1104:!0,adCustomAction1105:!0,adCustomAction1106:!0,adCustomAction1107:!0,adCustomAction1108:!0,adCustomAction1109:!0,adCustomAction1110:!0,adCustomAction1111:!0,adCustomAction1112:!0,adCustomAction1113:!0,adCustomAction1114:!0,adCustomAction1115:!0,adCustomAction1116:!0,adCustomAction1117:!0,adCustomAction1118:!0,adCustomAction1119:!0,adCustomAction1120:!0,adCustomAction1201:!0,adCustomAction1202:!0,adCustomAction1203:!0,adCustomAction1204:!0,adCustomAction1205:!0,adCustomAction1206:!0,adCustomAction1207:!0,adCustomAction1208:!0,adCustomAction1209:!0,adCustomAction1210:!0,adCustomAction1211:!0,adCustomAction1212:!0,adCustomAction1213:!0,adCustomAction1214:!0,adCustomAction1215:!0,adCustomAction1216:!0,adCustomAction1217:!0,adCustomAction1218:!0,adCustomAction1219:!0,adCustomAction1220:!0,adCustomAction1301:!0,adCustomAction1302:!0,adCustomAction1303:!0,adCustomAction1304:!0,adCustomAction1305:!0,adCustomAction1306:!0,adCustomAction1307:!0,adCustomAction1308:!0,adCustomAction1309:!0,adCustomAction1310:!0,adCustomAction1311:!0,adCustomAction1312:!0,adCustomAction1313:!0,adCustomAction1314:!0,adCustomAction1315:!0,adCustomAction1316:!0,adCustomAction1317:!0,adCustomAction1318:!0,adCustomAction1319:!0,adCustomAction1320:!0,adCustomAction1321:!0,adCustomAction1322:!0,adCustomAction1323:!0,adCustomAction1324:!0,adCustomAction1325:!0,adCustomAction1326:!0,adCustomAction1327:!0,adCustomAction1328:!0,adCustomAction1329:!0,adCustomAction1330:!0,adCustomAction1331:!0,adCustomAction1332:!0,adCustomAction1333:!0,adCustomAction1334:!0,adCustomAction1335:!0,adCustomAction1336:!0,adCustomAction1337:!0,adCustomAction1338:!0,adCustomAction1339:!0,adCustomAction1340:!0,adCustomAction1341:!0,adCustomAction1342:!0,adCustomAction1343:!0,adCustomAction1344:!0,adCustomAction1345:!0};e.exports=function(){for(var u={},n=5,i=2,r=1,t=1e3,e=[];t<=1499;t++){var o="adCustomAction"+t;g[o]||e.push(o)}var h,f,l=[],c=!1;function a(t){return isNaN(t)?e.length?e.shift():(console&&console.warn&&console.warn("WARNING: out of tracking actions!"),""):"adCustomAction"+(1!==t?t:"")}function s(t){var e;return isNaN(t)?r<=10?(e="tabClick"+(1!==r?r:""),r++,e):a():e="tabClick"+(1!==t?t:"")}function p(t){var e;return isNaN(t)?Array.isArray(t)&&5===t.length?{"media/start":isNaN(t[0])?t[0]:a(t[0]),"media/firstQuartile":isNaN(t[1])?t[1]:a(t[1]),"media/midpoint":isNaN(t[2])?t[2]:a(t[2]),"media/thirdQuartile":isNaN(t[3])?t[3]:a(t[3]),"media/complete":isNaN(t[4])?t[4]:a(t[4])}:i<=n?(e=1!==i?i:"",i++,{"media/start":"videoStart"+e,"media/firstQuartile":"videoFirstQuartile"+e,"media/midpoint":"videoMidpoint"+e,"media/thirdQuartile":"videoThirdQuartile"+e,"media/complete":"videoComplete"+e}):{"media/start":a(),"media/firstQuartile":a(),"media/midpoint":a(),"media/thirdQuartile":a(),"media/complete":a()}:{"media/start":"videoStart"+(e=1!==t?t:""),"media/firstQuartile":"videoFirstQuartile"+e,"media/midpoint":"videoMidpoint"+e,"media/thirdQuartile":"videoThirdQuartile"+e,"media/complete":"videoComplete"+e}}function m(t,e){var n,i,r,o,a=t.type,s={},u=!0,l=!0,c=h[a];if(t.video&&t.video.loop&&(l=!1),l){if(t.actions)for(r in f)void 0!==t.actions[r]&&t.actions[r].length&&(s[f[r].string]=f[r].tracker(),u=!1);if(c)for(r in c)if("function"==typeof c[r])s[r]=c[r](),u=!1;else if("isMedia"===r&&!0===c[r]){var d=p();for(o in d)s[o]=d[o];u=!1}!1===u&&(t.description&&(s.label=t.description),e[t.name]=s)}if(t.children)for(n=0,i=t.children.length;n<i;n++)m(t.children[n],e)}function d(t,e,n){var i;if(t[e])for(i in n)t[e][i]?t[e][i]=[].concat(t[e][i],n[i]):t[e][i]=n[i];else t[e]=n}return h={alphalfa:{isMedia:!0},animaniac:{},gallery:{"click/clickPrev":s,"click/clickNext":s,"intent/swipeLeft":a,"intent/swipeRight":a},graphic:{},"minimal-video":{isMedia:!0},panel:{},reely:{isMedia:!0},rotator:{"intent/navigateRotator":a},rotatorbutton:{"click/click":s},"slider-rotator":{"click/clickPrev":s,"click/clickNext":s,"intent/swipeLeft":a,"intent/swipeRight":a}},f={click:{tracker:s,string:"click/click"},hoverIn:{tracker:a,string:"intent/hoverIn"},hoverOut:{tracker:a,string:"intent/hoverOut"}},{trackingConsumer:function(t){var e,n,i,r,o=t.eventType+"/"+(t.data&&t.data.eventSubType?t.data.eventSubType:""),a=u[t.unitName],s=[];if(a&&a[t.componentName])if(a[t.componentName][o]&&(s=s.concat(a[t.componentName][o])),0<s.length){for(i=0;i<s.length;i++){for(n=0,r=l.length;n<r;n++)l[n](s[i],t,!1);c&&console.log("tracking "+s[i]+". "+t.componentName+" in "+t.unitName+" emitted "+o,t)}if(a&&a.global&&a.global[o]&&(e=a.global[o])){for(n=0,r=l.length;n<r;n++)l[n](e,t,!0);c&&console.log("tracking "+e+" as a global event. "+t.componentName+" in "+t.unitName+" emitted "+o,t)}}else c&&console.warn("tracking attempted, but couldn't find the event in the map. ",t);else c&&console.warn("attempt to track event on unmapped component: "+t.componentName+":"+t.eventType+"/"+t.data.eventSubType,t)},addToTrackingMap:function(t){var e,n,i,r,o={};if(t.trackingConfigs)for(e=0,n=t.trackingConfigs.length;e<n;e++)if((i=t.trackingConfigs[e]).componentName&&i.data&&i.data.trackingNumber&&i.trackingType)switch(i.trackingType){case"tab":d(o,i.componentName,{"click/click":s(i.data.trackingNumber)});break;case"video":d(o,i.componentName,p(i.data.trackingNumber));break;case"custom":d(o,i.componentName,{"click/click":a(i.data.trackingNumber)});break;default:d(o,i.componentName,{"click/click":i.trackingType})}else i.componentName&&i.trackingType&&d(o,i.componentName,{"click/click":i.trackingType});else for(o.global=p(1),e=0,n=(r=t.children).length;e<n;e++)m(r[e],o);u[t.name]=o},getReadableTrackingMap:function(){var t,e,n,i="";for(t in u)for(e in u[t])for(n in u[t][e])"label"!==n&&(i+=t+": "+(u[t][e].label?'"'+u[t][e].label+'"':e)+" "+n+" = "+u[t][e][n]+"\n");return i},getTrackingMap:function(){return u},addConsumerCallback:function(t){"function"==typeof t&&l.push(t)},setDebug:function(t){c=!!t}}}},{}],108:[function(t,e,n){e.exports={getBridge:function(){return window.NativeWebBridge?window.NativeWebBridge:window.top.ad_utils&&window.top.ad_utils.mediaOrchestratorBridge?window.top.ad_utils.mediaOrchestratorBridge:void 0}}},{}],109:[function(t,e,n){function a(t,e){return t.hasOwnProperty(e)&&"function"==typeof t[e]&&"function"==typeof t[e].apply}function s(t){var e;switch(!0){case"object"==typeof t&&t.hasOwnProperty("length"):e=t;break;case"object"==typeof t&&null===t:e=[t];break;default:e=[]}return e}e.exports=function(){var o=[];return{notifyObserver:function(t,e,n){var i=o.indexOf(t),r=s(n);-1<i&&a(o[i],e)&&o[i][e].apply(o[i],r)},notify:function(t,e){for(var n=o.length,i=0,r=s(e);i<n;i++)a(o[i],t)&&o[i][t].apply(o[i],r)},subscribe:function(t){o.push(t)},unsubscribe:function(t){var e=o.indexOf(t);-1<e&&o.splice(e,1)},clear:function(){o=[]}}}},{}],110:[function(t,e,n){e.exports={getQueryParam:function(t){return new URLSearchParams(window.location.search).get(t)||""}}},{}],111:[function(t,e,n){var i=t("./bridge").getBridge;e.exports={shouldObeyMediaInteroperability:function(){var t=window.top.Tarnhelm&&window.top.Tarnhelm.getDeviceInfo();return!(void 0===i()||!t)&&(!!t.isIMDbApp||window.top.ad_utils&&window.top.ad_utils.isResponsive())},isInWeblab:function(t){return null!==document.getElementById(t)},autoplayId:"TARNHELM_528955"}},{"./bridge":108}],112:[function(t,e,n){var i=function(){var t="-webkit",e="-moz",o={"box-shadow":[t],transform:[t,"-ms",e,"-o"],perspective:[t,"-ms"],"box-sizing":[t,"-ms",e],"background-size":[t],"user-select":[t,e,"-ms"],animation:[t,e,"-o"],transition:[t,e,"-o"],filter:[t,e,"-ms","-o"]},n=[];for(var i in o)o.hasOwnProperty(i)&&n.push(i);return{needsFixer:function(t){return-1!==n.indexOf(t)},prefixedProps:function(t){var e=[t];if(!this.needsFixer(t))return e;for(var n,i=o[t],r=0;r<i.length;r++)n=i[r]+"-"+t,e.push(n);return e}}}();e.exports=i},{}],113:[function(t,e,n){var o=t("./zoofixer.js"),r=function(t,e,n){this.index=t,this.selector=e,this.styleText=n},i=function(t){this.doc=this._determineDocument(t),this.styleElId=this._determineStyleElId(t),this.styleEl=this._createStyleEl(this.styleElId),this.prefixId=this._determinePrefixId(t),this.doc.head.appendChild(this.styleEl),this.ss=this.styleEl.sheet,this.isFrozen=!1,this._useInsertRule="insertRule"in this.ss,this._rulesKey=this._determineRulesKey(),this._animPrefix=this._determineAnimationPrefix(),this.NULLSELECTOR=".NULLRULE"+this.styleElId};(i.prototype={rules:function(){return this.ss[this._rulesKey]},teardown:function(){this.doc=null,this.ss=null,this.styleEl=null},freeze:function(){this.isFrozen=!0},unfreeze:function(){this.isFrozen=!1},insertRule:function(t,e){if(!this.isFrozen){if(t&&e){var n=this._determineSelectors(t),i=this._determineStylesText(e);return this._insertRule(n,i)}console.warn("Bad selectors and/or stylesObj provided to Zoolander.")}},insertRules:function(t){if(!this.isFrozen){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=i[0],o=i[1],a=this.insertRule(r,o);e.push(a)}return e}},deleteRule:function(t){void 0===t||this.isFrozen||(this.ss.deleteRule(t.index),this._attemptInsert(this.NULLSELECTOR,"",t.index))},insertKeyframes:function(t,e){var n="@"+this._animPrefix+"keyframes "+t,i=this._determineKeyframesStyleText(e);return this._insertRule(n,i,!0)},insertAnimation:function(t,e,n){var i=this._determineSelectors(t),r=this._animPrefix+e+": "+n;return this._insertRule(i,r)},_insertRule:function(t,e,n){var i=this.rules().length;try{this._attemptInsert(t,e,i,n)}catch(n){return void console.warn("Zoolander failed to insertRule :: "+n,t,"{",e,"}")}return new r(i,t,e)},_attemptInsert:function(t,e,n,i){this._useInsertRule?this.ss.insertRule(t+" {"+e+"}",n):this.ss.addRule(t,e,n)},_createStyleEl:function(t){var e="imdb_ad_design_injected_"+t,n=this.doc.getElementById(e);return n||((n=this.doc.createElement("style")).type="text/css",n.id=e,n.appendChild(this.doc.createTextNode("")),n)},_determineStyleElId:function(t){return t&&t.id?t.id:Date.now()+Math.floor(10*Math.random())},_determineDocument:function(t){return t&&t.document?t.document:document},_determinePrefixId:function(t){var e=t&&t.prefixId?t.prefixId:"";if(e){var n="#"===e.charAt(0)?e:"#"+e;return" "===n.charAt(n.length-1)?n:n+" "}return""},_isArr:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_determineSelectors:function(t){var e,n,i=this.prefixId;return"string"==typeof t&&-1!==t.indexOf(",")?e=t.split(","):this._isArr(t)?e=t:n=t,e?this._concatSelectors(e,i):i+" "+n},_concatSelectors:function(t,e){for(var n="",i=0;i<t.length;i++){var r=i===t.length-1;n+=e+" "+t[i],r||(n+=", ")}return n},_determineAnimationPrefix:function(){for(var t=["webkit","Moz","ms"],e=this.doc.createElement("div"),n="",i=0;i<t.length;i++)if(void 0!==e.style[t[i]+"AnimationName"]){n="-"+t[i].toLowerCase()+"-";break}return n},_determineStylesText:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=this._buildStyleDeclaration(n,t[n]));return e},_buildStyleDeclaration:function(t,e){if(o.needsFixer(t)){for(var n="",i=o.prefixedProps(t),r=0;r<i.length;r++)n+=i[r]+": "+e+"; ";return n}return t+": "+e+"; "},_determineKeyframesStyleText:function(t){var e="";for(var n in t)if(t.hasOwnProperty(n)){var i=this._determineStylesText(t[n]);e+=this._buildKeyframeStylesText(n,i)}return e},_buildKeyframeStylesText:function(t,e){return t+" { "+e+" } "},_determineRulesKey:function(){return"cssRules"in this.ss?"cssRules":"rules"}}).constructor=i,e.exports=i},{"./zoofixer.js":112}],114:[function(t,e,l){!function(A,E){"use strict";var n,T={version:"v2.2.4",settings:{}},S=0,C="riot-",x=C+"tag",I="string",N="object",O="undefined",i="function",g=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,D=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],t=0|(A&&A.document||{}).documentMode,R=Array.isArray;T.observable=function(o){var a={},e=0;return(o=o||{}).on=function(t,n){return U(n)&&(typeof n.id===O&&(n._id=e++),t.replace(/\S+/g,function(t,e){(a[t]=a[t]||[]).push(n),n.typed=0<e})),o},o.off=function(t,r){return"*"==t?a={}:t.replace(/\S+/g,function(t){if(r)for(var e,n=a[t],i=0;e=n&&n[i];++i)e._id==r._id&&n.splice(i--,1);else a[t]=[]}),o},o.one=function(e,n){return o.on(e,function t(){o.off(e,t),n.apply(o,arguments)})},o.trigger=function(t){for(var e,n=[].slice.call(arguments,1),i=a[t]||[],r=0;e=i[r];++r)e.busy||(e.busy=1,e.apply(o,e.typed?[t].concat(n):n),i[r]!==e&&r--,e.busy=0);return a.all&&"all"!=t&&o.trigger.apply(o,["all",t].concat(n)),o},o},T.mixin=(n={},function(t,e){if(!e)return n[t];n[t]=e}),function(t,e,n){if(n){var i,r=n.location,o=t.observable(),a=!1,s=t.route=function(t){t[0]?c(r.hash=t):o.on("H",t)};s.exec=function(t){t.apply(null,l(u()))},s.parser=function(t){l=t},s.stop=function(){a&&(n.removeEventListener?n.removeEventListener(e,c,!1):n.detachEvent("on"+e,c),o.off("*"),a=!1)},s.start=function(){a||(n.addEventListener?n.addEventListener(e,c,!1):n.attachEvent("on"+e,c),a=!0)},s.start()}function u(){return r.href.split("#")[1]||""}function l(t){return t.split("/")}function c(t){t.type&&(t=u()),t!=i&&(o.trigger.apply(null,["H"].concat(l(t))),i=t)}}(T,"hashchange",A);var r,o,a,s,c,d,L=(s=/[{}]/g,function(t){var e=T.settings.brackets||"{ }";return r!==e&&(a=(r=e).split(" "),o=a.map(function(t){return t.replace(/(?=.)/g,"\\")})),t instanceof RegExp?"{ }"===e?t:new RegExp(t.source.replace(s,function(t){return o[~~("}"===t)]}),t.global?"g":""):a[t]}),k=function(){var s={},i='"in d?d:'+(A?"window).":"global)."),n=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(t,e){return t&&(s[t]||(s[t]=(n=t).indexOf(L(0))<0?(n=n.replace(/\n|\r\n?/g,"\n"),function(){return n}):(n=n.replace(L(/\\{/g),"").replace(L(/\\}/g),""),o=l(r=n,L(/{/),L(/}/)),a=[],o.map(function(t,e){e=r.indexOf(t),a.push(r.slice(0,e),t),r=r.slice(e+t.length)}),r&&a.push(r),n=2!==(i=a).length||i[0]?"["+i.map(function(t,e){return e%2?u(t,!0):'"'+t.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':u(i[1]),new Function("d","return "+n.replace(/\uFFF0/g,L(0)).replace(/\uFFF1/g,L(1))+";"))))(e);var n,i,r,o,a};function u(t,e){return t=t.replace(/\n|\r\n?/g," ").replace(L(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+l(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,r)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':r(t,e)}function r(t,e){return(t=t.trim())?"(function(v){try{v="+t.replace(n,function(t,e,n){return n?'(("'+n+i+n+")":t})+"}catch(e){}return "+(!0===e?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function l(r,t,e){var o,a=0,s=[],n=new RegExp("("+t.source+")|("+e.source+")","g");return r.replace(n,function(t,e,n,i){!a&&e&&(o=i),(a+=e?1:-1)||null==n||s.push(r.slice(o,i+n.length))}),s}}(),M=(d={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},"div",c=(c=t)&&c<10,function(t){var e,n,i,r,o,a,s=t&&t.match(/^\s*<([-\w]+)/),u=s&&s[1].toLowerCase(),l=h(d[u]||"div");return l.stub=!0,c&&u&&(s=u.match(g))?(e=l,n=t,i=u,a=!!s[1]?"select>":"table>",(o=h("div")).innerHTML="<"+a+n+"</"+a,(r=o.getElementsByTagName(i)[0])&&e.appendChild(r)):l.innerHTML=t,l});function v(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function P(t,n,r){function o(t,e,n){if(0<=e.indexOf(L(0))){var i={dom:t,expr:e};r.push(G(i,n))}}Y(t,function(i){var t=i.nodeType;if(3==t&&"STYLE"!=i.parentNode.tagName&&o(i,i.nodeValue),1==t){var e=i.getAttribute("each");return e?(function(o,a,s){V(o,"each");var u,t,e,n,l=z(o),i=o.outerHTML,c=!!_[l],d=_[l]||{tmpl:i},h=o.parentNode,f=document.createComment("riot placeholder"),p=[],m=H(o);h.insertBefore(f,o),t=s,e=L(0),n=t.trim().slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/),s=n?{key:n[1],pos:n[2],val:e+n[3]}:{val:t},a.one("premount",function(){h.stub&&(h=a.root),o.parentNode.removeChild(o)}).on("update",function(){var e=k(s.val,a);R(e)||(u=e?JSON.stringify(e):"",e=e?Object.keys(e).map(function(t){return v(s,t,e[t])}):[]);for(var t=document.createDocumentFragment(),n=p.length,i=e.length;i<n;)p[--n].unmount(),p.splice(n,1);for(n=0;n<i;++n){var r=!u&&s.key?v(s,e[n],n):e[n];p[n]?p[n].update(r):((p[n]=new B(d,{parent:a,isLoop:!0,hasImpl:c,root:g.test(l)?h:o.cloneNode(),item:r},o.innerHTML)).mount(),t.appendChild(p[n].root)),p[n]._item=r}h.insertBefore(t,f),m&&(a.tags[l]=p)}).one("updated",function(){var e=Object.keys(a);Y(h,function(t){1!=t.nodeType||t.isLoop||t._looped||(t._visited=!1,t._looped=!0,K(t,a,e))})})}(i,n,e),!1):(F(i.attributes,function(t){var e=t.name,n=e.split("__")[1];if(o(i,t.value,{attr:n||e,bool:n}),n)return V(i,e),!1}),!H(i)&&void 0)}})}function B(t,e,n){var i,u,l,r=T.observable(this),o=function(t){function e(){}return e.prototype=t,new e}(e.opts)||{},a=M(t.tmpl),s=e.parent,c=e.isLoop,d=e.hasImpl,f=q(e.item),p=[],h=[],m=e.root,g=t.fn,v=m.tagName.toLowerCase(),_={},y=[];function b(){var e=d&&c?r:s||r;F(m.attributes,function(t){o[t.name]=k(t.value,e)}),F(Object.keys(_),function(t){o[t]=k(_[t],e)})}function w(e){if(F(h,function(t){t[e?"mount":"unmount"]()}),s){var t=e?"on":"off";c?s[t]("unmount",r.unmount):s[t]("update",r.update)[t]("unmount",r.unmount)}}g&&m._tag&&m._tag.unmount(!0),this.isMounted=!1,m.isLoop=c,(m._tag=this)._id=S++,G(this,{parent:s,root:m,opts:o,tags:{}},f),F(m.attributes,function(t){var e=t.value;L(/{.*}/).test(e)&&(_[t.name]=e)}),a.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(v)&&(a.innerHTML=(i=n,a.innerHTML.replace(/<(yield)\/?>(<\/\1>)?/gi,i||""))),this.update=function(t){var h;t=q(t),r.parent&&c&&F(Object.keys(r.parent),function(t){var e=!~D.indexOf(t)&&~y.indexOf(t);(typeof r[t]===O||e)&&(e||y.push(t),r[t]=r.parent[t])}),t&&typeof f===N&&(function(t){for(var e in f)typeof r[e]!==O&&(r[e]=t[e])}(t),f=t),G(r,t),b(),r.trigger("update",t),h=r,F(p,function(t,e){var n,i,r,o,a=t.dom,s=t.attr,u=k(t.expr,h),l=t.dom.parentNode;if(t.bool?u=!!u&&s:null==u&&(u=""),l&&"TEXTAREA"==l.tagName&&(u=(""+u).replace(/riot-/g,"")),t.value!==u)if(t.value=u,s)if(V(a,s),U(u))i=u,o=h,(r=a)[s]=function(t){var e=o._item,n=o.parent;if(!e)for(;n&&!e;)e=n._item,n=n.parent;t=t||A.event;try{t.currentTarget=r,t.target||(t.target=t.srcElement),t.which||(t.which=t.charCode||t.keyCode)}catch(t){}t.item=e,!0===i.call(o,t)||/radio|check/.test(r.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||(e?W(n):o).update()};else if("if"==s){var c=t.stub,d=function(){j(a.parentNode,a,c)};u?c&&(j(c.parentNode,c,a),a.inStub=!1,X(a)||Y(a,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(c=t.stub=c||document.createTextNode(""),a.parentNode?d():(h.parent||h).one("updated",d),a.inStub=!0)}else if(/^(show|hide)$/.test(s))"hide"==s&&(u=!u),a.style.display=u?"":"none";else if("value"==s)a.value=u;else if(n=C,s.slice(0,n.length)===n&&s!=x)u&&a.setAttribute(s.slice(C.length),u);else{if(t.bool&&!(a[s]=u))return;typeof u!==N&&a.setAttribute(s,u)}else a.nodeValue=""+u}),r.trigger("updated")},this.mixin=function(){F(arguments,function(e){e=typeof e===I?T.mixin(e):e,F(Object.keys(e),function(t){"init"!=t&&(r[t]=U(e[t])?e[t].bind(r):e[t])}),e.init&&e.init.bind(r)()})},this.mount=function(){if(b(),g&&g.call(r,o),P(a,r,p),w(!0),(t.attrs||d)&&(function(t,e){for(var n,i,r,o=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=o.exec(t);)i=n[1].toLowerCase(),r=n[2]||n[3]||n[4],m.setAttribute(i,r)}(t.attrs),P(r.root,r,p)),r.parent&&!c||r.update(f),r.trigger("premount"),c&&!d)r.root=m=a.firstChild;else{for(;a.firstChild;)m.appendChild(a.firstChild);m.stub&&(r.root=m=s.root)}!r.parent||r.parent.isMounted?(r.isMounted=!0,r.trigger("mount")):r.parent.one("mount",function(){X(r.root)||(r.parent.isMounted=r.isMounted=!0,r.trigger("mount"))})},this.unmount=function(t){var n,e=m,i=e.parentNode;if(i){if(s)n=W(s),R(n.tags[v])?F(n.tags[v],function(t,e){t._id==r._id&&n.tags[v].splice(e,1)}):n.tags[v]=E;else for(;e.firstChild;)e.removeChild(e.firstChild);t?i.removeAttribute("riot-tag"):i.removeChild(e)}r.trigger("unmount"),w(),r.off("*"),m._tag=null},u=this,l=h,Y(a,function(t){if(1==t.nodeType){t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var e=H(t);e&&!t.isLoop&&l.push((o=new B(e,{root:n=t,parent:i=u},n.innerHTML),a=z(n),s=W(i),(r=(o.parent=s).tags[a])?(R(r)||(s.tags[a]=[r]),~s.tags[a].indexOf(o)||s.tags[a].push(o)):s.tags[a]=o,n.innerHTML="",o)),t.isLoop||K(t,u,[])}var n,i,r,o,a,s})}function j(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function F(t,e){for(var n,i=0,r=(t||[]).length;i<r;i++)null!=(n=t[i])&&!1===e(n,i)&&i--;return t}function U(t){return typeof t===i||!1}function V(t,e){t.removeAttribute(e)}function H(t){return t.tagName&&_[t.getAttribute(x)||t.tagName.toLowerCase()]}function W(t){for(var e=t;!H(e.root)&&e.parent;)e=e.parent;return e}function z(t){var e=H(t),n=t.getAttribute("name");return n&&n.indexOf(L(0))<0?n:e?e.name:t.tagName.toLowerCase()}function G(t){for(var e,n=arguments,i=1;i<n.length;++i)if(e=n[i])for(var r in e)t[r]=e[r];return t}function q(t){if(!(t instanceof B||t&&typeof t.trigger==i))return t;var e={};for(var n in t)~D.indexOf(n)||(e[n]=t[n]);return e}function Y(t,e){if(t){if(!1===e(t))return;for(t=t.firstChild;t;)Y(t,e),t=t.nextSibling}}function X(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function h(t){return document.createElement(t)}function f(t,e){return(e||document).querySelectorAll(t)}function K(t,e,n){if(!t._visited){var i,r=t.getAttribute("id")||t.getAttribute("name");r&&(n.indexOf(r)<0&&((i=e[r])?R(i)?i.push(t):e[r]=[i,t]:e[r]=t),t._visited=!0)}}var u,p=[],_={};T.tag=function(t,e,n,i,r){return U(i)&&(r=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(U(n)?r=n:function(t){if(!T.render){u||(u=h("style")).setAttribute("type","text/css");var e=document.head||document.getElementsByTagName("head")[0];if(u.styleSheet?u.styleSheet.cssText+=t:u.innerHTML+=t,!u._rendered)if(u.styleSheet)document.body.appendChild(u);else{var n=document.querySelector("style[type=riot]");n?(n.parentNode.insertBefore(u,n),n.parentNode.removeChild(n)):e.appendChild(u)}u._rendered=!0}}(n)),_[t]={name:t,tmpl:e,attrs:i,fn:r},t},T.mount=function(t,i,r){var e,n,o=[];function a(t){var e="";return F(t,function(t){e+=", *["+x+'="'+t.trim()+'"]'}),e}function s(){var t=Object.keys(_);return t+a(t)}function u(t){var e;if(t.tagName){!i||(e=t.getAttribute(x))&&e==i||t.setAttribute(x,i);var n=function(t,e,n){var i=_[e],r=t._innerHTML=t._innerHTML||t.innerHTML;if(t.innerHTML="",i&&t&&(i=new B(i,{root:t,opts:n},r)),i&&i.mount)return i.mount(),p.push(i),i.on("unmount",function(){p.splice(p.indexOf(i),1)})}(t,i||t.getAttribute(x)||t.tagName.toLowerCase(),r);n&&o.push(n)}else t.length&&F(t,u)}if(typeof i===N&&(r=i,i=0),typeof t===I?("*"===t?t=n=s():t+=a(t.split(",")),e=f(t)):e=t,"*"===i){if(i=n||s(),e.tagName)e=f(i,e);else{var l=[];F(e,function(t){l.push(f(i,t))}),e=l}i=0}return e.tagName?u(e):F(e,u),o},T.update=function(){return F(p,function(t){t.update()})},T.mountTo=T.mount,T.util={brackets:L,tmpl:k},typeof l===N?e.exports=T:"function"==typeof define&&define.amd?define(function(){return A.riot=T}):A.riot=T}("undefined"!=typeof window?window:void 0)},{}],115:[function(t,e,n){t("./tarnhelm")},{"./tarnhelm":81}]},{},[115])},{}],52:[function(t,U,V){(function(F){(function(){var na,ia="Expected a function",ra="__lodash_hash_undefined__",oa="__lodash_placeholder__",aa=9007199254740991,sa=NaN,ua=4294967295,la=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ca="[object Arguments]",da="[object Array]",ha="[object Boolean]",fa="[object Date]",pa="[object Error]",ma="[object Function]",ga="[object GeneratorFunction]",va="[object Map]",_a="[object Number]",ya="[object Object]",ba="[object Promise]",wa="[object RegExp]",Aa="[object Set]",Ea="[object String]",Ta="[object Symbol]",Sa="[object WeakMap]",Ca="[object ArrayBuffer]",xa="[object DataView]",Ia="[object Float32Array]",Na="[object Float64Array]",Oa="[object Int8Array]",Da="[object Int16Array]",Ra="[object Int32Array]",La="[object Uint8Array]",ka="[object Uint8ClampedArray]",Ma="[object Uint16Array]",Pa="[object Uint32Array]",Ba=/\b__p \+= '';/g,ja=/\b(__p \+=) '' \+/g,Fa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ua=/&(?:amp|lt|gt|quot|#39);/g,Va=/[&<>"']/g,Ha=RegExp(Ua.source),Wa=RegExp(Va.source),za=/<%-([\s\S]+?)%>/g,Ga=/<%([\s\S]+?)%>/g,qa=/<%=([\s\S]+?)%>/g,Ya=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xa=/^\w*$/,Ka=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$a=/[\\^$.*+?()[\]{}|]/g,Qa=RegExp($a.source),Ja=/^\s+|\s+$/g,Za=/^\s+/,ts=/\s+$/,es=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ns=/\{\n\/\* \[wrapped with (.+)\] \*/,is=/,? & /,rs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,os=/\\(\\)?/g,as=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ss=/\w*$/,us=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,cs=/^\[object .+?Constructor\]$/,ds=/^0o[0-7]+$/i,hs=/^(?:0|[1-9]\d*)$/,fs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ps=/($^)/,ms=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\ufe0e\\ufe0f",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="["+t+"]",u="["+a+"]",l="["+e+"]",c="\\d+",d="["+n+"]",h="["+i+"]",f="[^"+t+a+c+n+i+r+"]",p="\\ud83c[\\udffb-\\udfff]",m="[^"+t+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",_="["+r+"]",y="(?:"+h+"|"+f+")",b="(?:"+_+"|"+f+")",w="(?:['](?:d|ll|m|re|s|t|ve))?",A="(?:['](?:D|LL|M|RE|S|T|VE))?",E="(?:"+l+"|"+p+")"+"?",T="["+o+"]?",S=T+E+("(?:\\u200d(?:"+[m,g,v].join("|")+")"+T+E+")*"),C="(?:"+[d,g,v].join("|")+")"+S,x="(?:"+[m+l+"?",l,g,v,s].join("|")+")",gs=RegExp("[']","g"),vs=RegExp(l,"g"),I=RegExp(p+"(?="+p+")|"+x+S,"g"),_s=RegExp([_+"?"+h+"+"+w+"(?="+[u,_,"$"].join("|")+")",b+"+"+A+"(?="+[u,_+y,"$"].join("|")+")",_+"?"+y+"+"+w,_+"+"+A,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c,C].join("|"),"g"),N=RegExp("[\\u200d"+t+e+o+"]"),ys=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ws=-1,As={};As[Ia]=As[Na]=As[Oa]=As[Da]=As[Ra]=As[La]=As[ka]=As[Ma]=As[Pa]=!0,As[ca]=As[da]=As[Ca]=As[ha]=As[xa]=As[fa]=As[pa]=As[ma]=As[va]=As[_a]=As[ya]=As[wa]=As[Aa]=As[Ea]=As[Sa]=!1;var Es={};Es[ca]=Es[da]=Es[Ca]=Es[xa]=Es[ha]=Es[fa]=Es[Ia]=Es[Na]=Es[Oa]=Es[Da]=Es[Ra]=Es[va]=Es[_a]=Es[ya]=Es[wa]=Es[Aa]=Es[Ea]=Es[Ta]=Es[La]=Es[ka]=Es[Ma]=Es[Pa]=!0,Es[pa]=Es[ma]=Es[Sa]=!1;var O={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ts=parseFloat,Ss=parseInt,D="object"==typeof F&&F&&F.Object===Object&&F,R="object"==typeof self&&self&&self.Object===Object&&self,Cs=D||R||Function("return this")(),L="object"==typeof V&&V&&!V.nodeType&&V,k=L&&"object"==typeof U&&U&&!U.nodeType&&U,xs=k&&k.exports===L,M=xs&&D.process,P=function(){try{var t=k&&k.require&&k.require("util").types;return t||M&&M.binding&&M.binding("util")}catch(t){}}(),Is=P&&P.isArrayBuffer,Ns=P&&P.isDate,Os=P&&P.isMap,Ds=P&&P.isRegExp,Rs=P&&P.isSet,Ls=P&&P.isTypedArray;function ks(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ms(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Ps(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Bs(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function js(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Fs(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Us(t,e){return!!(null==t?0:t.length)&&-1<Ks(t,e,0)}function Vs(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Hs(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Ws(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function zs(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Gs(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function qs(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var B=Zs("length");function Ys(t,i,e){var r;return e(t,function(t,e,n){if(i(t,e,n))return r=e,!1}),r}function Xs(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Ks(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Xs(t,Qs,n)}function $s(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Qs(t){return t!=t}function Js(t,e){var n=null==t?0:t.length;return n?eu(t,e)/n:sa}function Zs(e){return function(t){return null==t?na:t[e]}}function j(e){return function(t){return null==e?na:e[t]}}function tu(t,i,r,o,e){return e(t,function(t,e,n){r=o?(o=!1,t):i(r,t,e,n)}),r}function eu(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==na&&(n=n===na?o:n+o)}return n}function nu(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function iu(e){return function(t){return e(t)}}function ru(e,t){return Hs(t,function(t){return e[t]})}function ou(t,e){return t.has(e)}function au(t,e){for(var n=-1,i=t.length;++n<i&&-1<Ks(e,t[n],0););return n}function su(t,e){for(var n=t.length;n--&&-1<Ks(e,t[n],0););return n}var uu=j({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),lu=j({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cu(t){return"\\"+O[t]}function du(t){return N.test(t)}function hu(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i}function fu(e,n){return function(t){return e(n(t))}}function pu(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==oa||(t[n]=oa,o[r++]=n)}return o}function mu(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function gu(t){return du(t)?function(t){var e=I.lastIndex=0;for(;I.test(t);)++e;return e}(t):B(t)}function vu(t){return du(t)?t.match(I)||[]:t.split("")}var _u=j({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yu=function t(e){var n,I=(e=null==e?Cs:yu.defaults(Cs.Object(),e,yu.pick(Cs,bs))).Array,i=e.Date,r=e.Error,g=e.Function,o=e.Math,T=e.Object,v=e.RegExp,c=e.String,N=e.TypeError,a=I.prototype,s=g.prototype,d=T.prototype,u=e["__core-js_shared__"],l=s.toString,S=d.hasOwnProperty,h=0,f=(n=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",p=d.toString,m=l.call(T),_=Cs._,y=v("^"+l.call(S).replace($a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=xs?e.Buffer:na,w=e.Symbol,A=e.Uint8Array,E=b?b.allocUnsafe:na,C=fu(T.getPrototypeOf,T),x=T.create,O=d.propertyIsEnumerable,D=a.splice,R=w?w.isConcatSpreadable:na,L=w?w.iterator:na,k=w?w.toStringTag:na,M=function(){try{var t=Un(T,"defineProperty");return t({},"",{}),t}catch(t){}}(),P=e.clearTimeout!==Cs.clearTimeout&&e.clearTimeout,B=i&&i.now!==Cs.Date.now&&i.now,j=e.setTimeout!==Cs.setTimeout&&e.setTimeout,F=o.ceil,U=o.floor,V=T.getOwnPropertySymbols,H=b?b.isBuffer:na,W=e.isFinite,z=a.join,G=fu(T.keys,T),q=o.max,Y=o.min,X=i.now,K=e.parseInt,$=o.random,Q=a.reverse,J=Un(e,"DataView"),Z=Un(e,"Map"),tt=Un(e,"Promise"),et=Un(e,"Set"),nt=Un(e,"WeakMap"),it=Un(T,"create"),rt=nt&&new nt,ot={},at=pi(J),st=pi(Z),ut=pi(tt),lt=pi(et),ct=pi(nt),dt=w?w.prototype:na,ht=dt?dt.valueOf:na,ft=dt?dt.toString:na;function pt(t){if(Dr(t)&&!br(t)&&!(t instanceof _t)){if(t instanceof vt)return t;if(S.call(t,"__wrapped__"))return mi(t)}return new vt(t)}var mt=function(){function n(){}return function(t){if(!Or(t))return{};if(x)return x(t);n.prototype=t;var e=new n;return n.prototype=na,e}}();function gt(){}function vt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=na}function _t(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ua,this.__views__=[]}function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function At(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wt;++e<n;)this.add(t[e])}function Et(t){var e=this.__data__=new bt(t);this.size=e.size}function Tt(t,e){var n=br(t),i=!n&&yr(t),r=!n&&!i&&Tr(t),o=!n&&!i&&!r&&Fr(t),a=n||i||r||o,s=a?nu(t.length,c):[],u=s.length;for(var l in t)!e&&!S.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Yn(l,u))||s.push(l);return s}function St(t){var e=t.length;return e?t[Ae(0,e-1)]:na}function Ct(t,e){return li(rn(t),Mt(e,0,t.length))}function xt(t){return li(rn(t))}function It(t,e,n){(n===na||gr(t[e],n))&&(n!==na||e in t)||Lt(t,e,n)}function Nt(t,e,n){var i=t[e];S.call(t,e)&&gr(i,n)&&(n!==na||e in t)||Lt(t,e,n)}function Ot(t,e){for(var n=t.length;n--;)if(gr(t[n][0],e))return n;return-1}function Dt(t,i,r,o){return Ut(t,function(t,e,n){i(o,t,r(t),n)}),o}function Rt(t,e){return t&&on(e,so(e),t)}function Lt(t,e,n){"__proto__"==e&&M?M(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function kt(t,e){for(var n=-1,i=e.length,r=I(i),o=null==t;++n<i;)r[n]=o?na:no(t,e[n]);return r}function Mt(t,e,n){return t==t&&(n!==na&&(t=t<=n?t:n),e!==na&&(t=e<=t?t:e)),t}function Pt(n,i,r,t,e,o){var a,s=1&i,u=2&i,l=4&i;if(r&&(a=e?r(n,t,e,o):r(n)),a!==na)return a;if(!Or(n))return n;var c,d,h,f,p,m,g,v,_,y=br(n);if(y){if(v=(g=n).length,_=new g.constructor(v),v&&"string"==typeof g[0]&&S.call(g,"index")&&(_.index=g.index,_.input=g.input),a=_,!s)return rn(n,a)}else{var b=Wn(n),w=b==ma||b==ga;if(Tr(n))return Qe(n,s);if(b==ya||b==ca||w&&!e){if(a=u||w?{}:Gn(n),!s)return u?(m=h=n,f=(p=a)&&on(m,uo(m),p),on(h,Hn(h),f)):(d=Rt(a,c=n),on(c,Vn(c),d))}else{if(!Es[b])return e?n:{};a=function(t,e,n){var i,r,o,a,s,u=t.constructor;switch(e){case Ca:return Je(t);case ha:case fa:return new u(+t);case xa:return a=t,s=n?Je(a.buffer):a.buffer,new a.constructor(s,a.byteOffset,a.byteLength);case Ia:case Na:case Oa:case Da:case Ra:case La:case ka:case Ma:case Pa:return Ze(t,n);case va:return new u;case _a:case Ea:return new u(t);case wa:return(o=new(r=t).constructor(r.source,ss.exec(r))).lastIndex=r.lastIndex,o;case Aa:return new u;case Ta:return i=t,ht?T(ht.call(i)):{}}}(n,b,s)}}o||(o=new Et);var A=o.get(n);if(A)return A;o.set(n,a),Pr(n)?n.forEach(function(t){a.add(Pt(t,i,r,t,n,o))}):Rr(n)&&n.forEach(function(t,e){a.set(e,Pt(t,i,r,e,n,o))});var E=y?na:(l?u?Ln:Rn:u?uo:so)(n);return Ps(E||n,function(t,e){E&&(t=n[e=t]),Nt(a,e,Pt(t,i,r,e,n,o))}),a}function Bt(t,e,n){var i=n.length;if(null==t)return!i;for(t=T(t);i--;){var r=n[i],o=e[r],a=t[r];if(a===na&&!(r in t)||!o(a))return!1}return!0}function jt(t,e,n){if("function"!=typeof t)throw new N(ia);return oi(function(){t.apply(na,n)},e)}function Ft(t,e,n,i){var r=-1,o=Us,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Hs(e,iu(n))),i?(o=Vs,a=!1):200<=e.length&&(o=ou,a=!1,e=new At(e));t:for(;++r<s;){var c=t[r],d=null==n?c:n(c);if(c=i||0!==c?c:0,a&&d==d){for(var h=l;h--;)if(e[h]===d)continue t;u.push(c)}else o(e,d,i)||u.push(c)}return u}pt.templateSettings={escape:za,evaluate:Ga,interpolate:qa,variable:"",imports:{_:pt}},(pt.prototype=gt.prototype).constructor=pt,(vt.prototype=mt(gt.prototype)).constructor=vt,(_t.prototype=mt(gt.prototype)).constructor=_t,yt.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},yt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yt.prototype.get=function(t){var e=this.__data__;if(it){var n=e[t];return n===ra?na:n}return S.call(e,t)?e[t]:na},yt.prototype.has=function(t){var e=this.__data__;return it?e[t]!==na:S.call(e,t)},yt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=it&&e===na?ra:e,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(t){var e=this.__data__,n=Ot(e,t);return!(n<0||(n==e.length-1?e.pop():D.call(e,n,1),--this.size,0))},bt.prototype.get=function(t){var e=this.__data__,n=Ot(e,t);return n<0?na:e[n][1]},bt.prototype.has=function(t){return-1<Ot(this.__data__,t)},bt.prototype.set=function(t,e){var n=this.__data__,i=Ot(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},wt.prototype.clear=function(){this.size=0,this.__data__={hash:new yt,map:new(Z||bt),string:new yt}},wt.prototype.delete=function(t){var e=jn(this,t).delete(t);return this.size-=e?1:0,e},wt.prototype.get=function(t){return jn(this,t).get(t)},wt.prototype.has=function(t){return jn(this,t).has(t)},wt.prototype.set=function(t,e){var n=jn(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},At.prototype.add=At.prototype.push=function(t){return this.__data__.set(t,ra),this},At.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new bt,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof bt){var i=n.__data__;if(!Z||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new wt(i)}return n.set(t,e),this.size=n.size,this};var Ut=un(Xt),Vt=un(Kt,!0);function Ht(t,i){var r=!0;return Ut(t,function(t,e,n){return r=!!i(t,e,n)}),r}function Wt(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],a=e(o);if(null!=a&&(s===na?a==a&&!jr(a):n(a,s)))var s=a,u=o}return u}function zt(t,i){var r=[];return Ut(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r}function Gt(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=qn),r||(r=[]);++o<a;){var s=t[o];0<e&&n(s)?1<e?Gt(s,e-1,n,i,r):Ws(r,s):i||(r[r.length]=s)}return r}var qt=ln(),Yt=ln(!0);function Xt(t,e){return t&&qt(t,e,so)}function Kt(t,e){return t&&Yt(t,e,so)}function $t(e,t){return Fs(t,function(t){return xr(e[t])})}function Qt(t,e){for(var n=0,i=(e=Ye(e,t)).length;null!=t&&n<i;)t=t[fi(e[n++])];return n&&n==i?t:na}function Jt(t,e,n){var i=e(t);return br(t)?i:Ws(i,n(t))}function Zt(t){return null==t?t===na?"[object Undefined]":"[object Null]":k&&k in T(t)?function(t){var e=S.call(t,k),n=t[k];try{t[k]=na;var i=!0}catch(t){}var r=p.call(t);return i&&(e?t[k]=n:delete t[k]),r}(t):(e=t,p.call(e));var e}function te(t,e){return e<t}function ee(t,e){return null!=t&&S.call(t,e)}function ne(t,e){return null!=t&&e in T(t)}function ie(t,e,n){for(var i=n?Vs:Us,r=t[0].length,o=t.length,a=o,s=I(o),u=1/0,l=[];a--;){var c=t[a];a&&e&&(c=Hs(c,iu(e))),u=Y(c.length,u),s[a]=!n&&(e||120<=r&&120<=c.length)?new At(a&&c):na}c=t[0];var d=-1,h=s[0];t:for(;++d<r&&l.length<u;){var f=c[d],p=e?e(f):f;if(f=n||0!==f?f:0,!(h?ou(h,p):i(l,p,n))){for(a=o;--a;){var m=s[a];if(!(m?ou(m,p):i(t[a],p,n)))continue t}h&&h.push(p),l.push(f)}}return l}function re(t,e,n){var i=null==(t=ni(t,e=Ye(e,t)))?t:t[fi(Ci(e))];return null==i?na:ks(i,t,n)}function oe(t){return Dr(t)&&Zt(t)==ca}function ae(t,e,n,i,r){return t===e||(null==t||null==e||!Dr(t)&&!Dr(e)?t!=t&&e!=e:function(t,e,n,i,r,o){var a=br(t),s=br(e),u=a?da:Wn(t),l=s?da:Wn(e),c=(u=u==ca?ya:u)==ya,d=(l=l==ca?ya:l)==ya,h=u==l;if(h&&Tr(t)){if(!Tr(e))return!1;c=!(a=!0)}if(h&&!c)return o||(o=new Et),a||Fr(t)?On(t,e,n,i,r,o):function(t,e,n,i,r,o,a){switch(n){case xa:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ca:return!(t.byteLength!=e.byteLength||!o(new A(t),new A(e)));case ha:case fa:case _a:return gr(+t,+e);case pa:return t.name==e.name&&t.message==e.message;case wa:case Ea:return t==e+"";case va:var s=hu;case Aa:var u=1&i;if(s||(s=mu),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;i|=2,a.set(t,e);var c=On(s(t),s(e),i,r,o,a);return a.delete(t),c;case Ta:if(ht)return ht.call(t)==ht.call(e)}return!1}(t,e,u,n,i,r,o);if(!(1&n)){var f=c&&S.call(t,"__wrapped__"),p=d&&S.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return o||(o=new Et),r(m,g,n,i,o)}}return!!h&&(o||(o=new Et),function(t,e,n,i,r,o){var a=1&n,s=Rn(t),u=s.length,l=Rn(e).length;if(u!=l&&!a)return!1;for(var c=u;c--;){var d=s[c];if(!(a?d in e:S.call(e,d)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<u;){d=s[c];var m=t[d],g=e[d];if(i)var v=a?i(g,m,d,e,t,o):i(m,g,d,t,e,o);if(!(v===na?m===g||r(m,g,n,i,o):v)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var _=t.constructor,y=e.constructor;_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,i,r,o))}(t,e,n,i,ae,r))}function se(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=T(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){var u=(s=n[r])[0],l=t[u],c=s[1];if(a&&s[2]){if(l===na&&!(u in t))return!1}else{var d=new Et;if(i)var h=i(l,c,u,t,e,d);if(!(h===na?ae(c,l,3,i,d):h))return!1}}return!0}function ue(t){return!(!Or(t)||(e=t,f&&f in e))&&(xr(t)?y:cs).test(pi(t));var e}function le(t){return"function"==typeof t?t:null==t?ko:"object"==typeof t?br(t)?me(t[0],t[1]):pe(t):Wo(t)}function ce(t){if(!Jn(t))return G(t);var e=[];for(var n in T(t))S.call(t,n)&&"constructor"!=n&&e.push(n);return e}function de(t){if(!Or(t))return function(t){var e=[];if(null!=t)for(var n in T(t))e.push(n);return e}(t);var e=Jn(t),n=[];for(var i in t)("constructor"!=i||!e&&S.call(t,i))&&n.push(i);return n}function he(t,e){return t<e}function fe(t,i){var r=-1,o=Ar(t)?I(t.length):[];return Ut(t,function(t,e,n){o[++r]=i(t,e,n)}),o}function pe(e){var n=Fn(e);return 1==n.length&&n[0][2]?ti(n[0][0],n[0][1]):function(t){return t===e||se(t,e,n)}}function me(n,i){return Kn(n)&&Zn(i)?ti(fi(n),i):function(t){var e=no(t,n);return e===na&&e===i?io(t,n):ae(i,e,3)}}function ge(i,r,o,a,s){i!==r&&qt(r,function(t,e){if(s||(s=new Et),Or(t))!function(t,e,n,i,r,o,a){var s=ii(t,n),u=ii(e,n),l=a.get(u);if(l)return It(t,n,l);var c=o?o(s,u,n+"",t,e,a):na,d=c===na;if(d){var h=br(u),f=!h&&Tr(u),p=!h&&!f&&Fr(u);c=u,h||f||p?c=br(s)?s:Er(s)?rn(s):f?Qe(u,!(d=!1)):p?Ze(u,!(d=!1)):[]:kr(u)||yr(u)?yr(c=s)?c=Yr(s):Or(s)&&!xr(s)||(c=Gn(u)):d=!1}d&&(a.set(u,c),r(c,u,i,o,a),a.delete(u)),It(t,n,c)}(i,r,e,o,ge,a,s);else{var n=a?a(ii(i,e),t,e+"",i,r,s):na;n===na&&(n=t),It(i,e,n)}},uo)}function ve(t,e){var n=t.length;if(n)return Yn(e+=e<0?n:0,n)?t[e]:na}function _e(t,i,n){var r=-1;return i=Hs(i.length?i:[ko],iu(Bn())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fe(t,function(e,t,n){return{criteria:Hs(i,function(t){return t(e)}),index:++r,value:e}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var u=tn(r[i],o[i]);if(u){if(s<=i)return u;var l=n[i];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function ye(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=Qt(t,a);n(s,a)&&xe(o,Ye(a,t),s)}return o}function be(t,e,n,i){var r=i?$s:Ks,o=-1,a=e.length,s=t;for(t===e&&(e=rn(e)),n&&(s=Hs(t,iu(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;-1<(u=r(s,c,u,i));)s!==t&&D.call(s,u,1),D.call(t,u,1);return t}function we(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Yn(r)?D.call(t,r,1):Fe(t,r)}}return t}function Ae(t,e){return t+U($()*(e-t+1))}function Ee(t,e){var n="";if(!t||e<1||aa<e)return n;for(;e%2&&(n+=t),(e=U(e/2))&&(t+=t),e;);return n}function Te(t,e){return ai(ei(t,e,ko),t+"")}function Se(t){return St(vo(t))}function Ce(t,e){var n=vo(t);return li(n,Mt(e,0,n.length))}function xe(t,e,n,i){if(!Or(t))return t;for(var r=-1,o=(e=Ye(e,t)).length,a=o-1,s=t;null!=s&&++r<o;){var u=fi(e[r]),l=n;if(r!=a){var c=s[u];(l=i?i(c,u,s):na)===na&&(l=Or(c)?c:Yn(e[r+1])?[]:{})}Nt(s,u,l),s=s[u]}return t}var Ie=rt?function(t,e){return rt.set(t,e),t}:ko,Ne=M?function(t,e){return M(t,"toString",{configurable:!0,enumerable:!1,value:Do(e),writable:!0})}:ko;function Oe(t){return li(vo(t))}function De(t,e,n){var i=-1,r=t.length;e<0&&(e=r<-e?0:r+e),(n=r<n?r:n)<0&&(n+=r),r=n<e?0:n-e>>>0,e>>>=0;for(var o=I(r);++i<r;)o[i]=t[i+e];return o}function Re(t,i){var r;return Ut(t,function(t,e,n){return!(r=i(t,e,n))}),!!r}function Le(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!jr(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return ke(t,e,ko,n)}function ke(t,e,n,i){e=n(e);for(var r=0,o=null==t?0:t.length,a=e!=e,s=null===e,u=jr(e),l=e===na;r<o;){var c=U((r+o)/2),d=n(t[c]),h=d!==na,f=null===d,p=d==d,m=jr(d);if(a)var g=i||p;else g=l?p&&(i||h):s?p&&h&&(i||!f):u?p&&h&&!f&&(i||!m):!f&&!m&&(i?d<=e:d<e);g?r=c+1:o=c}return Y(o,4294967294)}function Me(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!gr(s,u)){var u=s;o[r++]=0===a?0:a}}return o}function Pe(t){return"number"==typeof t?t:jr(t)?sa:+t}function Be(t){if("string"==typeof t)return t;if(br(t))return Hs(t,Be)+"";if(jr(t))return ft?ft.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function je(t,e,n){var i=-1,r=Us,o=t.length,a=!0,s=[],u=s;if(n)a=!1,r=Vs;else if(200<=o){var l=e?null:Tn(t);if(l)return mu(l);a=!1,r=ou,u=new At}else u=e?[]:s;t:for(;++i<o;){var c=t[i],d=e?e(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue t;e&&u.push(d),s.push(c)}else r(u,d,n)||(u!==s&&u.push(d),s.push(c))}return s}function Fe(t,e){return null==(t=ni(t,e=Ye(e,t)))||delete t[fi(Ci(e))]}function Ue(t,e,n,i){return xe(t,e,n(Qt(t,e)),i)}function Ve(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?De(t,i?0:o,i?o+1:r):De(t,i?o+1:0,i?r:o)}function He(t,e){var n=t;return n instanceof _t&&(n=n.value()),zs(e,function(t,e){return e.func.apply(e.thisArg,Ws([t],e.args))},n)}function We(t,e,n){var i=t.length;if(i<2)return i?je(t[0]):[];for(var r=-1,o=I(i);++r<i;)for(var a=t[r],s=-1;++s<i;)s!=r&&(o[r]=Ft(o[r]||a,t[s],e,n));return je(Gt(o,1),e,n)}function ze(t,e,n){for(var i=-1,r=t.length,o=e.length,a={};++i<r;){var s=i<o?e[i]:na;n(a,t[i],s)}return a}function Ge(t){return Er(t)?t:[]}function qe(t){return"function"==typeof t?t:ko}function Ye(t,e){return br(t)?t:Kn(t,e)?[t]:hi(Xr(t))}var Xe=Te;function Ke(t,e,n){var i=t.length;return n=n===na?i:n,!e&&i<=n?t:De(t,e,n)}var $e=P||function(t){return Cs.clearTimeout(t)};function Qe(t,e){if(e)return t.slice();var n=t.length,i=E?E(n):new t.constructor(n);return t.copy(i),i}function Je(t){var e=new t.constructor(t.byteLength);return new A(e).set(new A(t)),e}function Ze(t,e){var n=e?Je(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function tn(t,e){if(t!==e){var n=t!==na,i=null===t,r=t==t,o=jr(t),a=e!==na,s=null===e,u=e==e,l=jr(e);if(!s&&!l&&!o&&e<t||o&&a&&u&&!s&&!l||i&&a&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&t<e||l&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!u)return-1}return 0}function en(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,u=e.length,l=q(o-a,0),c=I(u+l),d=!i;++s<u;)c[s]=e[s];for(;++r<a;)(d||r<o)&&(c[n[r]]=t[r]);for(;l--;)c[s++]=t[r++];return c}function nn(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=q(o-s,0),d=I(c+l),h=!i;++r<c;)d[r]=t[r];for(var f=r;++u<l;)d[f+u]=e[u];for(;++a<s;)(h||r<o)&&(d[f+n[a]]=t[r++]);return d}function rn(t,e){var n=-1,i=t.length;for(e||(e=I(i));++n<i;)e[n]=t[n];return e}function on(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=i?i(n[s],t[s],s,n,t):na;u===na&&(u=t[s]),r?Lt(n,s,u):Nt(n,s,u)}return n}function an(r,o){return function(t,e){var n=br(t)?Ms:Dt,i=o?o():{};return n(t,r,Bn(e,2),i)}}function sn(s){return Te(function(t,e){var n=-1,i=e.length,r=1<i?e[i-1]:na,o=2<i?e[2]:na;for(r=3<s.length&&"function"==typeof r?(i--,r):na,o&&Xn(e[0],e[1],o)&&(r=i<3?na:r,i=1),t=T(t);++n<i;){var a=e[n];a&&s(t,a,n,r)}return t})}function un(o,a){return function(t,e){if(null==t)return t;if(!Ar(t))return o(t,e);for(var n=t.length,i=a?n:-1,r=T(t);(a?i--:++i<n)&&!1!==e(r[i],i,r););return t}}function ln(u){return function(t,e,n){for(var i=-1,r=T(t),o=n(t),a=o.length;a--;){var s=o[u?a:++i];if(!1===e(r[s],s,r))break}return t}}function cn(r){return function(t){var e=du(t=Xr(t))?vu(t):na,n=e?e[0]:t.charAt(0),i=e?Ke(e,1).join(""):t.slice(1);return n[r]()+i}}function dn(e){return function(t){return zs(Io(bo(t).replace(gs,"")),e,"")}}function hn(i){return function(){var t=arguments;switch(t.length){case 0:return new i;case 1:return new i(t[0]);case 2:return new i(t[0],t[1]);case 3:return new i(t[0],t[1],t[2]);case 4:return new i(t[0],t[1],t[2],t[3]);case 5:return new i(t[0],t[1],t[2],t[3],t[4]);case 6:return new i(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new i(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=mt(i.prototype),n=i.apply(e,t);return Or(n)?n:e}}function fn(a){return function(t,e,n){var i=T(t);if(!Ar(t)){var r=Bn(e,3);t=so(t),e=function(t){return r(i[t],t,i)}}var o=a(t,e,n);return-1<o?i[r?t[o]:o]:na}}function pn(u){return Dn(function(r){var o=r.length,t=o,e=vt.prototype.thru;for(u&&r.reverse();t--;){var n=r[t];if("function"!=typeof n)throw new N(ia);if(e&&!a&&"wrapper"==Mn(n))var a=new vt([],!0)}for(t=a?t:o;++t<o;){var i=Mn(n=r[t]),s="wrapper"==i?kn(n):na;a=s&&$n(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[Mn(s[0])].apply(a,s[3]):1==n.length&&$n(n)?a[i]():a.thru(n)}return function(){var t=arguments,e=t[0];if(a&&1==t.length&&br(e))return a.plant(e).value();for(var n=0,i=o?r[n].apply(this,t):e;++n<o;)i=r[n].call(this,i);return i}})}function mn(l,c,d,h,f,p,m,g,v,_){var y=128&c,b=1&c,w=2&c,A=24&c,E=512&c,T=w?na:hn(l);return function t(){for(var e=arguments.length,n=I(e),i=e;i--;)n[i]=arguments[i];if(A)var r=Pn(t),o=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(n,r);if(h&&(n=en(n,h,f,A)),p&&(n=nn(n,p,m,A)),e-=o,A&&e<_){var a=pu(n,r);return An(l,c,mn,t.placeholder,d,n,a,g,v,_-e)}var s=b?d:this,u=w?s[l]:l;return e=n.length,g?n=function(t,e){for(var n=t.length,i=Y(e.length,n),r=rn(t);i--;){var o=e[i];t[i]=Yn(o,n)?r[o]:na}return t}(n,g):E&&1<e&&n.reverse(),y&&v<e&&(n.length=v),this&&this!==Cs&&this instanceof t&&(u=T||hn(u)),u.apply(s,n)}}function gn(a,s){return function(t,e){return n=t,i=a,r=s(e),o={},Xt(n,function(t,e,n){i(o,r(t),e,n)}),o;var n,i,r,o}}function vn(i,r){return function(t,e){var n;if(t===na&&e===na)return r;if(t!==na&&(n=t),e!==na){if(n===na)return e;"string"==typeof t||"string"==typeof e?(t=Be(t),e=Be(e)):(t=Pe(t),e=Pe(e)),n=i(t,e)}return n}}function _n(i){return Dn(function(t){return t=Hs(t,iu(Bn())),Te(function(e){var n=this;return i(t,function(t){return ks(t,n,e)})})})}function yn(t,e){var n=(e=e===na?" ":Be(e)).length;if(n<2)return n?Ee(e,t):e;var i=Ee(e,F(t/gu(e)));return du(e)?Ke(vu(i),0,t).join(""):i.slice(0,t)}function bn(i){return function(t,e,n){return n&&"number"!=typeof n&&Xn(t,e,n)&&(e=n=na),t=Wr(t),e===na?(e=t,t=0):e=Wr(e),function(t,e,n,i){for(var r=-1,o=q(F((e-t)/(n||1)),0),a=I(o);o--;)a[i?o:++r]=t,t+=n;return a}(t,e,n=n===na?t<e?1:-1:Wr(n),i)}}function wn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=qr(t),e=qr(e)),n(t,e)}}function An(t,e,n,i,r,o,a,s,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var d=[t,e,r,c?o:na,c?a:na,c?na:o,c?na:a,s,u,l],h=n.apply(na,d);return $n(t)&&ri(h,d),h.placeholder=i,si(h,t,e)}function En(t){var i=o[t];return function(t,e){if(t=qr(t),(e=null==e?0:Y(zr(e),292))&&W(t)){var n=(Xr(t)+"e").split("e");return+((n=(Xr(i(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return i(t)}}var Tn=et&&1/mu(new et([,-0]))[1]==1/0?function(t){return new et(t)}:Fo;function Sn(a){return function(t){var e,n,i,r,o=Wn(t);return o==va?hu(t):o==Aa?(e=t,n=-1,i=Array(e.size),e.forEach(function(t){i[++n]=[t,t]}),i):Hs(a(r=t),function(t){return[t,r[t]]})}}function Cn(t,e,n,i,r,o,a,s){var u=2&e;if(!u&&"function"!=typeof t)throw new N(ia);var l=i?i.length:0;if(l||(e&=-97,i=r=na),a=a===na?a:q(zr(a),0),s=s===na?s:zr(s),l-=r?r.length:0,64&e){var c=i,d=r;i=r=na}var h,f,p,m,g,v,_,y,b,w,A,E,T,S=u?na:kn(t),C=[t,e,n,i,r,c,d,o,a,s];if(S&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(o||a){1&i&&(t[2]=e[2],r|=1&n?0:4);var s=e[3];if(s){var u=t[3];t[3]=u?en(u,s,e[4]):s,t[4]=u?pu(t[3],oa):e[4]}(s=e[5])&&(u=t[5],t[5]=u?nn(u,s,e[6]):s,t[6]=u?pu(t[5],oa):e[6]),(s=e[7])&&(t[7]=s),128&i&&(t[8]=null==t[8]?e[8]:Y(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}}(C,S),t=C[0],e=C[1],n=C[2],i=C[3],r=C[4],!(s=C[9]=C[9]===na?u?0:t.length:q(C[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)8==e||16==e?(_=e,y=s,b=hn(v=t),x=function t(){for(var e=arguments.length,n=I(e),i=e,r=Pn(t);i--;)n[i]=arguments[i];var o=e<3&&n[0]!==r&&n[e-1]!==r?[]:pu(n,r);return(e-=o.length)<y?An(v,_,mn,t.placeholder,na,n,o,na,na,y-e):ks(this&&this!==Cs&&this instanceof t?b:v,this,n)}):32!=e&&33!=e||r.length?x=mn.apply(na,C):(f=n,p=i,m=1&e,g=hn(h=t),x=function t(){for(var e=-1,n=arguments.length,i=-1,r=p.length,o=I(r+n),a=this&&this!==Cs&&this instanceof t?g:h;++i<r;)o[i]=p[i];for(;n--;)o[i++]=arguments[++e];return ks(a,m?f:this,o)});else var x=(A=n,E=1&e,T=hn(w=t),function t(){return(this&&this!==Cs&&this instanceof t?T:w).apply(E?A:this,arguments)});return si((S?Ie:ri)(x,C),t,e)}function xn(t,e,n,i){return t===na||gr(t,d[n])&&!S.call(i,n)?e:t}function In(t,e,n,i,r,o){return Or(t)&&Or(e)&&(o.set(e,t),ge(t,e,na,In,o),o.delete(e)),t}function Nn(t){return kr(t)?na:t}function On(t,e,n,i,r,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&s<u))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,d=!0,h=2&n?new At:na;for(o.set(t,e),o.set(e,t);++c<s;){var f=t[c],p=e[c];if(i)var m=a?i(p,f,c,e,t,o):i(f,p,c,t,e,o);if(m!==na){if(m)continue;d=!1;break}if(h){if(!qs(e,function(t,e){if(!ou(h,e)&&(f===t||r(f,t,n,i,o)))return h.push(e)})){d=!1;break}}else if(f!==p&&!r(f,p,n,i,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Dn(t){return ai(ei(t,na,wi),t+"")}function Rn(t){return Jt(t,so,Vn)}function Ln(t){return Jt(t,uo,Hn)}var kn=rt?function(t){return rt.get(t)}:Fo;function Mn(t){for(var e=t.name+"",n=ot[e],i=S.call(ot,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Pn(t){return(S.call(pt,"placeholder")?pt:t).placeholder}function Bn(){var t=pt.iteratee||Mo;return t=t===Mo?le:t,arguments.length?t(arguments[0],arguments[1]):t}function jn(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Fn(t){for(var e=so(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Zn(r)]}return e}function Un(t,e){var n,i,r=(i=e,null==(n=t)?na:n[i]);return ue(r)?r:na}var Vn=V?function(e){return null==e?[]:(e=T(e),Fs(V(e),function(t){return O.call(e,t)}))}:qo,Hn=V?function(t){for(var e=[];t;)Ws(e,Vn(t)),t=C(t);return e}:qo,Wn=Zt;function zn(t,e,n){for(var i=-1,r=(e=Ye(e,t)).length,o=!1;++i<r;){var a=fi(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Nr(r)&&Yn(a,r)&&(br(t)||yr(t))}function Gn(t){return"function"!=typeof t.constructor||Jn(t)?{}:mt(C(t))}function qn(t){return br(t)||yr(t)||!!(R&&t&&t[R])}function Yn(t,e){var n=typeof t;return!!(e=null==e?aa:e)&&("number"==n||"symbol"!=n&&hs.test(t))&&-1<t&&t%1==0&&t<e}function Xn(t,e,n){if(!Or(n))return!1;var i=typeof e;return!!("number"==i?Ar(n)&&Yn(e,n.length):"string"==i&&e in n)&&gr(n[e],t)}function Kn(t,e){if(br(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!jr(t))||Xa.test(t)||!Ya.test(t)||null!=e&&t in T(e)}function $n(t){var e=Mn(t),n=pt[e];if("function"!=typeof n||!(e in _t.prototype))return!1;if(t===n)return!0;var i=kn(n);return!!i&&t===i[0]}(J&&Wn(new J(new ArrayBuffer(1)))!=xa||Z&&Wn(new Z)!=va||tt&&Wn(tt.resolve())!=ba||et&&Wn(new et)!=Aa||nt&&Wn(new nt)!=Sa)&&(Wn=function(t){var e=Zt(t),n=e==ya?t.constructor:na,i=n?pi(n):"";if(i)switch(i){case at:return xa;case st:return va;case ut:return ba;case lt:return Aa;case ct:return Sa}return e});var Qn=u?xr:Yo;function Jn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||d)}function Zn(t){return t==t&&!Or(t)}function ti(e,n){return function(t){return null!=t&&t[e]===n&&(n!==na||e in T(t))}}function ei(o,a,s){return a=q(a===na?o.length-1:a,0),function(){for(var t=arguments,e=-1,n=q(t.length-a,0),i=I(n);++e<n;)i[e]=t[a+e];e=-1;for(var r=I(a+1);++e<a;)r[e]=t[e];return r[a]=s(i),ks(o,this,r)}}function ni(t,e){return e.length<2?t:Qt(t,De(e,0,-1))}function ii(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ri=ui(Ie),oi=j||function(t,e){return Cs.setTimeout(t,e)},ai=ui(Ne);function si(t,e,n){var i,r,o,a=e+"";return ai(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(1<n?"& ":"")+e[i],e=e.join(2<n?", ":" "),t.replace(es,"{\n/* [wrapped with "+e+"] */\n")}(a,(o=a.match(ns),i=o?o[1].split(is):[],r=n,Ps(la,function(t){var e="_."+t[0];r&t[1]&&!Us(i,e)&&i.push(e)}),i.sort())))}function ui(n){var i=0,r=0;return function(){var t=X(),e=16-(t-r);if(r=t,0<e){if(800<=++i)return arguments[0]}else i=0;return n.apply(na,arguments)}}function li(t,e){var n=-1,i=t.length,r=i-1;for(e=e===na?i:e;++n<e;){var o=Ae(n,r),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var ci,di,hi=(di=(ci=cr(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Ka,function(t,e,n,i){r.push(n?i.replace(os,"$1"):e||t)}),r},function(t){return 500===di.size&&di.clear(),t})).cache,ci);function fi(t){if("string"==typeof t||jr(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pi(t){if(null!=t){try{return l.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function mi(t){if(t instanceof _t)return t.clone();var e=new vt(t.__wrapped__,t.__chain__);return e.__actions__=rn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var gi=Te(function(t,e){return Er(t)?Ft(t,Gt(e,1,Er,!0)):[]}),vi=Te(function(t,e){var n=Ci(e);return Er(n)&&(n=na),Er(t)?Ft(t,Gt(e,1,Er,!0),Bn(n,2)):[]}),_i=Te(function(t,e){var n=Ci(e);return Er(n)&&(n=na),Er(t)?Ft(t,Gt(e,1,Er,!0),na,n):[]});function yi(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:zr(n);return r<0&&(r=q(i+r,0)),Xs(t,Bn(e,3),r)}function bi(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==na&&(r=zr(n),r=n<0?q(i+r,0):Y(r,i-1)),Xs(t,Bn(e,3),r,!0)}function wi(t){return null!=t&&t.length?Gt(t,1):[]}function Ai(t){return t&&t.length?t[0]:na}var Ei=Te(function(t){var e=Hs(t,Ge);return e.length&&e[0]===t[0]?ie(e):[]}),Ti=Te(function(t){var e=Ci(t),n=Hs(t,Ge);return e===Ci(n)?e=na:n.pop(),n.length&&n[0]===t[0]?ie(n,Bn(e,2)):[]}),Si=Te(function(t){var e=Ci(t),n=Hs(t,Ge);return(e="function"==typeof e?e:na)&&n.pop(),n.length&&n[0]===t[0]?ie(n,na,e):[]});function Ci(t){var e=null==t?0:t.length;return e?t[e-1]:na}var xi=Te(Ii);function Ii(t,e){return t&&t.length&&e&&e.length?be(t,e):t}var Ni=Dn(function(t,e){var n=null==t?0:t.length,i=kt(t,e);return we(t,Hs(e,function(t){return Yn(t,n)?+t:t}).sort(tn)),i});function Oi(t){return null==t?t:Q.call(t)}var Di=Te(function(t){return je(Gt(t,1,Er,!0))}),Ri=Te(function(t){var e=Ci(t);return Er(e)&&(e=na),je(Gt(t,1,Er,!0),Bn(e,2))}),Li=Te(function(t){var e=Ci(t);return e="function"==typeof e?e:na,je(Gt(t,1,Er,!0),na,e)});function ki(e){if(!e||!e.length)return[];var n=0;return e=Fs(e,function(t){if(Er(t))return n=q(t.length,n),!0}),nu(n,function(t){return Hs(e,Zs(t))})}function Mi(t,e){if(!t||!t.length)return[];var n=ki(t);return null==e?n:Hs(n,function(t){return ks(e,na,t)})}var Pi=Te(function(t,e){return Er(t)?Ft(t,e):[]}),Bi=Te(function(t){return We(Fs(t,Er))}),ji=Te(function(t){var e=Ci(t);return Er(e)&&(e=na),We(Fs(t,Er),Bn(e,2))}),Fi=Te(function(t){var e=Ci(t);return e="function"==typeof e?e:na,We(Fs(t,Er),na,e)}),Ui=Te(ki);var Vi=Te(function(t){var e=t.length,n=1<e?t[e-1]:na;return Mi(t,n="function"==typeof n?(t.pop(),n):na)});function Hi(t){var e=pt(t);return e.__chain__=!0,e}function Wi(t,e){return e(t)}var zi=Dn(function(e){var n=e.length,t=n?e[0]:0,i=this.__wrapped__,r=function(t){return kt(t,e)};return!(1<n||this.__actions__.length)&&i instanceof _t&&Yn(t)?((i=i.slice(t,+t+(n?1:0))).__actions__.push({func:Wi,args:[r],thisArg:na}),new vt(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(na),t})):this.thru(r)});var Gi=an(function(t,e,n){S.call(t,n)?++t[n]:Lt(t,n,1)});var qi=fn(yi),Yi=fn(bi);function Xi(t,e){return(br(t)?Ps:Ut)(t,Bn(e,3))}function Ki(t,e){return(br(t)?Bs:Vt)(t,Bn(e,3))}var $i=an(function(t,e,n){S.call(t,n)?t[n].push(e):Lt(t,n,[e])});var Qi=Te(function(t,e,n){var i=-1,r="function"==typeof e,o=Ar(t)?I(t.length):[];return Ut(t,function(t){o[++i]=r?ks(e,t,n):re(t,e,n)}),o}),Ji=an(function(t,e,n){Lt(t,n,e)});function Zi(t,e){return(br(t)?Hs:fe)(t,Bn(e,3))}var tr=an(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var er=Te(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Xn(t,e[0],e[1])?e=[]:2<n&&Xn(e[0],e[1],e[2])&&(e=[e[0]]),_e(t,Gt(e,1),[])}),nr=B||function(){return Cs.Date.now()};function ir(t,e,n){return e=n?na:e,e=t&&null==e?t.length:e,Cn(t,128,na,na,na,na,e)}function rr(t,e){var n;if("function"!=typeof e)throw new N(ia);return t=zr(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=na),n}}var or=Te(function(t,e,n){var i=1;if(n.length){var r=pu(n,Pn(or));i|=32}return Cn(t,i,e,n,r)}),ar=Te(function(t,e,n){var i=3;if(n.length){var r=pu(n,Pn(ar));i|=32}return Cn(e,i,t,n,r)});function sr(i,r,t){var o,a,s,u,l,c,d=0,h=!1,f=!1,e=!0;if("function"!=typeof i)throw new N(ia);function p(t){var e=o,n=a;return o=a=na,d=t,u=i.apply(n,e)}function m(t){var e=t-c;return c===na||r<=e||e<0||f&&s<=t-d}function g(){var t,e,n=nr();if(m(n))return v(n);l=oi(g,(e=r-((t=n)-c),f?Y(e,s-(t-d)):e))}function v(t){return l=na,e&&o?p(t):(o=a=na,u)}function n(){var t,e=nr(),n=m(e);if(o=arguments,a=this,c=e,n){if(l===na)return d=t=c,l=oi(g,r),h?p(t):u;if(f)return $e(l),l=oi(g,r),p(c)}return l===na&&(l=oi(g,r)),u}return r=qr(r)||0,Or(t)&&(h=!!t.leading,s=(f="maxWait"in t)?q(qr(t.maxWait)||0,r):s,e="trailing"in t?!!t.trailing:e),n.cancel=function(){l!==na&&$e(l),d=0,o=c=a=l=na},n.flush=function(){return l===na?u:v(nr())},n}var ur=Te(function(t,e){return jt(t,1,e)}),lr=Te(function(t,e,n){return jt(t,qr(e)||0,n)});function cr(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new N(ia);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var i=r.apply(this,t);return a.cache=n.set(e,i)||n,i};return a.cache=new(cr.Cache||wt),a}function dr(e){if("function"!=typeof e)throw new N(ia);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}cr.Cache=wt;var hr=Xe(function(i,r){var o=(r=1==r.length&&br(r[0])?Hs(r[0],iu(Bn())):Hs(Gt(r,1),iu(Bn()))).length;return Te(function(t){for(var e=-1,n=Y(t.length,o);++e<n;)t[e]=r[e].call(this,t[e]);return ks(i,this,t)})}),fr=Te(function(t,e){var n=pu(e,Pn(fr));return Cn(t,32,na,e,n)}),pr=Te(function(t,e){var n=pu(e,Pn(pr));return Cn(t,64,na,e,n)}),mr=Dn(function(t,e){return Cn(t,256,na,na,na,e)});function gr(t,e){return t===e||t!=t&&e!=e}var vr=wn(te),_r=wn(function(t,e){return e<=t}),yr=oe(function(){return arguments}())?oe:function(t){return Dr(t)&&S.call(t,"callee")&&!O.call(t,"callee")},br=I.isArray,wr=Is?iu(Is):function(t){return Dr(t)&&Zt(t)==Ca};function Ar(t){return null!=t&&Nr(t.length)&&!xr(t)}function Er(t){return Dr(t)&&Ar(t)}var Tr=H||Yo,Sr=Ns?iu(Ns):function(t){return Dr(t)&&Zt(t)==fa};function Cr(t){if(!Dr(t))return!1;var e=Zt(t);return e==pa||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!kr(t)}function xr(t){if(!Or(t))return!1;var e=Zt(t);return e==ma||e==ga||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ir(t){return"number"==typeof t&&t==zr(t)}function Nr(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=aa}function Or(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Dr(t){return null!=t&&"object"==typeof t}var Rr=Os?iu(Os):function(t){return Dr(t)&&Wn(t)==va};function Lr(t){return"number"==typeof t||Dr(t)&&Zt(t)==_a}function kr(t){if(!Dr(t)||Zt(t)!=ya)return!1;var e=C(t);if(null===e)return!0;var n=S.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==m}var Mr=Ds?iu(Ds):function(t){return Dr(t)&&Zt(t)==wa};var Pr=Rs?iu(Rs):function(t){return Dr(t)&&Wn(t)==Aa};function Br(t){return"string"==typeof t||!br(t)&&Dr(t)&&Zt(t)==Ea}function jr(t){return"symbol"==typeof t||Dr(t)&&Zt(t)==Ta}var Fr=Ls?iu(Ls):function(t){return Dr(t)&&Nr(t.length)&&!!As[Zt(t)]};var Ur=wn(he),Vr=wn(function(t,e){return t<=e});function Hr(t){if(!t)return[];if(Ar(t))return Br(t)?vu(t):rn(t);if(L&&t[L])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[L]());var e=Wn(t);return(e==va?hu:e==Aa?mu:vo)(t)}function Wr(t){return t?(t=qr(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function zr(t){var e=Wr(t),n=e%1;return e==e?n?e-n:e:0}function Gr(t){return t?Mt(zr(t),0,ua):0}function qr(t){if("number"==typeof t)return t;if(jr(t))return sa;if(Or(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Or(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ja,"");var n=ls.test(t);return n||ds.test(t)?Ss(t.slice(2),n?2:8):us.test(t)?sa:+t}function Yr(t){return on(t,uo(t))}function Xr(t){return null==t?"":Be(t)}var Kr=sn(function(t,e){if(Jn(e)||Ar(e))on(e,so(e),t);else for(var n in e)S.call(e,n)&&Nt(t,n,e[n])}),$r=sn(function(t,e){on(e,uo(e),t)}),Qr=sn(function(t,e,n,i){on(e,uo(e),t,i)}),Jr=sn(function(t,e,n,i){on(e,so(e),t,i)}),Zr=Dn(kt);var to=Te(function(t,e){t=T(t);var n=-1,i=e.length,r=2<i?e[2]:na;for(r&&Xn(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],a=uo(o),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(c===na||gr(c,d[l])&&!S.call(t,l))&&(t[l]=o[l])}return t}),eo=Te(function(t){return t.push(na,In),ks(co,na,t)});function no(t,e,n){var i=null==t?na:Qt(t,e);return i===na?n:i}function io(t,e){return null!=t&&zn(t,e,ne)}var ro=gn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),t[e]=n},Do(ko)),oo=gn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),S.call(t,e)?t[e].push(n):t[e]=[n]},Bn),ao=Te(re);function so(t){return Ar(t)?Tt(t):ce(t)}function uo(t){return Ar(t)?Tt(t,!0):de(t)}var lo=sn(function(t,e,n){ge(t,e,n)}),co=sn(function(t,e,n,i){ge(t,e,n,i)}),ho=Dn(function(e,t){var n={};if(null==e)return n;var i=!1;t=Hs(t,function(t){return t=Ye(t,e),i||(i=1<t.length),t}),on(e,Ln(e),n),i&&(n=Pt(n,7,Nn));for(var r=t.length;r--;)Fe(n,t[r]);return n});var fo=Dn(function(t,e){return null==t?{}:ye(n=t,e,function(t,e){return io(n,e)});var n});function po(t,n){if(null==t)return{};var e=Hs(Ln(t),function(t){return[t]});return n=Bn(n),ye(t,e,function(t,e){return n(t,e[0])})}var mo=Sn(so),go=Sn(uo);function vo(t){return null==t?[]:ru(t,so(t))}var _o=dn(function(t,e,n){return e=e.toLowerCase(),t+(n?yo(e):e)});function yo(t){return xo(Xr(t).toLowerCase())}function bo(t){return(t=Xr(t))&&t.replace(fs,uu).replace(vs,"")}var wo=dn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ao=dn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Eo=cn("toLowerCase");var To=dn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var So=dn(function(t,e,n){return t+(n?" ":"")+xo(e)});var Co=dn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),xo=cn("toUpperCase");function Io(t,e,n){return t=Xr(t),(e=n?na:e)===na?(i=t,ys.test(i)?t.match(_s)||[]:t.match(rs)||[]):t.match(e)||[];var i}var No=Te(function(t,e){try{return ks(t,na,e)}catch(t){return Cr(t)?t:new r(t)}}),Oo=Dn(function(e,t){return Ps(t,function(t){t=fi(t),Lt(e,t,or(e[t],e))}),e});function Do(t){return function(){return t}}var Ro=pn(),Lo=pn(!0);function ko(t){return t}function Mo(t){return le("function"==typeof t?t:Pt(t,1))}var Po=Te(function(e,n){return function(t){return re(t,e,n)}}),Bo=Te(function(e,n){return function(t){return re(e,t,n)}});function jo(i,e,t){var n=so(e),r=$t(e,n);null!=t||Or(e)&&(r.length||!n.length)||(t=e,e=i,i=this,r=$t(e,so(e)));var o=!(Or(t)&&"chain"in t&&!t.chain),a=xr(i);return Ps(r,function(t){var n=e[t];i[t]=n,a&&(i.prototype[t]=function(){var t=this.__chain__;if(o||t){var e=i(this.__wrapped__);return(e.__actions__=rn(this.__actions__)).push({func:n,args:arguments,thisArg:i}),e.__chain__=t,e}return n.apply(i,Ws([this.value()],arguments))})}),i}function Fo(){}var Uo=_n(Hs),Vo=_n(js),Ho=_n(qs);function Wo(t){return Kn(t)?Zs(fi(t)):(e=t,function(t){return Qt(t,e)});var e}var zo=bn(),Go=bn(!0);function qo(){return[]}function Yo(){return!1}var Xo=vn(function(t,e){return t+e},0),Ko=En("ceil"),$o=vn(function(t,e){return t/e},1),Qo=En("floor");var Jo,Zo=vn(function(t,e){return t*e},1),ta=En("round"),ea=vn(function(t,e){return t-e},0);return pt.after=function(t,e){if("function"!=typeof e)throw new N(ia);return t=zr(t),function(){if(--t<1)return e.apply(this,arguments)}},pt.ary=ir,pt.assign=Kr,pt.assignIn=$r,pt.assignInWith=Qr,pt.assignWith=Jr,pt.at=Zr,pt.before=rr,pt.bind=or,pt.bindAll=Oo,pt.bindKey=ar,pt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return br(t)?t:[t]},pt.chain=Hi,pt.chunk=function(t,e,n){e=(n?Xn(t,e,n):e===na)?1:q(zr(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,o=0,a=I(F(i/e));r<i;)a[o++]=De(t,r,r+=e);return a},pt.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},pt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=I(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ws(br(n)?rn(n):[n],Gt(e,1))},pt.cond=function(i){var r=null==i?0:i.length,e=Bn();return i=r?Hs(i,function(t){if("function"!=typeof t[1])throw new N(ia);return[e(t[0]),t[1]]}):[],Te(function(t){for(var e=-1;++e<r;){var n=i[e];if(ks(n[0],this,t))return ks(n[1],this,t)}})},pt.conforms=function(t){return e=Pt(t,1),n=so(e),function(t){return Bt(t,e,n)};var e,n},pt.constant=Do,pt.countBy=Gi,pt.create=function(t,e){var n=mt(t);return null==e?n:Rt(n,e)},pt.curry=function t(e,n,i){var r=Cn(e,8,na,na,na,na,na,n=i?na:n);return r.placeholder=t.placeholder,r},pt.curryRight=function t(e,n,i){var r=Cn(e,16,na,na,na,na,na,n=i?na:n);return r.placeholder=t.placeholder,r},pt.debounce=sr,pt.defaults=to,pt.defaultsDeep=eo,pt.defer=ur,pt.delay=lr,pt.difference=gi,pt.differenceBy=vi,pt.differenceWith=_i,pt.drop=function(t,e,n){var i=null==t?0:t.length;return i?De(t,(e=n||e===na?1:zr(e))<0?0:e,i):[]},pt.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?De(t,0,(e=i-(e=n||e===na?1:zr(e)))<0?0:e):[]},pt.dropRightWhile=function(t,e){return t&&t.length?Ve(t,Bn(e,3),!0,!0):[]},pt.dropWhile=function(t,e){return t&&t.length?Ve(t,Bn(e,3),!0):[]},pt.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Xn(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=zr(n))<0&&(n=r<-n?0:r+n),(i=i===na||r<i?r:zr(i))<0&&(i+=r),i=i<n?0:Gr(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},pt.filter=function(t,e){return(br(t)?Fs:zt)(t,Bn(e,3))},pt.flatMap=function(t,e){return Gt(Zi(t,e),1)},pt.flatMapDeep=function(t,e){return Gt(Zi(t,e),1/0)},pt.flatMapDepth=function(t,e,n){return n=n===na?1:zr(n),Gt(Zi(t,e),n)},pt.flatten=wi,pt.flattenDeep=function(t){return null!=t&&t.length?Gt(t,1/0):[]},pt.flattenDepth=function(t,e){return null!=t&&t.length?Gt(t,e=e===na?1:zr(e)):[]},pt.flip=function(t){return Cn(t,512)},pt.flow=Ro,pt.flowRight=Lo,pt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},pt.functions=function(t){return null==t?[]:$t(t,so(t))},pt.functionsIn=function(t){return null==t?[]:$t(t,uo(t))},pt.groupBy=$i,pt.initial=function(t){return null!=t&&t.length?De(t,0,-1):[]},pt.intersection=Ei,pt.intersectionBy=Ti,pt.intersectionWith=Si,pt.invert=ro,pt.invertBy=oo,pt.invokeMap=Qi,pt.iteratee=Mo,pt.keyBy=Ji,pt.keys=so,pt.keysIn=uo,pt.map=Zi,pt.mapKeys=function(t,i){var r={};return i=Bn(i,3),Xt(t,function(t,e,n){Lt(r,i(t,e,n),t)}),r},pt.mapValues=function(t,i){var r={};return i=Bn(i,3),Xt(t,function(t,e,n){Lt(r,e,i(t,e,n))}),r},pt.matches=function(t){return pe(Pt(t,1))},pt.matchesProperty=function(t,e){return me(t,Pt(e,1))},pt.memoize=cr,pt.merge=lo,pt.mergeWith=co,pt.method=Po,pt.methodOf=Bo,pt.mixin=jo,pt.negate=dr,pt.nthArg=function(e){return e=zr(e),Te(function(t){return ve(t,e)})},pt.omit=ho,pt.omitBy=function(t,e){return po(t,dr(Bn(e)))},pt.once=function(t){return rr(2,t)},pt.orderBy=function(t,e,n,i){return null==t?[]:(br(e)||(e=null==e?[]:[e]),br(n=i?na:n)||(n=null==n?[]:[n]),_e(t,e,n))},pt.over=Uo,pt.overArgs=hr,pt.overEvery=Vo,pt.overSome=Ho,pt.partial=fr,pt.partialRight=pr,pt.partition=tr,pt.pick=fo,pt.pickBy=po,pt.property=Wo,pt.propertyOf=function(e){return function(t){return null==e?na:Qt(e,t)}},pt.pull=xi,pt.pullAll=Ii,pt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?be(t,e,Bn(n,2)):t},pt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?be(t,e,na,n):t},pt.pullAt=Ni,pt.range=zo,pt.rangeRight=Go,pt.rearg=mr,pt.reject=function(t,e){return(br(t)?Fs:zt)(t,dr(Bn(e,3)))},pt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Bn(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return we(t,r),n},pt.rest=function(t,e){if("function"!=typeof t)throw new N(ia);return Te(t,e=e===na?e:zr(e))},pt.reverse=Oi,pt.sampleSize=function(t,e,n){return e=(n?Xn(t,e,n):e===na)?1:zr(e),(br(t)?Ct:Ce)(t,e)},pt.set=function(t,e,n){return null==t?t:xe(t,e,n)},pt.setWith=function(t,e,n,i){return i="function"==typeof i?i:na,null==t?t:xe(t,e,n,i)},pt.shuffle=function(t){return(br(t)?xt:Oe)(t)},pt.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Xn(t,e,n)?(e=0,n=i):(e=null==e?0:zr(e),n=n===na?i:zr(n)),De(t,e,n)):[]},pt.sortBy=er,pt.sortedUniq=function(t){return t&&t.length?Me(t):[]},pt.sortedUniqBy=function(t,e){return t&&t.length?Me(t,Bn(e,2)):[]},pt.split=function(t,e,n){return n&&"number"!=typeof n&&Xn(t,e,n)&&(e=n=na),(n=n===na?ua:n>>>0)?(t=Xr(t))&&("string"==typeof e||null!=e&&!Mr(e))&&!(e=Be(e))&&du(t)?Ke(vu(t),0,n):t.split(e,n):[]},pt.spread=function(i,r){if("function"!=typeof i)throw new N(ia);return r=null==r?0:q(zr(r),0),Te(function(t){var e=t[r],n=Ke(t,0,r);return e&&Ws(n,e),ks(i,this,n)})},pt.tail=function(t){var e=null==t?0:t.length;return e?De(t,1,e):[]},pt.take=function(t,e,n){return t&&t.length?De(t,0,(e=n||e===na?1:zr(e))<0?0:e):[]},pt.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?De(t,(e=i-(e=n||e===na?1:zr(e)))<0?0:e,i):[]},pt.takeRightWhile=function(t,e){return t&&t.length?Ve(t,Bn(e,3),!1,!0):[]},pt.takeWhile=function(t,e){return t&&t.length?Ve(t,Bn(e,3)):[]},pt.tap=function(t,e){return e(t),t},pt.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new N(ia);return Or(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),sr(t,e,{leading:i,maxWait:e,trailing:r})},pt.thru=Wi,pt.toArray=Hr,pt.toPairs=mo,pt.toPairsIn=go,pt.toPath=function(t){return br(t)?Hs(t,fi):jr(t)?[t]:rn(hi(Xr(t)))},pt.toPlainObject=Yr,pt.transform=function(t,i,r){var e=br(t),n=e||Tr(t)||Fr(t);if(i=Bn(i,4),null==r){var o=t&&t.constructor;r=n?e?new o:[]:Or(t)&&xr(o)?mt(C(t)):{}}return(n?Ps:Xt)(t,function(t,e,n){return i(r,t,e,n)}),r},pt.unary=function(t){return ir(t,1)},pt.union=Di,pt.unionBy=Ri,pt.unionWith=Li,pt.uniq=function(t){return t&&t.length?je(t):[]},pt.uniqBy=function(t,e){return t&&t.length?je(t,Bn(e,2)):[]},pt.uniqWith=function(t,e){return e="function"==typeof e?e:na,t&&t.length?je(t,na,e):[]},pt.unset=function(t,e){return null==t||Fe(t,e)},pt.unzip=ki,pt.unzipWith=Mi,pt.update=function(t,e,n){return null==t?t:Ue(t,e,qe(n))},pt.updateWith=function(t,e,n,i){return i="function"==typeof i?i:na,null==t?t:Ue(t,e,qe(n),i)},pt.values=vo,pt.valuesIn=function(t){return null==t?[]:ru(t,uo(t))},pt.without=Pi,pt.words=Io,pt.wrap=function(t,e){return fr(qe(e),t)},pt.xor=Bi,pt.xorBy=ji,pt.xorWith=Fi,pt.zip=Ui,pt.zipObject=function(t,e){return ze(t||[],e||[],Nt)},pt.zipObjectDeep=function(t,e){return ze(t||[],e||[],xe)},pt.zipWith=Vi,pt.entries=mo,pt.entriesIn=go,pt.extend=$r,pt.extendWith=Qr,jo(pt,pt),pt.add=Xo,pt.attempt=No,pt.camelCase=_o,pt.capitalize=yo,pt.ceil=Ko,pt.clamp=function(t,e,n){return n===na&&(n=e,e=na),n!==na&&(n=(n=qr(n))==n?n:0),e!==na&&(e=(e=qr(e))==e?e:0),Mt(qr(t),e,n)},pt.clone=function(t){return Pt(t,4)},pt.cloneDeep=function(t){return Pt(t,5)},pt.cloneDeepWith=function(t,e){return Pt(t,5,e="function"==typeof e?e:na)},pt.cloneWith=function(t,e){return Pt(t,4,e="function"==typeof e?e:na)},pt.conformsTo=function(t,e){return null==e||Bt(t,e,so(e))},pt.deburr=bo,pt.defaultTo=function(t,e){return null==t||t!=t?e:t},pt.divide=$o,pt.endsWith=function(t,e,n){t=Xr(t),e=Be(e);var i=t.length,r=n=n===na?i:Mt(zr(n),0,i);return 0<=(n-=e.length)&&t.slice(n,r)==e},pt.eq=gr,pt.escape=function(t){return(t=Xr(t))&&Wa.test(t)?t.replace(Va,lu):t},pt.escapeRegExp=function(t){return(t=Xr(t))&&Qa.test(t)?t.replace($a,"\\$&"):t},pt.every=function(t,e,n){var i=br(t)?js:Ht;return n&&Xn(t,e,n)&&(e=na),i(t,Bn(e,3))},pt.find=qi,pt.findIndex=yi,pt.findKey=function(t,e){return Ys(t,Bn(e,3),Xt)},pt.findLast=Yi,pt.findLastIndex=bi,pt.findLastKey=function(t,e){return Ys(t,Bn(e,3),Kt)},pt.floor=Qo,pt.forEach=Xi,pt.forEachRight=Ki,pt.forIn=function(t,e){return null==t?t:qt(t,Bn(e,3),uo)},pt.forInRight=function(t,e){return null==t?t:Yt(t,Bn(e,3),uo)},pt.forOwn=function(t,e){return t&&Xt(t,Bn(e,3))},pt.forOwnRight=function(t,e){return t&&Kt(t,Bn(e,3))},pt.get=no,pt.gt=vr,pt.gte=_r,pt.has=function(t,e){return null!=t&&zn(t,e,ee)},pt.hasIn=io,pt.head=Ai,pt.identity=ko,pt.includes=function(t,e,n,i){t=Ar(t)?t:vo(t),n=n&&!i?zr(n):0;var r=t.length;return n<0&&(n=q(r+n,0)),Br(t)?n<=r&&-1<t.indexOf(e,n):!!r&&-1<Ks(t,e,n)},pt.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:zr(n);return r<0&&(r=q(i+r,0)),Ks(t,e,r)},pt.inRange=function(t,e,n){return e=Wr(e),n===na?(n=e,e=0):n=Wr(n),t=qr(t),(i=t)>=Y(r=e,o=n)&&i<q(r,o);var i,r,o},pt.invoke=ao,pt.isArguments=yr,pt.isArray=br,pt.isArrayBuffer=wr,pt.isArrayLike=Ar,pt.isArrayLikeObject=Er,pt.isBoolean=function(t){return!0===t||!1===t||Dr(t)&&Zt(t)==ha},pt.isBuffer=Tr,pt.isDate=Sr,pt.isElement=function(t){return Dr(t)&&1===t.nodeType&&!kr(t)},pt.isEmpty=function(t){if(null==t)return!0;if(Ar(t)&&(br(t)||"string"==typeof t||"function"==typeof t.splice||Tr(t)||Fr(t)||yr(t)))return!t.length;var e=Wn(t);if(e==va||e==Aa)return!t.size;if(Jn(t))return!ce(t).length;for(var n in t)if(S.call(t,n))return!1;return!0},pt.isEqual=function(t,e){return ae(t,e)},pt.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:na)?n(t,e):na;return i===na?ae(t,e,na,n):!!i},pt.isError=Cr,pt.isFinite=function(t){return"number"==typeof t&&W(t)},pt.isFunction=xr,pt.isInteger=Ir,pt.isLength=Nr,pt.isMap=Rr,pt.isMatch=function(t,e){return t===e||se(t,e,Fn(e))},pt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:na,se(t,e,Fn(e),n)},pt.isNaN=function(t){return Lr(t)&&t!=+t},pt.isNative=function(t){if(Qn(t))throw new r("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ue(t)},pt.isNil=function(t){return null==t},pt.isNull=function(t){return null===t},pt.isNumber=Lr,pt.isObject=Or,pt.isObjectLike=Dr,pt.isPlainObject=kr,pt.isRegExp=Mr,pt.isSafeInteger=function(t){return Ir(t)&&-aa<=t&&t<=aa},pt.isSet=Pr,pt.isString=Br,pt.isSymbol=jr,pt.isTypedArray=Fr,pt.isUndefined=function(t){return t===na},pt.isWeakMap=function(t){return Dr(t)&&Wn(t)==Sa},pt.isWeakSet=function(t){return Dr(t)&&"[object WeakSet]"==Zt(t)},pt.join=function(t,e){return null==t?"":z.call(t,e)},pt.kebabCase=wo,pt.last=Ci,pt.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==na&&(r=(r=zr(n))<0?q(i+r,0):Y(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):Xs(t,Qs,r,!0)},pt.lowerCase=Ao,pt.lowerFirst=Eo,pt.lt=Ur,pt.lte=Vr,pt.max=function(t){return t&&t.length?Wt(t,ko,te):na},pt.maxBy=function(t,e){return t&&t.length?Wt(t,Bn(e,2),te):na},pt.mean=function(t){return Js(t,ko)},pt.meanBy=function(t,e){return Js(t,Bn(e,2))},pt.min=function(t){return t&&t.length?Wt(t,ko,he):na},pt.minBy=function(t,e){return t&&t.length?Wt(t,Bn(e,2),he):na},pt.stubArray=qo,pt.stubFalse=Yo,pt.stubObject=function(){return{}},pt.stubString=function(){return""},pt.stubTrue=function(){return!0},pt.multiply=Zo,pt.nth=function(t,e){return t&&t.length?ve(t,zr(e)):na},pt.noConflict=function(){return Cs._===this&&(Cs._=_),this},pt.noop=Fo,pt.now=nr,pt.pad=function(t,e,n){t=Xr(t);var i=(e=zr(e))?gu(t):0;if(!e||e<=i)return t;var r=(e-i)/2;return yn(U(r),n)+t+yn(F(r),n)},pt.padEnd=function(t,e,n){t=Xr(t);var i=(e=zr(e))?gu(t):0;return e&&i<e?t+yn(e-i,n):t},pt.padStart=function(t,e,n){t=Xr(t);var i=(e=zr(e))?gu(t):0;return e&&i<e?yn(e-i,n)+t:t},pt.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),K(Xr(t).replace(Za,""),e||0)},pt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Xn(t,e,n)&&(e=n=na),n===na&&("boolean"==typeof e?(n=e,e=na):"boolean"==typeof t&&(n=t,t=na)),t===na&&e===na?(t=0,e=1):(t=Wr(t),e===na?(e=t,t=0):e=Wr(e)),e<t){var i=t;t=e,e=i}if(n||t%1||e%1){var r=$();return Y(t+r*(e-t+Ts("1e-"+((r+"").length-1))),e)}return Ae(t,e)},pt.reduce=function(t,e,n){var i=br(t)?zs:tu,r=arguments.length<3;return i(t,Bn(e,4),n,r,Ut)},pt.reduceRight=function(t,e,n){var i=br(t)?Gs:tu,r=arguments.length<3;return i(t,Bn(e,4),n,r,Vt)},pt.repeat=function(t,e,n){return e=(n?Xn(t,e,n):e===na)?1:zr(e),Ee(Xr(t),e)},pt.replace=function(){var t=arguments,e=Xr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pt.result=function(t,e,n){var i=-1,r=(e=Ye(e,t)).length;for(r||(r=1,t=na);++i<r;){var o=null==t?na:t[fi(e[i])];o===na&&(i=r,o=n),t=xr(o)?o.call(t):o}return t},pt.round=ta,pt.runInContext=t,pt.sample=function(t){return(br(t)?St:Se)(t)},pt.size=function(t){if(null==t)return 0;if(Ar(t))return Br(t)?gu(t):t.length;var e=Wn(t);return e==va||e==Aa?t.size:ce(t).length},pt.snakeCase=To,pt.some=function(t,e,n){var i=br(t)?qs:Re;return n&&Xn(t,e,n)&&(e=na),i(t,Bn(e,3))},pt.sortedIndex=function(t,e){return Le(t,e)},pt.sortedIndexBy=function(t,e,n){return ke(t,e,Bn(n,2))},pt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Le(t,e);if(i<n&&gr(t[i],e))return i}return-1},pt.sortedLastIndex=function(t,e){return Le(t,e,!0)},pt.sortedLastIndexBy=function(t,e,n){return ke(t,e,Bn(n,2),!0)},pt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Le(t,e,!0)-1;if(gr(t[n],e))return n}return-1},pt.startCase=So,pt.startsWith=function(t,e,n){return t=Xr(t),n=null==n?0:Mt(zr(n),0,t.length),e=Be(e),t.slice(n,n+e.length)==e},pt.subtract=ea,pt.sum=function(t){return t&&t.length?eu(t,ko):0},pt.sumBy=function(t,e){return t&&t.length?eu(t,Bn(e,2)):0},pt.template=function(a,t,e){var n=pt.templateSettings;e&&Xn(a,t,e)&&(t=na),a=Xr(a),t=Qr({},t,n,xn);var s,u,i=Qr({},t.imports,n.imports,xn),r=so(i),o=ru(i,r),l=0,c=t.interpolate||ps,d="__p += '",h=v((t.escape||ps).source+"|"+c.source+"|"+(c===qa?as:ps).source+"|"+(t.evaluate||ps).source+"|$","g"),f="//# sourceURL="+(S.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++ws+"]")+"\n";a.replace(h,function(t,e,n,i,r,o){return n||(n=i),d+=a.slice(l,o).replace(ms,cu),e&&(s=!0,d+="' +\n__e("+e+") +\n'"),r&&(u=!0,d+="';\n"+r+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+t.length,t}),d+="';\n";var p=S.call(t,"variable")&&t.variable;p||(d="with (obj) {\n"+d+"\n}\n"),d=(u?d.replace(Ba,""):d).replace(ja,"$1").replace(Fa,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=No(function(){return g(r,f+"return "+d).apply(na,o)});if(m.source=d,Cr(m))throw m;return m},pt.times=function(t,e){if((t=zr(t))<1||aa<t)return[];var n=ua,i=Y(t,ua);e=Bn(e),t-=ua;for(var r=nu(i,e);++n<t;)e(n);return r},pt.toFinite=Wr,pt.toInteger=zr,pt.toLength=Gr,pt.toLower=function(t){return Xr(t).toLowerCase()},pt.toNumber=qr,pt.toSafeInteger=function(t){return t?Mt(zr(t),-aa,aa):0===t?t:0},pt.toString=Xr,pt.toUpper=function(t){return Xr(t).toUpperCase()},pt.trim=function(t,e,n){if((t=Xr(t))&&(n||e===na))return t.replace(Ja,"");if(!t||!(e=Be(e)))return t;var i=vu(t),r=vu(e);return Ke(i,au(i,r),su(i,r)+1).join("")},pt.trimEnd=function(t,e,n){if((t=Xr(t))&&(n||e===na))return t.replace(ts,"");if(!t||!(e=Be(e)))return t;var i=vu(t);return Ke(i,0,su(i,vu(e))+1).join("")},pt.trimStart=function(t,e,n){if((t=Xr(t))&&(n||e===na))return t.replace(Za,"");if(!t||!(e=Be(e)))return t;var i=vu(t);return Ke(i,au(i,vu(e))).join("")},pt.truncate=function(t,e){var n=30,i="...";if(Or(e)){var r="separator"in e?e.separator:r;n="length"in e?zr(e.length):n,i="omission"in e?Be(e.omission):i}var o=(t=Xr(t)).length;if(du(t)){var a=vu(t);o=a.length}if(o<=n)return t;var s=n-gu(i);if(s<1)return i;var u=a?Ke(a,0,s).join(""):t.slice(0,s);if(r===na)return u+i;if(a&&(s+=u.length-s),Mr(r)){if(t.slice(s).search(r)){var l,c=u;for(r.global||(r=v(r.source,Xr(ss.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var d=l.index;u=u.slice(0,d===na?s:d)}}else if(t.indexOf(Be(r),s)!=s){var h=u.lastIndexOf(r);-1<h&&(u=u.slice(0,h))}return u+i},pt.unescape=function(t){return(t=Xr(t))&&Ha.test(t)?t.replace(Ua,_u):t},pt.uniqueId=function(t){var e=++h;return Xr(t)+e},pt.upperCase=Co,pt.upperFirst=xo,pt.each=Xi,pt.eachRight=Ki,pt.first=Ai,jo(pt,(Jo={},Xt(pt,function(t,e){S.call(pt.prototype,e)||(Jo[e]=t)}),Jo),{chain:!1}),pt.VERSION="4.17.14",Ps(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pt[t].placeholder=pt}),Ps(["drop","take"],function(n,i){_t.prototype[n]=function(t){t=t===na?1:q(zr(t),0);var e=this.__filtered__&&!i?new _t(this):this.clone();return e.__filtered__?e.__takeCount__=Y(t,e.__takeCount__):e.__views__.push({size:Y(t,ua),type:n+(e.__dir__<0?"Right":"")}),e},_t.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Ps(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;_t.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Bn(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),Ps(["head","last"],function(t,e){var n="take"+(e?"Right":"");_t.prototype[t]=function(){return this[n](1).value()[0]}}),Ps(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_t.prototype[t]=function(){return this.__filtered__?new _t(this):this[n](1)}}),_t.prototype.compact=function(){return this.filter(ko)},_t.prototype.find=function(t){return this.filter(t).head()},_t.prototype.findLast=function(t){return this.reverse().find(t)},_t.prototype.invokeMap=Te(function(e,n){return"function"==typeof e?new _t(this):this.map(function(t){return re(t,e,n)})}),_t.prototype.reject=function(t){return this.filter(dr(Bn(t)))},_t.prototype.slice=function(t,e){t=zr(t);var n=this;return n.__filtered__&&(0<t||e<0)?new _t(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==na&&(n=(e=zr(e))<0?n.dropRight(-e):n.take(e-t)),n)},_t.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_t.prototype.toArray=function(){return this.take(ua)},Xt(_t.prototype,function(d,t){var h=/^(?:filter|find|map|reject)|While$/.test(t),f=/^(?:head|last)$/.test(t),p=pt[f?"take"+("last"==t?"Right":""):t],m=f||/^find/.test(t);p&&(pt.prototype[t]=function(){var t=this.__wrapped__,n=f?[1]:arguments,e=t instanceof _t,i=n[0],r=e||br(t),o=function(t){var e=p.apply(pt,Ws([t],n));return f&&a?e[0]:e};r&&h&&"function"==typeof i&&1!=i.length&&(e=r=!1);var a=this.__chain__,s=!!this.__actions__.length,u=m&&!a,l=e&&!s;if(!m&&r){t=l?t:new _t(this);var c=d.apply(t,n);return c.__actions__.push({func:Wi,args:[o],thisArg:na}),new vt(c,a)}return u&&l?d.apply(this,n):(c=this.thru(o),u?f?c.value()[0]:c.value():c)})}),Ps(["pop","push","shift","sort","splice","unshift"],function(t){var n=a[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pt.prototype[t]=function(){var e=arguments;if(r&&!this.__chain__){var t=this.value();return n.apply(br(t)?t:[],e)}return this[i](function(t){return n.apply(br(t)?t:[],e)})}}),Xt(_t.prototype,function(t,e){var n=pt[e];if(n){var i=n.name+"";S.call(ot,i)||(ot[i]=[]),ot[i].push({name:e,func:n})}}),ot[mn(na,2).name]=[{name:"wrapper",func:na}],_t.prototype.clone=function(){var t=new _t(this.__wrapped__);return t.__actions__=rn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rn(this.__views__),t},_t.prototype.reverse=function(){if(this.__filtered__){var t=new _t(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_t.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=br(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Y(e,t+a);break;case"takeRight":t=q(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,u=s-a,l=i?s:a-1,c=this.__iteratees__,d=c.length,h=0,f=Y(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return He(t,this.__actions__);var p=[];t:for(;u--&&h<f;){for(var m=-1,g=t[l+=e];++m<d;){var v=c[m],_=v.iteratee,y=v.type,b=_(g);if(2==y)g=b;else if(!b){if(1==y)continue t;break t}}p[h++]=g}return p},pt.prototype.at=zi,pt.prototype.chain=function(){return Hi(this)},pt.prototype.commit=function(){return new vt(this.value(),this.__chain__)},pt.prototype.next=function(){this.__values__===na&&(this.__values__=Hr(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?na:this.__values__[this.__index__++]}},pt.prototype.plant=function(t){for(var e,n=this;n instanceof gt;){var i=mi(n);i.__index__=0,i.__values__=na,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},pt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _t){var e=t;return this.__actions__.length&&(e=new _t(this)),(e=e.reverse()).__actions__.push({func:Wi,args:[Oi],thisArg:na}),new vt(e,this.__chain__)}return this.thru(Oi)},pt.prototype.toJSON=pt.prototype.valueOf=pt.prototype.value=function(){return He(this.__wrapped__,this.__actions__)},pt.prototype.first=pt.prototype.head,L&&(pt.prototype[L]=function(){return this}),pt}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Cs._=yu,define(function(){return yu})):k?((k.exports=yu)._=yu,L._=yu):Cs._=yu}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isResponsiveDisabled=n.getLastBreakPoint=n.constructCurrentSlotSizeMap=n.constructClientSideUrl=void 0;var u=t(54),l=function(t,r,o,a){var e=t.split(","),n=new Map;return e.filter(function(t){return t in r}).map(function(t){if(t in r){var e=r[t],n=s(o,e);if(a){var i=s(a,e);if(i===n||e[""+n]===e[""+i])return null}return[t,0<n?e[n.toString()]:0]}}).filter(function(t){return null!==t}).forEach(function(t){return n.set(t[0],t[1])}),n};n.constructCurrentSlotSizeMap=l;function s(e,t){var n=Object.keys(t).map(function(t){return parseInt(t,10)}).filter(function(t){return e<t}).sort(function(t,e){return t-e});return 0<n.length?n[0]:0}n.constructClientSideUrl=function(t,e,n,i,r){if(!u.isDefined(t)||""===t||!u.isDefined(e)||""===e||!u.isDefined(n)||0===Object.keys(n).length)return"";var o=u.isDefined(window)?window.innerWidth:375,a=l(e,n,o,i),s="";return a.forEach(function(t,e){c(e,r,o)||(s+=e+"="+t+",")}),s=s.replace(new RegExp(",$"),""),0<(s=0<(s=encodeURIComponent(s)).length?"&slotSizeMap="+s:"").length?""+t+s:""},n.getLastBreakPoint=s;var c=function(e,n,t){if(!(n&&e&&e in n&&t))return!1;var i=Object.keys(n[e]).map(function(t){return parseInt(t,10)}).sort(),r=u.find(i,function(t){return!n[e][t]})||0,o=u.find(i,function(t){return n[e][t]})||0;return r<t&&t<=o};n.isResponsiveDisabled=c},{54:54}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isDefined=n.find=void 0,n.find=function(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e(r))return r}},n.isDefined=function(t){return void 0!==t}},{}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.constructClientSideUrl=n.isDefined=void 0;var i=t(53);Object.defineProperty(n,"constructClientSideUrl",{enumerable:!0,get:function(){return i.constructClientSideUrl}});var r=t(54);Object.defineProperty(n,"isDefined",{enumerable:!0,get:function(){return r.isDefined}})},{53:53,54:54}],56:[function(t,e,n){"use strict";function i(t){document.location.hash.match("debug=1")&&void 0!==t&&console.error(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){if("consoleLog"in window&&"generic"in window&&"ad_utils"in window&&"custom"in window&&"monitoring"in window.generic&&"document_is_ready"in window.generic)try{t.call(this)}catch(t){void 0!==e&&(t.message=e+" "+t.message),window.ueLogError&&(t.attribution="Advertising",t.logLevel="ERROR",window.ueLogError(t)),i(t.message)}else i(e)}},{}],57:[function(t,e,n){"use strict";var i,r=t(56),o=(i=r)&&i.__esModule?i:{default:i};!function(){var t=setInterval(function(){return(0,o.default)(e,"No monitoring or document_is_ready object in generic")},50);function e(){window.jQuery&&(clearTimeout(t),window.jQuery(function(){window.generic.document_is_ready()}),window.generic.monitoring.stop_timing("page_load","",!0),window.generic.monitoring.all_events_started())}}()},{56:56}]},{},[17]);