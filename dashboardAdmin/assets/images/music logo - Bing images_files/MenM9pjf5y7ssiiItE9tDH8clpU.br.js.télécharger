var WaterfallDenseGridAccessibility;(function(){function nt(){if(u){var n=u.gfbc("dgControl",_d);n&&(f=u.gebc(d,n),f.length>0&&(e(),sj_evt.bind("DenseGridResultsUpdated",e),sj_be(_w,"resize",e),sj_be(n,"keydown",y),sj_be(_w,"unload",a),sj_evt.bind("ajax.unload",a)))}}function e(){var i,n,t,e;if(f.length>0)for(r=[],s=[],h=[],c=[],i=0;i<f.length;i++){var o=f[i],l=[],a=[],v=[],u=[];for(n=0;n<o.childNodes.length;n++)t=o.childNodes[n],l[n]=t.offsetTop,a[n]=t.clientHeight,v[n]=k(t),e=t.querySelector(".iusc,.ent a"),e?u.push(e):u.push(t);s.push(l);h.push(a);c.push(v);r.push(u)}}function y(f){var s=tt(f),h=function(){return!!_w.IsSearchAppXYFocusEnabled},c,a,y,d,e,g;if(s==39){if(n+1<r.length)c=p(n+1,n,i),l(n+1,c);else if(h())return;o(f)}else if(s==37){if(n-1>=0)c=p(n-1,n,i),l(n-1,c);else if(h())return;o(f)}else if(s==38){if(i-1>=0)l(n,i-1);else if(h())return;o(f)}else if(s==40){if(i+1<r[n].length)l(n,i+1);else if(h())return;o(f)}else s==9&&(a=document.activeElement,y=!1,t&&(d=u.gaebc(v,t),d&&(e=w("a",d),e=e.filter(function(n){return n.tabIndex!="-1"}),g=k(d.parentElement),f.shiftKey&&(e.length==0||a==e[0])?(b(g-1,!0),y=!0):f.shiftKey||e.length!=0&&a!=e[e.length-1]||(b(g+1),y=!0))),y||(t=a))}function p(n,t,i){var r=h[t][i]/2+s[t][i],u=s[n],f=h[n];if(u[i]<=r&&u[i]+f[i]>=r)return i;if(u[i]>r)while(i>0&&u[i]>r)i--;else while(i<f.length-1&&u[i]+f[i]<r)i++;return i}function l(u,f){if((u!=n||f!=i)&&(t&&(t.tabIndex=-1),u<r.length)){n=u;var e=r[u];f<e.length&&(i=f,t=e[f],t.tabIndex=0,t.focus())}}function o(n){return sj_sp(n),sj_pd(n),!1}function tt(n){return n?n.which?n.which:n.keyCode:-1}function a(){sj_evt.unbind("DenseGridResultsUpdated",e);sj_ue(_w,"resize",e);sj_ue(g,"keydown",y);sj_ue(_w,"unload",a);sj_evt.unbind("ajax.unload",a)}function w(n,t){var f=[],u,i,r;if(t)for(u=t.getElementsByTagName(n),i=0;i<u.length;i++)r=u[i],(r.offsetHeight>0||r.offsetWidth>0)&&f.push(r);return f}function b(n,i){var f,e,r;i===void 0&&(i=!1);f=it(n);f&&(i&&(e=u.gaebc(v,f),r=w("a",e||f),r=r.filter(function(n){return n.tabIndex!="-1"}),r&&r.length>0&&(f=r[r.length-1])),t=f,t.focus(),o(event))}function k(n){var i=u.gpc(n,"LI"),t=parseInt(u.ga(i,"data-idx"));return t?t:-1}function it(n){var t,u,i,f;if(n<=0)return null;for(t=0;t<c.length;t++)for(u=c[t],i=0;i<u.length;i++)if(f=u[i],f>n)continue;else if(f===n)return r[t][i];return null}var n=0,i=0,t,v="iuscp",d="dgControl_list",r,f,g,s,h,c,u=typeof pMMUtils!="undefined"?pMMUtils:null;nt()})(WaterfallDenseGridAccessibility||(WaterfallDenseGridAccessibility={}))