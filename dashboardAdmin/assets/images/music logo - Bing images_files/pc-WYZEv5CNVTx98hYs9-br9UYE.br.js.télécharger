var FlagFeedback;(function(n){function st(n){n=n||window.event;var t=n.target||n.srcElement;i&&!i.contains(t)&&i.offsetHeight>0&&l()}function ht(n){var t,r;n=n||window.event;t=n.target||n.srcElement;i&&i.contains(t)&&(r=n?n.which?n.which:n.keyCode:n.keyCode,r==wt?(t.tagName=="INPUT"||t.className=="buttonLink"||t.id=="fbdialogcl")&&t.click():r==bt?(t.className=="buttonLink"||t.id=="fbdialogcl")&&(t.click(),b(n)):r==kt&&(l(),b(n)))}function ct(n){w&&!i.contains(n.target)&&(b(n),i.focus())}function b(n){sj_sp(n);sj_pd(n)}function dt(){p=document.activeElement;var n=this.metadata;n&&gt(n.turl,n.maw,n.mah)}function gt(n,t,r){c.textContent="";var f=_d.createElement("img");f.src=n;f.alt=rt&&rt.innerText;t&&r&&(t>250?(f.width=250,f.height=r*250/t):(f.width=t,f.height=r));c.appendChild(f);i.style.display="block";w=!0;u.focus()}function lt(){(u.checked||f.checked||e.checked||o.checked)&&(t.style.display="none",t.textContent="",t.setAttribute(v,"true"))}function l(){i.style.display="none";d.style.display="block";h.style.display="none";h.textContent="";c.style.display="block";t.style.display="none";t.textContent="";t.setAttribute(v,"true");nt.style.display="block";tt.style.display="block";it.style.display="none";u.checked=!1;f.checked=!1;e.checked=!1;o.checked=!1;var n=this.metadata;return n&&vt("flagClose",null,n.ns,n.k),w=!1,p&&p.focus(),sj_evt.fire(yt),!1}function at(){var i,r,n,s;if(!u.checked&&!f.checked&&!e.checked&&!o.checked){t.style.display="block";t.textContent=t.dataset.content;t.setAttribute(v,"false");t.focus();return}if(i=[],u.checked&&i.push("irrelevant"),f.checked&&i.push("offensive"),e.checked&&i.push("adult"),o.checked&&i.push("childabuse"),r=i.join(","),n=this.metadata,n&&(vt("flagSubmit",r,n.ns,n.k),s=g.getAttribute("fbposturl"),s)){var h=window.location.href.match("(images|videos)"),l=h?h[0]:"",c=window.location.href.match(/q=(.+?)(&|$)/),a=c?c[1]:"",y=g.getAttribute("ss"),p=!!n.md5&&n.md5.length>0?n.md5:null,w={partner:"",feedbackType:"",vertical:l,safesearchsetting:y,source:n.src,trafficType:"External",query:a,mUrl:encodeURIComponent(n.imgurl),pUrl:encodeURIComponent(n.surl),thumbUrl:encodeURIComponent(n.turl),hash:p,judgement:r,timestamp:_G.ST.toISOString(),itemId:n.itemId||"",entrypoint:n.entrypoint||""};ReportResult.send(s,w)}ni();sj_evt.fire(pt)}function vt(n,t,i,r){if(typeof mmLog!="undefined"&&mmLog){var u=['{"T":"CI.Click","Name":"',n,'","Meta":"',t,'","AppNS":"',i,'","K":"',r,".1",'","TS":',sb_gt(),"}"];mmLog(u.join(""))}}function ni(){d.style.display="none";h.style.display="block";h.textContent=h.dataset.content;c.style.display="none";nt.style.display="none";tt.style.display="none";it.style.display="block";y.focus()}function k(){sj_ue(_d,"click",st);sj_ue(_d,"keydown",ht);sj_ue(_d,"focusin",ct);sj_evt.unbind("ajax.unload",k);sj_ue(ut,"click",s);sj_ue(ft,"submit",a);sj_ue(u,"click",r);sj_ue(f,"click",r);sj_ue(e,"click",r);sj_ue(o,"click",r);sj_ue(et,"click",a);sj_ue(ot,"click",s);sj_ue(y,"click",s)}var v="aria-hidden",i=_ge("fbdialog"),d=_ge("fbdialog_message"),h=_ge("fbthankyou_message"),g=_ge("fbdialog_container"),c=_ge("fbdialog_thumb_container"),t=_ge("fbdialog_errormessage"),nt=_ge("checkbox_region"),u=_ge("irrelevant_mark_checkbox"),f=_ge("offensive_mark_checkbox"),e=_ge("adult_mark_checkbox"),o=_ge("childabuse_mark_checkbox"),tt=_ge("fbdialog_buttons"),it=_ge("fbthankyou_button"),y=_ge("adult_button_close"),yt="flagfeedback_close",pt="flagfeedback_submit",rt=_ge("fbdialog_title"),ut=_ge("fbdialogcl"),ft=_ge("fbdialog_mark_form"),et=_ge("adult_button_submit"),ot=_ge("adult_button_cancel"),wt=13,bt=32,kt=27,p,w=!1,s=function(){return l()},a=function(){return at()},r=function(){return lt()};sj_be(_d,"click",st);sj_be(_d,"keydown",ht);sj_be(_d,"focusin",ct);sj_be(_d,"unload",k);sj_evt.bind("ajax.unload",k);sj_be(ut,"click",s);sj_be(ft,"submit",a);sj_be(u,"click",r);sj_be(f,"click",r);sj_be(e,"click",r);sj_be(o,"click",r);sj_be(et,"click",a);sj_be(ot,"click",s);sj_be(y,"click",s);n.c=dt;n.p=lt;n.s=at;n.h=l})(FlagFeedback||(FlagFeedback={}))